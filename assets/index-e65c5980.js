var Gs=Object.defineProperty;var Hs=(n,o,e)=>o in n?Gs(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e;var u=(n,o,e)=>(Hs(n,typeof o!="symbol"?o+"":o,e),e);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(t){if(t.ep)return;t.ep=!0;const l=e(t);fetch(t.href,l)}})();const C={currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),intervals:Symbol("intervals"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType")},Eo={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},$e={[C.settings]:{},get(n,o=null){return n in this[C.settings]?this[C.settings][n]:o},set(n,o){typeof n=="object"?Object.keys(n).forEach(e=>{this.set(e,n[e])}):this[C.settings][n]=o}},gt=()=>{},qt=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),ns=n=>{const o=$e.get("debugLevel"),e={};return Object.defineProperty(e,"info",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${n} %c ${qt()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||gt}}),Object.defineProperty(e,"warn",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${n} %c ${qt()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||gt}}),Object.defineProperty(e,"error",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${n} %c ${qt()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||gt}}),Object.defineProperty(e,"debug",{get(){return(o>=2||Array.isArray(o)&&o.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${n} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||gt}}),e};let te;const Vs=()=>{te=ns("Blits")},Ke={normalize(n="",o="0xffffffff"){if(n=n.toString(),n.length>0){const e=/^0x[0-9a-f]{8}$/,s=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,t=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,l=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/;if(e.test(n))return n;if(s.test(n))return n=n.replace("#","").toLowerCase(),n.length===3&&(n=n.split("").map(i=>i+i).join("")),"0x"+n.padEnd(8,"f");const r=t.exec(n);if(r)return"0x"+parseInt(r[3]).toString(16).padStart(2,"0")+parseInt(r[5]).toString(16).padStart(2,"0")+parseInt(r[7]).toString(16).padStart(2,"0")+(r[10]&&r[1]==="rgba"?Math.min(Math.max(Math.round(parseFloat(r[10])*255),0),255).toString(16).padStart(2,"0"):"ff");if(l.test(n))return te.warn("HSL(A) color format is not supported yet"),"0xffffffff";if(n in Eo)return Eo[n]}return o}},qs=(n="",o,e,s=null)=>{let t=0,l=0,r=[],i=null,f=0;const c=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,a=/^\s*(\/?>)\s*/,d=/^([A-Za-z0-9:.\-_@]+)=\s*(["'])/,m=/^<>\s*/,p=/^\s*(<\/>)\s*/,h=()=>{n=g(n);try{return y(_),L(r)}catch(T){throw(T.name=="TemplateParseError"||T.name=="TemplateStructureError")&&(T.message=`${T.message}
${T.context}`),T}},y=T=>{t>=n.length||T()},g=T=>T.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),x=T=>{const w=n.slice(t).match(T);return w&&(l=t,t+=w[0].length),w},_=()=>{x(m)?(r.push({[Symbol.for("componentType")]:null,[C.type]:"opening",[C.level]:f,[C.cursorTagStart]:l}),f++,y(_)):y(S)},S=()=>{x(p)?(f--,r.push({[Symbol.for("componentType")]:null,[C.type]:"closing",[C.level]:f}),y(_)):y(I)},I=()=>{const T=x(c);if(T)i={[Symbol.for("componentType")]:T[1],[C.level]:f,[C.cursorTagStart]:l},T[0].startsWith("</")?(f--,i[C.type]="closing",i[C.level]=f):(i[C.type]="opening",f++),y(v);else throw N("InvalidTag")},v=()=>{const T=x(a);if(T){if(T[1]==="/>"){if(i[C.type]==="closing")throw N("InvalidClosingTag");i[C.type]="self-closing",f--}if(i[C.type]==="opening"){const w=n.slice(t,n.indexOf("<",t));w&&(i.content=w,t+=w.length)}r.push(i),y(_)}else y(P)},P=()=>{const T=x(d);if(T){if(i[C.type]==="closing")throw N("AttributesInClosingTag");const w=T[2],A=new RegExp(`^(.*?)${w}\\s*`),z=x(A);if(z){const M=b(T[1],z[1]);i[M.name]=M.value,y(v)}else throw N("MissingOrInvalidAttributeValue")}else throw N("InvalidAttribute")},b=(T,w)=>{if(T.includes(".")){const[A,z]=T.split(".");return{name:A,value:`{${z}: ${w}}`}}return["color",":color",":effects","effects"].includes(T)?k(T,w):{name:T,value:w}},k=(T,w)=>{let A=w,z=Ke.normalize(A,null);if(z===null){const M=/'([^']+)'/g;let E,Y=0,D="";for(;(E=M.exec(w))!==null;){const q=E[1],U=E.index,j=E[0].length;D+=w.slice(Y,U),z=Ke.normalize(q,null),z===null?D+=w.slice(U,U+j):D+=`'${z}'`,Y=U+j}D+=w.slice(Y),A=D}else A=z;return{name:T,value:A}},L=T=>{let w=[],A=!1,z={children:[]},M=z;for(let E=0;E<T.length;E++){let Y=T[E];if(Y[C.level]===0&&Y[C.type]!=="closing"){if(A)throw O("MultipleTopLevelTags",Y);A=!0}if(Y[C.type]==="opening")w.push({[C.level]:Y[C.level],[C.type]:Y[C.type],[C.cursorTagStart]:Y[C.cursorTagStart],[Symbol.for("componentType")]:Y[Symbol.for("componentType")],parent:M});else if(Y[C.type]==="closing"){const q=w.length===0;let U=!1,j=!1;if(q||(U=w[w.length-1][C.level]!==Y[C.level],j=w[w.length-1][Symbol.for("componentType")]!==Y[Symbol.for("componentType")]),q||U||j)throw O("MismatchedClosingTag",Y);M=w.pop().parent}const D={...Y};delete D[C.type],delete D[C.level],delete D[C.cursorTagStart],Y[C.type]==="opening"?(E+1<T.length&&T[E+1][C.type]!=="closing"&&(D.children=[]),M.children.push(D),M=D):Y[C.type]==="self-closing"&&M.children.push(D)}if(w.length>0)throw O("UnclosedTags",w);return z},F=10,R=50,N=T=>{const w=B();T=`${T} in ${w}`;const A=new Error(T);A.name="TemplateParseError";const z=Math.max(0,l-F),M=Math.min(n.length,t+R),E=n.slice(z,M),Y=t-z;return A.context=$(Y,E),A},O=(T,w)=>{const A=B();T=`${T} in ${A}`;const z=new Error(T);z.name="TemplateStructureError",Array.isArray(w)?z.context=w.map(E=>M(E)).join(`
`):z.context=M(w);function M(E){const Y=Math.max(0,E[C.cursorTagStart]-F),D=n.slice(Y,Y+R);return $(F,D)}return z},$=(T,w)=>{const A=" ".repeat(T)+"^";return`
${w}
${A}
`},B=()=>{if(e){let T=o||"",w=e;for(;w;)T=`${w[Symbol.for("componentType")]}/${T}`,w=w.parent;return T}return s||"Blits.Application"};return h()};let J;function js(n={children:[]}){const o={renderCode:["const elms = []"],effectsCode:[],context:{props:[],components:this.components}};return J=-1,rs.call(o,n),o.renderCode.push("return elms"),{render:new Function("parent","component","context",o.renderCode.join(`
`)),effects:o.effectsCode.map(e=>new Function("component","elms","context",e)),context:o.context}}const zt=function(n,o=!1,e={key:!1,component:"component.",forceEffect:!1}){const s=e.forceEffect?this.effectsCode:this.renderCode;o&&s.push(`parent = ${o}`),"key"in n&&(e.key=Ze(n.key,e.component));const t=e.key?`elms[${J}][${e.key}]`:`elms[${J}]`;e.key&&s.push(`
      elms[${J}] = elms[${J}] || {}
    `),s.push(`
    if(!${t}) {
      ${t} = this.element({parent: parent || 'root'}, component)
    }
    const elementConfig${J} = {}
  `);const l=n.children;delete n.children,n[Symbol.for("componentType")]==="Slot"&&s.push(`elementConfig${J}[Symbol.for('isSlot')] = true`),Object.keys(n).forEach(r=>{r==="slot"&&s.push(`
        elementConfig${J}['parent'] = component[Symbol.for('slots')].filter(slot => slot.ref === '${n.slot}').shift() || component[Symbol.for('slots')][0] || parent
      `),ls(r)?this.effectsCode.push(`${t}.set('${r.substring(1)}', ${Ze(n[r],e.component)})`):s.push(`elementConfig${J}['${r}'] = ${xo(n[r],r,e.component)}`)}),e.holder===!0&&s.push(`
    if(typeof cmp${J} !== 'undefined') {
      for(let key in cmp${J}.config.props) {
        delete  elementConfig${J}[cmp${J}.config.props[key]]
      }
    }
    `),s.push(`
    if(!${t}.nodeId) {
      ${t}.populate(elementConfig${J})
    }
  `),l&&rs.call(this,{children:l},`${t}`,e)},is=function(n,o=!1,e={key:!1,component:"component.",forceEffect:!1,holder:!1}){const s=e.forceEffect?this.effectsCode:this.renderCode;s.push(`
    const cmp${J} =
      (context.components && context.components['${n[Symbol.for("componentType")]}']) ||
      component[Symbol.for('components')]['${n[Symbol.for("componentType")]}']
  `),"key"in n&&(e.key=Ze(n.key,e.component));const t=n.children;delete n.children,zt.call(this,n,o,{...e,holder:!0}),o=e.key?`elms[${J}][${e.key}]`:`elms[${J}]`,J++;const l=e.key?`elms[${J}][${e.key}]`:`elms[${J}]`;e.key&&s.push(`
      elms[${J}] = elms[${J}] || {}
    `),o&&s.push(`parent = ${o}`),s.push(`const props${J} = {}`),Object.keys(n).forEach(r=>{ls(r)?(this.effectsCode.push(`
        ${l}[Symbol.for('props')]['${r.substring(1)}'] = ${Ze(n[r],e.component)}`),s.push(`props${J}['${r.substring(1)}'] = ${Ze(n[r],e.component)}`)):s.push(`props${J}['${r}'] = ${xo(n[r],r,e.component)}`)}),s.push(`
    if(!${l}) {
      const componentType = props${J}['is'] || '${n[Symbol.for("componentType")]}'

  ${l} = (context.components && context.components[componentType] || component[Symbol.for('components')][componentType] || (() => { console.error('component ${n[Symbol.for("componentType")]} not found')})).call(null, {props: props${J}}, ${o}, component)
      if (${l}[Symbol.for('slots')][0]) {
        parent = ${l}[Symbol.for('slots')][0]
        component = ${l}
      } else {
        parent = ${l}[Symbol.for('children')][0]
      }
    }
  `),t&&(J++,zt.call(this,{children:t},!1,{...e}))},Ks=function(n,o){const e=n[":for"];delete n[":for"];const t=/(.+)\s+in\s+(.+)/gi.exec(e),[l,r="index"]=t[1].replace("(","").replace(")","").split(/\s*,\s*/),i={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};o&&i.renderCode.push(`parent = ${o}`);const f=J;i.renderCode.push(`
    const collection = ${xo(t[2],":for")} || []
    const keys = []
    for(let __index = 0; __index < collection.length; __index++) {
      parent = ${o}
      if(!component.key) keys.length = 0
      const scope = Object.assign(component, {
        key: Math.random().toString(),
        ${r}: __index,
        ${l}: collection[__index],
    `),"ref"in n&&n.ref.indexOf("$")===-1&&(i.renderCode.push(`
      __ref: '${n.ref}' + __index
    `),n.ref="$__ref"),i.renderCode.push(`
      })
  `),"key"in n?i.renderCode.push(`
      keys.push(${Ze(n.key,"scope.")}.toString())
    `):i.renderCode.push(`
      keys.push(scope.key.toString())
    `),n[Symbol.for("componentType")]==="Element"||n[Symbol.for("componentType")]==="Slot"?zt.call(i,n,o,{key:"scope.key",component:"scope.",forceEffect:!1}):is.call(i,n,!1,{key:"scope.key",component:"scope.",forceEffect:!1}),i.renderCode=i.renderCode.concat(i.effectsCode),i.renderCode.push("}"),i.renderCode.push(`
   if(elms[${f}]) {
      Object.keys(elms[${f}]).forEach(key => {
        if(keys.indexOf(key) === -1) {
          elms[${f}][key].destroy && elms[${f}][key].destroy()
          delete elms[1][key]
        }
      })
    }
  `),this.effectsCode.push(i.renderCode.join(`
`))},rs=function(n,o=!1,e={}){n.children&&n.children.forEach(s=>{J++,Object.keys(s).indexOf(":for")>-1?Ks.call(this,s,o):s[Symbol.for("componentType")]==="Element"||s[Symbol.for("componentType")]==="Slot"?zt.call(this,s,o,e):is.call(this,s,o,e)})},Ze=(n,o="component.")=>{const e=/('.*?')+/gi,s=/\$/gi,t=n.matchAll(e),l=[];let r=0;for(const i of t)l.push(i[0]),n=n.replace(i[0],`[@@REPLACEMENT${r}@@]`),r++;return n=n.replace(s,o),l.forEach((i,f)=>{n=n.replace(`[@@REPLACEMENT${f}@@]`,i)}),n},xo=(n="",o=!1,e="component.")=>{let s;if(o==="content")if(n.startsWith("$"))s=`${e}${n.replace("$","")}`;else{const t=n.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");s=`'${Zs(t,e)}'`}else if(o!=="color"&&!isNaN(parseFloat(n))){if(s=parseFloat(n),n.endsWith("%")){const l={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[o];l&&(s=`parent.node.${l} * (${s} / 100)`)}}else if(n.toLowerCase()==="true")s=!0;else if(n.toLowerCase()==="false")s=!1;else if(o.startsWith("@")&&n){const t=e.slice(0,-1);s=`${t}['${n.replace("$","")}'] && ${t}['${n.replace("$","")}'].bind(${t})`}else n.startsWith("$")?s=`${e}${n.replace("$","")}`:s=`"${n}"`;return s},ls=n=>n.startsWith(":"),Zs=(n,o)=>{const e=/\{\{\s*(\$\S+)\s*\}\}/g,s=[...n.matchAll(e)];if(s.length)for(let[t,l]of s)n=n.replace(t,`${l.replace("$",`'+${o}`)}+'`);return n};function Qs(n,o){const e={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},s=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);if(!s)throw new Error("Unable to create WebGL context");return o?new Proxy(s,{get(t,l){const r=t[l];return typeof r=="function"?(o.increment(String(l)),r.bind(t)):r}}):s}function Ao(n,o,e){const s=Math.trunc(n>>>24),t=Math.trunc(n>>>16&255),l=Math.trunc(n>>>8&255),r=Math.trunc(n&255),i=Math.trunc(o>>>24),f=Math.trunc(o>>>16&255),c=Math.trunc(o>>>8&255),a=Math.trunc(o&255),d=Math.round(i*e+s*(1-e)),m=Math.round(f*e+t*(1-e)),p=Math.round(c*e+l*(1-e)),h=Math.round(a*e+r*(1-e));return(d<<24|m<<16|p<<8|h)>>>0}function Js(n,o){const e=n>>>24,s=n>>>16&255,t=n>>>8&255,l=Math.trunc((n&255)*o);return(e<<24|s<<16|t<<8|l)>>>0}function it(n,o,e=!1){const s=(n&255)/255*o,t=Math.trunc((n>>>24)*s),l=Math.trunc((n>>>16&255)*s),r=Math.trunc((n>>>8&255)*s),i=Math.trunc(s*255);return e?(i<<24|r<<16|l<<8|t)>>>0:(t<<24|l<<16|r<<8|i)>>>0}function no(n,o){return Object.prototype.hasOwnProperty.call(n,o)}class fs{constructor(o){u(this,"releaseCallback");this.releaseCallback=o}}class en extends fs{constructor(e,s){super(e);u(this,"textureMap",new Map);u(this,"zeroReferenceTextureSet",new Set);u(this,"options");this.options={textureCleanupIntervalMs:s.textureCleanupIntervalMs??1e4,textureCleanupAgeThreadholdMs:s.textureCleanupAgeThreadholdMs??6e4},setInterval(()=>{const t=Date.now(),l=this.options.textureCleanupAgeThreadholdMs;for(const r of this.zeroReferenceTextureSet)t-r.lastUpdate>l&&(this.releaseCallback(r.id),this.textureMap.delete(r.id),this.zeroReferenceTextureSet.delete(r))},this.options.textureCleanupIntervalMs)}registerTexture(e){var t;const s=(t=e.options)==null?void 0:t.id;if(!this.textureMap.has(s)){const l={id:s,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(s,l),this.zeroReferenceTextureSet.add(l)}}incrementTextureRefCount(e){var l;const s=(l=e.options)==null?void 0:l.id;let t=this.textureMap.get(s);t||(this.registerTexture(e),t=this.textureMap.get(s)),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),t.nodeRefCount++,t.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(t)&&this.zeroReferenceTextureSet.delete(t)}decrementTextureRefCount(e){var l;const s=(l=e.options)==null?void 0:l.id,t=this.textureMap.get(s);t.nodeRefCount--,t.lastUpdate=Date.now(),t.nodeRefCount===0&&this.zeroReferenceTextureSet.add(t),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class tn extends fs{constructor(e){super(e);u(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var s,t;(s=e.options)==null||s.id,this.registry.register(e,(t=e.options)==null?void 0:t.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}class _e{constructor(){u(this,"eventListeners",{})}on(o,e){let s=this.eventListeners[o];s||(s=[]),s.push(e),this.eventListeners[o]=s}off(o,e){const s=this.eventListeners[o];if(!s)return;if(!e){delete this.eventListeners[o];return}const t=s.indexOf(e);t>=0&&s.splice(t,1)}once(o,e){const s=(t,l)=>{this.off(o,s),e(t,l)};this.on(o,s)}emit(o,e){const s=this.eventListeners[o];s&&[...s].forEach(t=>{t(this,e)})}removeAllListeners(){this.eventListeners={}}}const on="modulepreload",sn=function(n){return"/"+n},Mo={},as=function(o,e,s){if(!e||e.length===0)return o();const t=document.getElementsByTagName("link");return Promise.all(e.map(l=>{if(l=sn(l),l in Mo)return;Mo[l]=!0;const r=l.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(!!s)for(let a=t.length-1;a>=0;a--){const d=t[a];if(d.href===l&&(!r||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${i}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":on,r||(c.as="script",c.crossOrigin=""),c.href=l,document.head.appendChild(c),r)return new Promise((a,d)=>{c.addEventListener("load",a),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>o()).catch(l=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=l,window.dispatchEvent(r),!r.defaultPrevented)throw l})};class nn{static makeCacheKey(o){return!1}static resolveDefaults(o){return{}}}function Lo(n,o,e){const s=n.createShader(o);if(!s)throw new Error;if(n.shaderSource(s,e),n.compileShader(s),n.getShaderParameter(s,n.COMPILE_STATUS))return s;console.log(n.getShaderInfoLog(s)),n.deleteShader(s)}function rn(n,o,e){const s=n.createProgram();if(!s)throw new Error;if(n.attachShader(s,o),n.attachShader(s,e),n.linkProgram(s),n.getProgramParameter(s,n.LINK_STATUS))return s;console.log(n.getProgramInfoLog(s)),n.deleteProgram(s)}function ln(n){return self.WebGL2RenderingContext&&n instanceof self.WebGL2RenderingContext}class Je extends nn{constructor(e){super();u(this,"boundBufferCollection",null);u(this,"buffersBound",!1);u(this,"program");u(this,"vao");u(this,"renderer");u(this,"glw");u(this,"attributeBuffers");u(this,"attributeLocations");u(this,"attributeNames");u(this,"uniformLocations");u(this,"uniformTypes");u(this,"supportsIndexedTextures");const s=this.renderer=e.renderer,t=this.glw=this.renderer.glw;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;const l=t.isWebGl2(),r=l&&e.webgl2Extensions||!l&&e.webgl1Extensions||[],i=l?"2.0":"1.0";r.forEach(y=>{if(!t.getExtension(y))throw new Error(`Shader "${this.constructor.name}" requires extension "${y}" for WebGL ${i} but wasn't found`)});const f=e.shaderSources||this.constructor.shaderSources;if(f)l&&(f!=null&&f.webGl2)&&(f.fragment=f.webGl2.fragment,f.vertex=f.webGl2.vertex,delete f.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const c=s.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,a=f.vertex instanceof Function?f.vertex(c):f.vertex,d=f.fragment instanceof Function?f.fragment(c):f.fragment,m=Lo(t,t.VERTEX_SHADER,a),p=Lo(t,t.FRAGMENT_SHADER,d);if(!m||!p)throw new Error;const h=rn(t,m,p);if(!h)throw new Error;if(this.program=h,l){const y=t.createVertexArray();if(!y)throw new Error;this.vao=y,t.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach(y=>{const g=t.getAttribLocation(this.program,y);if(g<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${y}"!`);const x=t.createBuffer();if(!x)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${y}"`);this.attributeLocations[y]=g,this.attributeBuffers[y]=x,this.attributeNames.push(y)}),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach(y=>{const g=t.getUniformLocation(this.program,y.name);if(this.uniformTypes[y.name]=y.uniform,!g){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${y.name}"`);return}this.uniformLocations[y.name]=g})}bindBufferAttribute(e,s,t){const{glw:l}=this;l.enableVertexAttribArray(e),l.vertexAttribPointer(s,e,t.size,t.type,t.normalized,t.stride,t.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,s){return!1}bindRenderOp(e,s){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);const{glw:t}=e;if(this.setUniform("u_resolution",[t.canvas.width,t.canvas.height]),this.setUniform("u_pixelRatio",e.options.pixelRatio),s){if(no(s,"$dimensions")){let l=s.$dimensions;l||(l=e.dimensions),this.setUniform("u_dimensions",[l.width,l.height])}if(no(s,"$alpha")){let l=s.$alpha;l||(l=e.alpha),this.setUniform("u_alpha",l)}this.bindProps(s)}}setUniform(e,...s){this.glw.setUniform(this.uniformTypes[e],this.uniformLocations[e],...s)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const s in this.attributeLocations){const t=e.getBuffer(s),l=e.getAttributeInfo(s);this.bindBufferAttribute(this.attributeLocations[s],t,l)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}u(Je,"shaderSources");class ce{constructor(o){u(this,"priority",1);u(this,"name","");u(this,"ref");u(this,"target");u(this,"passParameters","");u(this,"declaredUniforms","");u(this,"uniformInfo",{});const{ref:e,target:s,props:t={}}=o;this.ref=e,this.target=s;const l={},r=[];let i="";const f=this.constructor.uniforms||{};for(const c in f){const a=f[c],d=a.type,m=`${e}_${c}`;let p="";a.size&&(p=`[${a.size(t)}]`),r.push(m),i+=`uniform ${d} ${m}${p};`,l[c]={name:m,uniform:f[c].method}}this.passParameters=r.join(","),this.declaredUniforms=i,this.uniformInfo=l}static getEffectKey(o){return""}static getMethodParameters(o,e){const s=[];for(const t in o){const l=o[t];let r="";l.size&&(r=`[${l.size(e)}]`),s.push(`${l.type} ${t}${r}`)}return s.join(",")}static resolveDefaults(o){return{}}static makeEffectKey(o){return!1}}u(ce,"uniforms",{}),u(ce,"methods"),u(ce,"onShaderMask"),u(ce,"onColorize"),u(ce,"onEffectMask");class Gt extends _e{constructor(e){super();u(this,"txManager");u(this,"dimensions",null);u(this,"error",null);u(this,"state","loading");this.txManager=e}setState(e,...s){if(this.state!==e){if(this.state=e,e==="loaded"){const t=s;this.dimensions=t[0]}else if(e==="failed"){const t=s;this.error=t[0]}this.emit(e,...s)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}const fn={x:(n,o)=>{n.props.x=o},y:(n,o)=>{n.props.y=o},width:(n,o)=>{n.props.width=o},height:(n,o)=>{n.props.height=o},color:(n,o)=>{n.props.color=o},zIndex:(n,o)=>{n.props.zIndex=o},fontFamily:(n,o)=>{n.props.fontFamily=o},fontWeight:(n,o)=>{n.props.fontWeight=o},fontStyle:(n,o)=>{n.props.fontStyle=o},fontStretch:(n,o)=>{n.props.fontStretch=o},fontSize:(n,o)=>{n.props.fontSize=o},text:(n,o)=>{n.props.text=o},textAlign:(n,o)=>{n.props.textAlign=o},contain:(n,o)=>{n.props.contain=o},offsetY:(n,o)=>{n.props.offsetY=o},scrollable:(n,o)=>{n.props.scrollable=o},scrollY:(n,o)=>{n.props.scrollY=o},letterSpacing:(n,o)=>{n.props.letterSpacing=o},lineHeight:(n,o)=>{n.props.lineHeight=o},maxLines:(n,o)=>{n.props.maxLines=o},textBaseline:(n,o)=>{n.props.textBaseline=o},verticalAlign:(n,o)=>{n.props.verticalAlign=o},overflowSuffix:(n,o)=>{n.props.overflowSuffix=o},debug:(n,o)=>{n.props.debug=o}};class cs{constructor(o){u(this,"stage");u(this,"set");this.stage=o;const e={...fn,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([s,t])=>[s,(l,r)=>{l.props[s]!==r&&(t(l,r),this.stage.requestRender())}])))}setStatus(o,e,s){o.status!==e&&(o.status=e,o.emitter.emit(e,s))}scheduleUpdateState(o){o.updateScheduled||(o.updateScheduled=!0,queueMicrotask(()=>{o.updateScheduled=!1,this.updateState(o)}))}}const Ce=n=>{const o=n>>>24,e=n>>>16&255,s=n>>>8&255,t=n&255;return[o/255,e/255,s/255,t/255]};function an(n){return(n&255)/255}function jt(n){const o=Math.floor(n[0]*255),e=Math.floor(n[1]*255),s=Math.floor(n[2]*255),t=Math.floor(n[3]*255);return`rgba(${o},${e},${s},${t.toFixed(4)})`}function Me(n,o,e,s,t){return t?(t.x1=n,t.y1=o,t.x2=e,t.y2=s,t):{x1:n,y1:o,x2:e,y2:s}}function cn(n,o,e){const s=Me(Math.max(n.x1,o.x1),Math.max(n.y1,o.y1),Math.min(n.x2,o.x2),Math.min(n.y2,o.y2),e);return s.x1<s.x2&&s.y1<s.y2?s:Me(0,0,0,0,s)}function Kt(n,o){return n.x1<o.x2&&n.x2>o.x1&&n.y1<o.y2&&n.y2>o.y1}function dn(n,o){return o?(o.x=n.x1,o.y=n.y1,o.width=n.x2-n.x1,o.height=n.y2-n.y1,o):{x:n.x1,y:n.y1,width:n.x2-n.x1,height:n.y2-n.y1}}function bo(n,o,e){const s=Math.max(n.x,o.x),t=Math.max(n.y,o.y),l=Math.min(n.x+n.width,o.x+o.width)-s,r=Math.min(n.y+n.height,o.y+o.height)-t;return l>0&&r>0?e?(e.x=s,e.y=t,e.width=l,e.height=r,e):{x:s,y:t,width:l,height:r}:e?(e.x=0,e.y=0,e.width=0,e.height=0,e):{x:0,y:0,width:0,height:0}}function ds(n,o){return o?(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height,o):{x:n.x,y:n.y,width:n.width,height:n.height}}function un(n,o){return n===o?!0:n===null||o===null?!1:n.x===o.x&&n.y===o.y&&n.width===o.width&&n.height===o.height}function Bo(n,o){return n.x1<=o.x2&&n.y1<=o.y2&&n.x2>=o.x1&&n.y2>=o.y1}function hn(n){return n.x1<n.x2&&n.y1<n.y2}class us extends _e{constructor(e,s){super();u(this,"fontFamily");u(this,"descriptors");u(this,"loaded",!1);this.fontFamily=e,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...s}}static convertToCssFontFaceDescriptors(e){return{style:e.style,weight:typeof e.weight=="number"?`${e.weight}`:e.weight,stretch:e.stretch,unicodeRange:e.unicodeRange,variant:e.variant,featureSettings:e.featureSettings,display:e.display}}}class hs extends us{constructor(e,s,t){super(e,s);u(this,"fontFace");u(this,"fontUrl");const l=t.replace(/\(|\)/g,""),r=this.descriptors,i={style:r.style,weight:typeof r.weight=="number"?`${r.weight}`:r.weight,stretch:r.stretch,unicodeRange:r.unicodeRange,variant:r.variant,featureSettings:r.featureSettings,display:r.display},f=new FontFace(e,`url(${l})`,i);f.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error),this.fontFace=f,this.fontUrl=t}}const Po=2048;function No(n,o,e,s,t){const l=n!=="bottom"?.5*o:0;return e*(s-1)+l+Math.max(e,o)+(t||0)}class pn{constructor(o,e){u(this,"_canvas");u(this,"_context");u(this,"_settings");u(this,"renderInfo");this._canvas=o,this._context=e,this._settings=this.mergeDefaults({})}set settings(o){this._settings=this.mergeDefaults(o)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const o=[this._settings.fontFace],e=[];for(let s=0,t=o.length;s<t;s++)o[s]==="serif"||o[s]==="sans-serif"?e.push(o[s]):e.push(`"${o[s]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${e.join(",")}`}_load(){if(document.fonts){const o=this._getFontSetting();try{if(!document.fonts.check(o,this._settings.text))return document.fonts.load(o,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,o)}).then(()=>{document.fonts.check(o,this._settings.text)||console.warn("[Lightning] Font not found",o)})}catch{console.warn("[Lightning] Can't check font loading for "+o)}}}calculateRenderInfo(){const o={},e=this.getPrecision(),s=this._settings.paddingLeft*e,t=this._settings.paddingRight*e,l=this._settings.fontSize*e;let r=this._settings.offsetY===null?null:this._settings.offsetY*e,i=(this._settings.lineHeight||l)*e;const f=this._settings.w*e,c=this._settings.h*e;let a=this._settings.wordWrapWidth*e;const d=this._settings.cutSx*e,m=this._settings.cutEx*e,p=this._settings.cutSy*e,h=this._settings.cutEy*e,y=(this._settings.letterSpacing||0)*e,g=this._settings.textIndent*e;this.setFontProperties();let x=f||2048/this.getPrecision(),_=x-s;if(_<10&&(x+=10-_,_=10),a||(a=_),this._settings.textOverflow&&!this._settings.wordWrap){let k;switch(this._settings.textOverflow){case"clip":k="";break;case"ellipsis":k=this._settings.overflowSuffix;break;default:k=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,a-g,k)}let S;if(this._settings.wordWrap)S=this.wrapText(this._settings.text,a,y,g);else{S={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const k=S.l.length;for(let L=0;L<k-1;L++)S.n.push(L)}let I=S.l;if(this._settings.maxLines&&I.length>this._settings.maxLines){const k=I.slice(0,this._settings.maxLines);let L=null;if(this._settings.overflowSuffix){const $=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,B=this.wrapText(k[k.length-1],a-$,y,g);k[k.length-1]=`${B.l[0]}${this._settings.overflowSuffix}`,L=[B.l.length>1?B.l[1]:""]}else L=[""];let F;const R=I.length;let N=0;const O=S.n.length;for(F=this._settings.maxLines;F<R;F++)L[N]+=`${L[N]?" ":""}${I[F]}`,F+1<O&&S.n[F+1]&&N++;o.remainingText=L.join(`
`),o.moreTextLines=!0,I=k}else o.moreTextLines=!1,o.remainingText="";let v=0;const P=[];for(let k=0;k<I.length;k++){const L=this.measureText(I[k],y)+(k===0?g:0);P.push(L),v=Math.max(v,L)}o.lineWidths=P,f||(x=v+s+t,_=v),i=i||l;let b;return c?b=c:b=No(this._settings.textBaseline,l,i,I.length,r),r===null&&(r=l),o.w=x,o.h=b,o.lines=I,o.precision=e,x||(x=1),b||(b=1),(d||m)&&(x=Math.min(x,m-d)),(p||h)&&(b=Math.min(b,h-p)),o.width=x,o.innerWidth=_,o.height=b,o.fontSize=l,o.cutSx=d,o.cutSy=p,o.cutEx=m,o.cutEy=h,o.lineHeight=i,o.lineWidths=P,o.offsetY=r,o.paddingLeft=s,o.paddingRight=t,o.letterSpacing=y,o.textIndent=g,o}draw(o,e){const s=this.getPrecision(),t=(e==null?void 0:e.lines)||o.lines,l=(e==null?void 0:e.lineWidths)||o.lineWidths,r=e?No(this._settings.textBaseline,o.fontSize,o.lineHeight,e.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*s):o.height;this._canvas.width=Math.min(Math.ceil(o.width+this._settings.textRenderIssueMargin),Po),this._canvas.height=Math.min(Math.ceil(r),Po),this.setFontProperties(),o.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(o.cutSx||o.cutSy)&&this._context.translate(-o.cutSx,-o.cutSy);let i,f;const c=[];for(let d=0,m=t.length;d<m;d++)i=d===0?o.textIndent:0,f=d*o.lineHeight+o.offsetY,this._settings.verticalAlign=="middle"?f+=(o.lineHeight-o.fontSize)/2:this._settings.verticalAlign=="bottom"&&(f+=o.lineHeight-o.fontSize),this._settings.textAlign==="right"?i+=o.innerWidth-l[d]:this._settings.textAlign==="center"&&(i+=(o.innerWidth-l[d])/2),i+=o.paddingLeft,c.push({text:t[d],x:i,y:f,w:l[d]});if(this._settings.highlight){const d=this._settings.highlightColor,m=this._settings.highlightHeight*s||o.fontSize*1.5,p=this._settings.highlightOffset*s,h=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*s:o.paddingLeft,y=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*s:o.paddingRight;this._context.fillStyle=jt(d);for(let g=0;g<c.length;g++){const x=c[g];this._context.fillRect(x.x-h,x.y-o.offsetY+p,x.w+y+h,m)}}let a=null;this._settings.shadow&&(a=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=jt(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*s,this._context.shadowOffsetY=this._settings.shadowOffsetY*s,this._context.shadowBlur=this._settings.shadowBlur*s),this._context.fillStyle=jt(this._settings.textColor);for(let d=0,m=c.length;d<m;d++){const p=c[d];if(o.letterSpacing===0)this._context.fillText(p.text,p.x,p.y);else{const h=p.text.split("");let y=p.x;for(let g=0,x=h.length;g<x;g++)this._context.fillText(h[g],y,p.y),y+=this.measureText(h[g],o.letterSpacing)}}a&&(this._context.shadowColor=a[0],this._context.shadowOffsetX=a[1],this._context.shadowOffsetY=a[2],this._context.shadowBlur=a[3]),(o.cutSx||o.cutSy)&&this._context.translate(o.cutSx,o.cutSy),this.renderInfo=o}wrapWord(o,e,s){const t=this._context.measureText(s).width,l=o.length,r=this._context.measureText(o).width;if(r<=e)return o;let i=Math.floor(e*l/r),f=this._context.measureText(o.substring(0,i)).width+t;if(f>e)for(;i>0&&(f=this._context.measureText(o.substring(0,i)).width+t,f>e);)i-=1;else for(;i<l;)if(f=this._context.measureText(o.substring(0,i)).width+t,f<e)i+=1;else{i-=1;break}return o.substring(0,i)+(e>=t?s:"")}wrapText(o,e,s,t=0){const l=o.split(/\r?\n/g);let r=[];const i=[];for(let f=0;f<l.length;f++){const c=[];let a="",d=e-t;const m=l[f].split(" ");for(let p=0;p<m.length;p++){const h=this.measureText(m[p],s),y=h+this.measureText(" ",s);p===0||y>d?(p>0&&(c.push(a),a=""),a+=m[p],d=e-h-(p===0?t:0)):(d-=y,a+=` ${m[p]}`)}c.push(a),a="",r=r.concat(c),f<l.length-1&&i.push(r.length)}return{l:r,n:i}}measureText(o,e=0){return e?o.split("").reduce((s,t)=>s+this._context.measureText(t).width+e,0):this._context.measureText(o).width}mergeDefaults(o){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...o}}}const Fo=typeof self>"u"?globalThis:self;var ss;const zo=((ss=Fo.document)==null?void 0:ss.fonts)||Fo.fonts;function mn(n){const{fontFamily:o,fontStyle:e,fontWeight:s,fontStretch:t,fontSize:l}=n;return[e,s,t,`${l}px`,o].join(" ")}const yn=Me(0,0,0,0);class gn extends cs{constructor(e){super(e);u(this,"canvas");u(this,"context");u(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let s=this.canvas.getContext("2d");s||(this.canvas=document.createElement("canvas"),s=this.canvas.getContext("2d")),this.context=s,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,s)=>{e.props.fontFamily=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,s)=>{e.props.fontWeight=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,s)=>{e.props.fontStyle=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,s)=>{e.props.fontStretch=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,s)=>{e.props.fontSize=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,s)=>{e.props.text=s,this.invalidateLayoutCache(e)},textAlign:(e,s)=>{e.props.textAlign=s,this.invalidateLayoutCache(e)},color:(e,s)=>{e.props.color=s,this.invalidateLayoutCache(e)},x:(e,s)=>{e.props.x=s,this.invalidateVisibleWindowCache(e)},y:(e,s)=>{e.props.y=s,this.invalidateVisibleWindowCache(e)},contain:(e,s)=>{e.props.contain=s,this.invalidateLayoutCache(e)},width:(e,s)=>{e.props.width=s,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,s)=>{e.props.height=s,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,s)=>{e.props.offsetY=s,this.invalidateLayoutCache(e)},scrollY:(e,s)=>{e.props.scrollY=s},letterSpacing:(e,s)=>{e.props.letterSpacing=s,this.invalidateLayoutCache(e)},lineHeight:(e,s)=>{e.props.lineHeight=s,this.invalidateLayoutCache(e)},maxLines:(e,s)=>{e.props.maxLines=s,this.invalidateLayoutCache(e)},textBaseline:(e,s)=>{e.props.textBaseline=s,this.invalidateLayoutCache(e)},verticalAlign:(e,s)=>{e.props.verticalAlign=s,this.invalidateLayoutCache(e)},overflowSuffix:(e,s)=>{e.props.overflowSuffix=s,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof hs}addFontFace(e){zo.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new _e,canvasPages:void 0,lightning2TextRenderer:new pn(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const h=mn(e.props);if(e.fontInfo={cssString:h,loaded:!1},!e.fontInfo.loaded){zo.load(h).then(this.onFontLoaded.bind(this,e,h)).catch(this.onFontLoadError.bind(this,e,h));return}}if(!e.fontInfo.loaded)return;if(!e.renderInfo){const h=e.props.maxLines,y=e.props.contain==="both"?Math.floor((e.props.height-e.props.offsetY)/e.props.lineHeight):0,g=y>0&&h>0?Math.min(y,h):Math.max(y,h);e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Ce(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight,maxLines:g,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0}const{x:s,y:t,width:l,height:r,scrollY:i,contain:f}=e.props,{visibleWindow:c}=e;let{renderWindow:a,canvasPages:d}=e;if(!c.valid){const h=Me(s,t,f!=="none"?s+l:1/0,f==="both"?t+r:1/0,yn);cn(this.rendererBounds,h,c),c.valid=!0}const m=c.y2-c.y1,p=Math.ceil(m/e.renderInfo.lineHeight);if(m===0){d=void 0,a=void 0,this.setStatus(e,"loaded");return}else if(a&&d){const h=s+a.x1,y=t-i+a.y1,g=s+a.x2,x=t-i+a.y2;if(h<=c.x1&&g>=c.x2&&y<=c.y1&&x>=c.y2){this.setStatus(e,"loaded");return}x<c.y2?(a.y1+=p*e.renderInfo.lineHeight,a.y2+=p*e.renderInfo.lineHeight,d.push(d.shift()),d[2].lineNumStart=d[1].lineNumStart+p,d[2].lineNumEnd=d[2].lineNumStart+p,d[2].valid=!1):y>c.y1&&(a.y1-=p*e.renderInfo.lineHeight,a.y2-=p*e.renderInfo.lineHeight,d.unshift(d.pop()),d[0].lineNumStart=d[1].lineNumStart-p,d[0].lineNumEnd=d[0].lineNumStart+p,d[0].valid=!1)}else{const h=e.renderInfo.lineHeight*p,y=Math.ceil(i/h),g=y*p,x=g-p,_=g+p;d=[{texture:d==null?void 0:d[0].texture,lineNumStart:x,lineNumEnd:x+p,valid:!1},{texture:d==null?void 0:d[1].texture,lineNumStart:g,lineNumEnd:g+p,valid:!1},{texture:d==null?void 0:d[2].texture,lineNumStart:_,lineNumEnd:_+p,valid:!1}],e.canvasPages=d;const S=y*h;a={x1:0,y1:S-h,x2:l,y2:S+h*2}}e.renderWindow=a,performance.now();for(const h of d)if(!h.valid){if(h.lineNumStart<0){h.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),h.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(h.lineNumStart,h.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(h.lineNumStart,h.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||(h.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),h.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,s,t,l){var k,L,F,R,N,O,$,B,T,w,A,z;const{stage:r}=this,{canvasPages:i,textW:f=0,textH:c=0,renderWindow:a}=e;if(!i||!a)return;const{x:d,y:m,scrollY:p,contain:h,width:y,height:g}=e.props,x={x:d,y:m,width:h!=="none"?y:f,height:h==="both"?g:c};bo({x:0,y:0,width:r.options.appWidth,height:r.options.appHeight},x);const S=(a.y2-a.y1)/3,{zIndex:I,color:v}=e.props,P=l*an(v),b=it(4294967295,P);i[0].valid&&this.stage.renderer.addQuad({alpha:P,clippingRect:t,colorBl:b,colorBr:b,colorTl:b,colorTr:b,width:((L=(k=i[0].texture)==null?void 0:k.dimensions)==null?void 0:L.width)||0,height:((R=(F=i[0].texture)==null?void 0:F.dimensions)==null?void 0:R.height)||0,texture:i[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:s.tx,ty:s.ty-p+a.y1,ta:s.ta,tb:s.tb,tc:s.tc,td:s.td}),i[1].valid&&this.stage.renderer.addQuad({alpha:P,clippingRect:t,colorBl:b,colorBr:b,colorTl:b,colorTr:b,width:((O=(N=i[1].texture)==null?void 0:N.dimensions)==null?void 0:O.width)||0,height:((B=($=i[1].texture)==null?void 0:$.dimensions)==null?void 0:B.height)||0,texture:i[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:s.tx,ty:s.ty-p+a.y1+S,ta:s.ta,tb:s.tb,tc:s.tc,td:s.td}),i[2].valid&&this.stage.renderer.addQuad({alpha:P,clippingRect:t,colorBl:b,colorBr:b,colorTl:b,colorTr:b,width:((w=(T=i[2].texture)==null?void 0:T.dimensions)==null?void 0:w.width)||0,height:((z=(A=i[2].texture)==null?void 0:A.dimensions)==null?void 0:z.height)||0,texture:i[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:s.tx,ty:s.ty-p+a.y1+S+S,ta:s.ta,tb:s.tb,tc:s.tc,td:s.td})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,s){var t;s!==((t=e.fontInfo)==null?void 0:t.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,s,t){var l;s!==((l=e.fontInfo)==null?void 0:l.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,t),this.scheduleUpdateState(e))}}class xn{constructor(o){u(this,"textureSource");this.textureSource=o}}class bn{constructor(o){u(this,"stage");this.stage=o}}class Sn{}class ps extends Sn{constructor(e,s,t,l,r,i,f,c,a,d){super();u(this,"glw");u(this,"options");u(this,"buffers");u(this,"shader");u(this,"shaderProps");u(this,"alpha");u(this,"clippingRect");u(this,"dimensions");u(this,"bufferIdx");u(this,"zIndex");u(this,"length",0);u(this,"numQuads",0);u(this,"textures",[]);u(this,"maxTextures");this.glw=e,this.options=s,this.buffers=t,this.shader=l,this.shaderProps=r,this.alpha=i,this.clippingRect=f,this.dimensions=c,this.bufferIdx=a,this.zIndex=d,this.maxTextures=l.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:s,maxTextures:t}=this,l=s.findIndex(i=>i===e);if(l!==-1)return l;const r=s.length;return r>=t?4294967295:(this.textures.push(e),r)}draw(){const{glw:e,shader:s,shaderProps:t,options:l}=this,{shManager:r}=l;r.useShader(s),s.bindRenderOp(this,t);const i=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:f,y:c,width:a,height:d}=this.clippingRect,m=l.pixelRatio,p=l.canvas.height,h=Math.round(f*m),y=Math.round(a*m),g=Math.round(d*m),x=Math.round(p-g-c*m);e.setScissorTest(!0),e.scissor(h,x,y,g)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,i)}}function wn(n){const o={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(o).forEach(s=>{o[s]=n.getParameter(n[s])}),o}function Tn(n){const o={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(o).forEach(s=>{o[s]=n.getExtension(s)}),o}function Cn(n,o){const e=~~(o/80),s=new Uint16Array(e*6);for(let l=0,r=0;l<e;l+=6,r+=4)s[l]=r,s[l+1]=r+1,s[l+2]=r+2,s[l+3]=r+2,s[l+4]=r+1,s[l+5]=r+3;const t=n.createBuffer();n.elementArrayBufferData(t,s,n.STATIC_DRAW)}function vn(n){return n!==null&&typeof n=="object"&&n.constructor&&n.constructor.name==="HTMLImageElement"}function So(n,o){var e=0,s,t;o=o||{};function l(){var r=s,i=arguments.length,f,c;e:for(;r;){if(r.args.length!==arguments.length){r=r.next;continue}for(c=0;c<i;c++)if(r.args[c]!==arguments[c]){r=r.next;continue e}return r!==s&&(r===t&&(t=r.prev),r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.next=s,r.prev=null,s.prev=r,s=r),r.val}for(f=new Array(i),c=0;c<i;c++)f[c]=arguments[c];return r={args:f,val:n.apply(null,f)},s?(s.prev=r,r.next=s):t=r,e===o.maxSize?(t=t.prev,t.next=null):e++,s=r,r.val}return l.clear=function(){s=null,t=null,e=0},l}const Oo=n=>n&&!(n&n-1),ae=(n,o,e,s)=>{const t=3*n,l=3*(e-n)-t,r=1-t-l,i=3*o,f=3*(s-o)-i,c=1-i-f;return function(a){if(a>=1)return 1;if(a<=0)return 0;let d=.5,m,p,h;for(let x=0;x<20;x++){if(m=d*(d*(d*r+l)+t),h=a-m,h>-1e-8&&h<1e-8)return d*(d*(d*c+f)+i);if(p=d*(d*(3*r)+2*l)+t,p>1e-10&&p<1e-10)break;d+=h/p}let y=0,g=1;for(let x=0;x<20;x++){if(d=.5*(y+g),m=d*(d*(d*r+l)+t),h=a-m,h>-1e-8&&h<1e-8)return d*(d*(d*c+f)+i);h<0?g=d:y=d}}},In=So(n=>{switch(n){case"linear":return function(e){return e};case"ease":return ae(.25,.1,.25,1);case"ease-in":return ae(.42,0,1,1);case"ease-out":return ae(0,0,.58,1);case"ease-in-out":return ae(.42,0,.58,1);case"ease-in-sine":return ae(.12,0,.39,0);case"ease-out-sine":return ae(.12,0,.39,0);case"ease-in-out-sine":return ae(.37,0,.63,1);case"ease-in-cubic":return ae(.32,0,.67,0);case"ease-out-cubic":return ae(.33,1,.68,1);case"ease-in-out-cubic":return ae(.65,0,.35,1);case"ease-in-circ":return ae(.55,0,1,.45);case"ease-out-circ":return ae(0,.55,.45,1);case"ease-in-out-circ":return ae(.85,0,.15,1);case"ease-in-back":return ae(.36,0,.66,-.56);case"ease-out-back":return ae(.34,1.56,.64,1);case"ease-in-out-back":return ae(.68,-.6,.32,1.6);case"step-start":return function(){return 1};case"step-end":return function(e){return e===1?1:0};default:const o="cubic-bezier(";if(n&&n.indexOf(o)===0){const e=n.substr(o.length,n.length-o.length-1).split(",");if(e.length!==4)return console.warn("Unknown timing function: "+n),function(i){return i};const s=parseFloat(e[0]||"0.42"),t=parseFloat(e[1]||"0"),l=parseFloat(e[2]||"1"),r=parseFloat(e[3]||"1");return isNaN(s)||isNaN(t)||isNaN(l)||isNaN(r)?(console.warn(" Unknown timing function: "+n),function(i){return i}):ae(s,t,l,r)}else return console.warn("Unknown timing function: "+n),function(e){return e}}});Math.hypot||(Math.hypot=(...n)=>{let o=0,e=n.length;for(;e--;)o+=n[e]*n[e];return Math.sqrt(o)});const $o=new Uint8Array([0,0,0,0]);class ms extends xn{constructor(e,s){super(s);u(this,"glw");u(this,"_nativeCtxTexture",null);u(this,"_state","freed");u(this,"_w",0);u(this,"_h",0);this.glw=e}get ctxTexture(){return this._state==="freed"&&this.load(),this._nativeCtxTexture,this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){this._state==="loading"||this._state==="loaded"||(this._state="loading",this.textureSource.setState("loading"),this.onLoadRequest().then(({width:e,height:s})=>{this._state="loaded",this._w=e,this._h=s,this.textureSource.setState("loaded",{width:e,height:s})}).catch(e=>{this._state="failed",this.textureSource.setState("failed",e),console.error(e)}))}async onLoadRequest(){var r;this._nativeCtxTexture=this.createNativeCtxTexture();const{glw:e}=this;e.activeTexture(0),e.bindTexture(this._nativeCtxTexture),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,$o);const s=await((r=this.textureSource)==null?void 0:r.getTextureData());let t=0,l=0;if(this._nativeCtxTexture,e.activeTexture(0),s.data instanceof ImageBitmap||s.data instanceof ImageData||vn(s.data)){const i=s.data;t=i.width,l=i.height,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!s.premultiplyAlpha),e.texImage2D(0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),(e.isWebGl2()||Oo(t)&&Oo(l))&&e.generateMipmap()}else if(s.data===null)t=0,l=0,e.bindTexture(this._nativeCtxTexture),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,$o);else if("mipmaps"in s.data&&s.data.mipmaps){const{mipmaps:i,width:f=0,height:c=0,type:a,glInternalFormat:d}=s.data,m=a==="ktx"?new DataView(i[0]??new ArrayBuffer(0)):i[0];e.bindTexture(this._nativeCtxTexture),e.compressedTexImage2D(0,d,f,c,0,m),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR)}else console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",s);return{width:t,height:l}}free(){if(this._state==="freed"||(this._state="freed",this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:e}=this;e.deleteTexture(this._nativeCtxTexture),this._nativeCtxTexture=null}createNativeCtxTexture(){const{glw:e}=this,s=e.createTexture();if(!s)throw new Error("Could not create WebGL Texture");return s}}const dt=class dt extends Gt{constructor(e,s){super(e);u(this,"props");this.props=dt.resolveDefaults(s||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureData(){const e=new Uint32Array([this.color]),s=new Uint8ClampedArray(e.buffer);return{data:new ImageData(s,1,1),premultiplyAlpha:!0}}static makeCacheKey(e){return`ColorTexture,${dt.resolveDefaults(e).color}`}static resolveDefaults(e){return{color:e.color||4294967295}}};u(dt,"z$__type__Props");let Ot=dt;const Wt=class Wt extends Gt{constructor(e,s){super(e);u(this,"props");u(this,"parentTexture");u(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});u(this,"onParentTxFailed",(e,s)=>{this.setState("failed",s)});this.parentTexture=this.txManager.loadTexture(s.texture.txType,s.texture.props,s.texture.options),this.props=Wt.resolveDefaults(s||{}),queueMicrotask(()=>{const t=this.parentTexture;t.state==="loaded"?this.onParentTxLoaded(t,t.dimensions):t.state==="failed"&&this.onParentTxFailed(t,t.error),t.on("loaded",this.onParentTxLoaded),t.on("failed",this.onParentTxFailed)})}async getTextureData(){return{data:this.props}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}};u(Wt,"z$__type__Props");let pt=Wt;class _n extends ms{constructor(o,e){super(o,e)}async onLoadRequest(){var e,s;const o=await this.textureSource.getTextureData();return{width:((e=o.data)==null?void 0:e.width)||0,height:((s=o.data)==null?void 0:s.height)||0}}}class ys extends Je{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(o){const{glw:e}=this;e.activeTexture(0),e.bindTexture(o[0].ctxTexture)}}u(ys,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class gs extends Je{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});u(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:s,glw:t}=this;if(e.length>s.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${s.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach((r,i)=>{t.activeTexture(i),t.bindTexture(r.ctxTexture)});const l=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",l)}}u(gs,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:e=>`
      #define txUnits ${e}
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {
        ${Array.from(Array(e).keys()).map(s=>`
          ${s!==0?"else ":""}if (idx == ${s}) {
            return texture2D(textures[${s}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});const Zt=new Map,kn=(n,o)=>{const e=JSON.stringify(n);if(Zt.has(e))return Zt.get(e);const s=(n??[]).map(t=>({type:t.type,props:o[t.type].resolveDefaults(t.props||{})}));return Zt.set(e,s),s},Ie=class Ie extends Je{constructor(e,s,t){const l=Ie.createShader(s,t);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...l.uniforms],shaderSources:{vertex:l.vertex,fragment:l.fragment}});u(this,"effects",[]);this.effects=l.effects,this.calculateProps=So(this.calculateProps.bind(this))}bindTextures(e){const{glw:s}=this;s.activeTexture(0),s.bindTexture(e[0].ctxTexture)}calculateProps(e){const s=this.renderer.shManager.getRegisteredEffects(),t=[];return e==null||e.forEach((l,r)=>{const i=this.effects[r],f=s[i.name],c=l.props??{},a=i.uniformInfo;Object.keys(c).forEach(d=>{const m=f.uniforms[d],p=a[d];let h=m.validator?m.validator(c[d],c):c[d];Array.isArray(h)&&(h=new Float32Array(h)),t.push({name:p.name,value:h})})}),t}bindProps(e){this.calculateProps(e.effects).forEach(t=>{this.setUniform(t.name,t.value)})}static createShader(e,s){const t={},l={};let r="";const i=[],f=[],c=e.effects.map(h=>{const y=s[h.type],g=y.getEffectKey(h.props||{});t[g]=t[g]?++t[g]:1;const x=t[g];x===1&&f.push({key:g,type:h.type,props:h.props});const _=new y({ref:`${g}${x===1?"":x}`,target:g,props:h.props});return r+=_.declaredUniforms,i.push(...Object.values(_.uniformInfo)),_});let a="";f==null||f.forEach(h=>{const y=s[h.type],g=y.resolveDefaults(h.props??{}),x=[];for(const b in y.methods){let k=b;const L=y.methods[b];l[b]&&l[b]!==L&&(k=Ie.resolveMethodDuplicate(b,L,l)),l[k]=L.replace("function",k),x.push({m:b,cm:k})}let _=y.onShaderMask instanceof Function?y.onShaderMask(g):y.onShaderMask,S=y.onColorize instanceof Function?y.onColorize(g):y.onColorize,I=y.onEffectMask instanceof Function?y.onEffectMask(g):y.onEffectMask;x.forEach(b=>{const{m:k,cm:L}=b,F=new RegExp(`\\$${k}`,"g");_&&(_=_.replace(F,L)),S&&(S=S.replace(F,L)),I&&(I=I.replace(F,L))});const v=y.getMethodParameters(y.uniforms,g),P=v.length>0?`, ${v}`:"";_&&(a+=`
        float fx_${h.key}_onShaderMask(float shaderMask ${P}) {
          ${_}
        }
        `),S&&(a+=`
          vec4 fx_${h.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${P}) {
            ${S}
          }
        `),I&&(a+=`
          vec4 fx_${h.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${P}) {
            ${I}
          }
        `)});let d="";for(const h in l)d+=l[h];let m="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",p=`

    `;for(let h=0;h<c.length;h++){const y=c[h],g=y.passParameters.length>0?`, ${y.passParameters}`:"",x=s[y.name];x.onShaderMask&&(p+=`
        shaderMask = fx_${y.target}_onShaderMask(shaderMask ${g});
        `),x.onColorize&&(p+=`
        maskColor = fx_${y.target}_onColorize(shaderMask, maskColor, shaderColor${g});
        `),x.onEffectMask&&(m=`fx_${y.target}_onEffectMask(shaderMask, maskColor, shaderColor${g})`);const _=c[h+1];(_===void 0||s[_.name].onEffectMask)&&(p+=`
          shaderColor = ${m};
        `)}return{effects:c,uniforms:i,fragment:Ie.fragment(r,d,a,p),vertex:Ie.vertex()}}static resolveMethodDuplicate(e,s,t,l=0){const r=e+(l>0?l:"");return t[r]&&t[r]!==s?this.resolveMethodDuplicate(e,s,t,++l):r}static resolveDefaults(e,s){return{effects:kn(e.effects,s),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,s){var l;let t="";return(l=e.effects)==null||l.forEach(r=>{const f=s[r.type].getEffectKey(r.props||{});t+=`,${f}`}),`DynamicShader${t}`}};u(Ie,"z$__type__Props"),u(Ie,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),u(Ie,"fragment",(e,s,t,l)=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${e}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${s}

    ${t}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${l}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let je=Ie;class io extends Je{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(o){return{radius:o.radius||10,$dimensions:{width:0,height:0}}}bindTextures(o){const{glw:e}=this;e.activeTexture(0),e.bindTexture(o[0].ctxTexture)}bindProps(o){this.setUniform("u_radius",o.radius)}canBatchShaderProps(o,e){return o.radius===e.radius&&o.$dimensions.width===e.$dimensions.width&&o.$dimensions.height===e.$dimensions.height}}u(io,"z$__type__Props"),u(io,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const Rn=new Float32Array([1,0,0,0,1,0,0,0,1]),Yt=class Yt extends Je{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(o){const{glw:e}=this;e.activeTexture(0),e.bindTexture(o[0].ctxTexture)}bindProps(o){const e=Yt.resolveDefaults(o);for(const s in e)if(s==="transform")this.setUniform("u_transform",!1,e[s]);else if(s==="scrollY")this.setUniform("u_scrollY",e[s]);else if(s==="color"){const t=Ce(e.color);this.setUniform("u_color",t)}else s==="size"?this.setUniform("u_size",e[s]):s==="distanceRange"?this.setUniform("u_distanceRange",e[s]):s==="debug"&&this.setUniform("u_debug",e[s]?1:0)}static resolveDefaults(o={}){return{transform:o.transform??Rn,scrollY:o.scrollY??0,color:o.color??4294967295,size:o.size??16,distanceRange:o.distanceRange??1,debug:o.debug??!1}}};u(Yt,"shaderSources",{vertex:`
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;
        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);
        v_texcoord = a_textureCoordinate;
      }
    `,fragment:`
      precision highp float;

      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let ro=Yt;class Ue extends ce{constructor(){super(...arguments);u(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){return{radius:e.radius??10}}}u(Ue,"z$__type__Props"),u(Ue,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let s=e;return Array.isArray(s)?s.length===2?s=[s[0],s[1],s[0],s[1]]:s.length===3?s=[s[0],s[1],s[2],s[0]]:s.length!==4&&(s=[s[0],s[0],s[0],s[0]]):typeof s=="number"&&(s=[s,s,s,s]),s}}}),u(Ue,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),u(Ue,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),u(Ue,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class rt extends ce{constructor(){super(...arguments);u(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}u(rt,"z$__type__Props"),u(rt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ce(e),method:"uniform4fv",type:"vec4"}}),u(rt,"onEffectMask",`
  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),u(rt,"onColorize",`
    return color;
  `);class Xe extends ce{constructor(){super(...arguments);u(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){const s=e.colors??[4278190080,4294967295];let t=e.stops;if(!t){t=[];const l=s.length-1;for(let r=0;r<s.length;r++)t.push(r*(1/l))}return{colors:s,stops:t,angle:e.angle??0}}}u(Xe,"z$__type__Props"),u(Xe,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(t=>Ce(t)).reduce((t,l)=>t.concat(l),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,s)=>{const t=s.colors??[];let l=e;const r=e;if(l.length===0||l&&l.length!==t.length){for(let i=0;i<t.length;i++)l[i]?(r[i]=l[i],l[i-1]===void 0&&r[i-2]!==void 0&&(r[i-1]=r[i-2]+(l[i]-r[i-2])/2)):r[i]=i*(1/(t.length-1));l=r}return r},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),u(Xe,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),u(Xe,"ColorLoop",e=>{let s="";for(let t=2;t<e;t++)s+=`colorOut = mix(colorOut, colors[${t}], clamp((dist - stops[${t-1}]) / (stops[${t}] - stops[${t-1}]), 0.0, 1.0));`;return s}),u(Xe,"onColorize",e=>`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      for(int i = 1; i < ${e.colors.length||1}-1; i++) {
        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);
        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));
      }
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `);class lo extends ce{constructor(){super(...arguments);u(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){return{amount:e.amount??1}}}u(lo,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),u(lo,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class We extends ce{constructor(){super(...arguments);u(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}u(We,"z$__type__Props"),u(We,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ce(e),method:"uniform4fv",type:"vec4"}}),u(We,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),u(We,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),u(We,"onColorize",`
    return color;
  `);class Ye extends ce{constructor(){super(...arguments);u(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}u(Ye,"z$__type__Props"),u(Ye,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ce(e),method:"uniform4fv",type:"vec4"}}),u(Ye,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),u(Ye,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),u(Ye,"onColorize",`
    return color;
  `);class Ge extends ce{constructor(){super(...arguments);u(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}u(Ge,"z$__type__Props"),u(Ge,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ce(e),method:"uniform4fv",type:"vec4"}}),u(Ge,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),u(Ge,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),u(Ge,"onColorize",`
    return color;
  `);class He extends ce{constructor(){super(...arguments);u(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}u(He,"z$__type__Props"),u(He,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ce(e),method:"uniform4fv",type:"vec4"}}),u(He,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),u(He,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),u(He,"onColorize",`
    return color;
  `);class lt extends ce{constructor(){super(...arguments);u(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){return{amplitude:e.amplitude??.2,narrowness:e.narrowness??4,blockiness:e.blockiness??2,minimizer:e.minimizer??8,time:e.time??Date.now()}}}u(lt,"z$__type__Props"),u(lt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),u(lt,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),u(lt,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class Lt extends ce{constructor(){super(...arguments);u(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){return{fade:e.fade??10}}}u(Lt,"z$__type__Props"),u(Lt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let s=e;return Array.isArray(s)?s.length===2?s=[s[0],s[1],s[0],s[1]]:s.length===3?s=[s[0],s[1],s[2],s[0]]:s.length!==4&&(s=[s[0],s[0],s[0],s[0]]):typeof s=="number"&&(s=[s,s,s,s]),s}}}),u(Lt,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);class Bt extends ce{constructor(){super(...arguments);u(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){const s=e.colors??[4278190080,4294967295];let t=e.stops;if(!t){t=[];const l=s.length-1;for(let r=0;r<s.length;r++)t.push(r*(1/l))}return{colors:s,stops:t,width:e.width??0,height:e.height??e.width??0,pivot:e.pivot??[.5,.5]}}}u(Bt,"z$__type__Props"),u(Bt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(t=>Ce(t)).reduce((t,l)=>t.concat(l),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,s)=>{const t=s.colors??[];let l=e;const r=e;if(l.length===0||l&&l.length!==t.length){for(let i=0;i<t.length;i++)l[i]?(r[i]=l[i],l[i-1]===void 0&&r[i-2]!==void 0&&(r[i-1]=r[i-2]+(l[i]-r[i-2])/2)):r[i]=i*(1/(t.length-1));l=r}return r},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),u(Bt,"onColorize",e=>`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      for(int i = 1; i < ${e.colors.length||1}-1; i++) {
        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);
        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));
      }
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `);class Ve extends ce{constructor(){super(...arguments);u(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){return{width:e.width??10,progress:e.progress??.5,offset:e.offset??0,range:e.range??Math.PI*2,rounded:e.rounded??!1,radius:e.radius??1,color:e.color??4294967295}}}u(Ve,"z$__type__Props"),u(Ve,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ce(e),method:"uniform4fv",type:"vec4"}}),u(Ve,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),u(Ve,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),u(Ve,"onColorize",`
    return color;
  `);class En{constructor(){u(this,"shCache",new Map);u(this,"shConstructors",{});u(this,"attachedShader",null);u(this,"effectConstructors",{});u(this,"renderer");this.registerShaderType("DefaultShader",ys),this.registerShaderType("DefaultShaderBatched",gs),this.registerShaderType("RoundedRectangle",io),this.registerShaderType("DynamicShader",je),this.registerShaderType("SdfShader",ro),this.registerEffectType("border",rt),this.registerEffectType("borderBottom",Ge),this.registerEffectType("borderLeft",He),this.registerEffectType("borderRight",We),this.registerEffectType("borderTop",Ye),this.registerEffectType("fadeOut",Lt),this.registerEffectType("linearGradient",Xe),this.registerEffectType("radialGradient",Bt),this.registerEffectType("grayscale",lo),this.registerEffectType("glitch",lt),this.registerEffectType("radius",Ue),this.registerEffectType("radialProgress",Ve)}registerShaderType(o,e){this.shConstructors[o]=e}registerEffectType(o,e){this.effectConstructors[o]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(o,e){if(!this.renderer)throw new Error("Renderer is not been defined");const s=this.shConstructors[o];if(!s)throw new Error(`Shader type "${o}" is not registered`);if(o==="DynamicShader")return this.loadDynamicShader(e);const t=s.resolveDefaults(e),l=s.makeCacheKey(t)||s.name;if(l&&this.shCache.has(l))return{shader:this.shCache.get(l),props:t};const r=new s(this.renderer,e);return l&&this.shCache.set(l,r),{shader:r,props:t}}loadDynamicShader(o){if(!this.renderer)throw new Error("Renderer is not been defined");const e=je.resolveDefaults(o,this.effectConstructors),s=je.makeCacheKey(e,this.effectConstructors);if(s&&this.shCache.has(s))return{shader:this.shCache.get(s),props:e};const t=new je(this.renderer,o,this.effectConstructors);return s&&this.shCache.set(s,t),{shader:t,props:e}}useShader(o){this.attachedShader!==o&&(this.attachedShader&&this.attachedShader.detach(),o.attach(),this.attachedShader=o)}}class xs{constructor(o){u(this,"config");this.config=o}getBuffer(o){var e;return(e=this.config.find(s=>s.attributes[o]))==null?void 0:e.buffer}getAttributeInfo(o){var e;return(e=this.config.find(s=>s.attributes[o]))==null?void 0:e.attributes[o]}}class An{constructor(){u(this,"data",{})}reset(){this.data={}}increment(o){this.data[o]||(this.data[o]=0),this.data[o]++}getData(){return{...this.data}}}class Mn{constructor(o){u(this,"gl");u(this,"activeTextureUnit",0);u(this,"texture2dUnits");u(this,"texture2dParams",new WeakMap);u(this,"scissorEnabled");u(this,"scissorX");u(this,"scissorY");u(this,"scissorWidth");u(this,"scissorHeight");u(this,"blendEnabled");u(this,"blendSrcRgb");u(this,"blendDstRgb");u(this,"blendSrcAlpha");u(this,"blendDstAlpha");u(this,"boundArrayBuffer");u(this,"boundElementArrayBuffer");u(this,"curProgram");u(this,"programUniforms",new WeakMap);u(this,"canvas");u(this,"MAX_RENDERBUFFER_SIZE");u(this,"MAX_TEXTURE_SIZE");u(this,"MAX_VIEWPORT_DIMS");u(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");u(this,"MAX_TEXTURE_IMAGE_UNITS");u(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");u(this,"MAX_VERTEX_ATTRIBS");u(this,"MAX_VARYING_VECTORS");u(this,"MAX_VERTEX_UNIFORM_VECTORS");u(this,"MAX_FRAGMENT_UNIFORM_VECTORS");u(this,"TEXTURE_MAG_FILTER");u(this,"TEXTURE_MIN_FILTER");u(this,"TEXTURE_WRAP_S");u(this,"TEXTURE_WRAP_T");u(this,"LINEAR");u(this,"CLAMP_TO_EDGE");u(this,"RGBA");u(this,"UNSIGNED_BYTE");u(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");u(this,"FLOAT");u(this,"TRIANGLES");u(this,"UNSIGNED_SHORT");u(this,"ONE");u(this,"ONE_MINUS_SRC_ALPHA");u(this,"VERTEX_SHADER");u(this,"FRAGMENT_SHADER");u(this,"STATIC_DRAW");u(this,"COMPILE_STATUS");u(this,"LINK_STATUS");u(this,"DYNAMIC_DRAW");this.gl=o,this.activeTextureUnit=o.getParameter(o.ACTIVE_TEXTURE)-o.TEXTURE0;const e=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(e).fill(void 0).map((t,l)=>(this.activeTexture(l),o.getParameter(o.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=o.isEnabled(o.SCISSOR_TEST);const s=o.getParameter(o.SCISSOR_BOX);this.scissorX=s[0],this.scissorY=s[1],this.scissorWidth=s[2],this.scissorHeight=s[3],this.blendEnabled=o.isEnabled(o.BLEND),this.blendSrcRgb=o.getParameter(o.BLEND_SRC_RGB),this.blendDstRgb=o.getParameter(o.BLEND_DST_RGB),this.blendSrcAlpha=o.getParameter(o.BLEND_SRC_ALPHA),this.blendDstAlpha=o.getParameter(o.BLEND_DST_ALPHA),this.boundArrayBuffer=o.getParameter(o.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=o.getParameter(o.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=o.getParameter(o.CURRENT_PROGRAM),this.canvas=o.canvas,this.MAX_RENDERBUFFER_SIZE=o.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=o.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=o.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=o.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=o.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=o.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=o.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=o.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=o.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=o.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=o.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=o.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=o.TEXTURE_WRAP_T,this.LINEAR=o.LINEAR,this.CLAMP_TO_EDGE=o.CLAMP_TO_EDGE,this.RGBA=o.RGBA,this.UNSIGNED_BYTE=o.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.FLOAT=o.FLOAT,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.ONE=o.ONE,this.ONE_MINUS_SRC_ALPHA=o.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.VERTEX_SHADER=o.VERTEX_SHADER,this.FRAGMENT_SHADER=o.FRAGMENT_SHADER,this.STATIC_DRAW=o.STATIC_DRAW,this.COMPILE_STATUS=o.COMPILE_STATUS,this.LINK_STATUS=o.LINK_STATUS,this.DYNAMIC_DRAW=o.DYNAMIC_DRAW}isWebGl2(){return ln(this.gl)}activeTexture(o){const{gl:e}=this;this.activeTextureUnit!==o&&(e.activeTexture(o+e.TEXTURE0),this.activeTextureUnit=o)}bindTexture(o){const{gl:e,activeTextureUnit:s,texture2dUnits:t}=this;t[s]!==o&&(t[s]=o,e.bindTexture(this.gl.TEXTURE_2D,o))}_getActiveTexture(){const{activeTextureUnit:o,texture2dUnits:e}=this;return e[o]}texParameteri(o,e){const{gl:s,texture2dParams:t}=this,l=this._getActiveTexture();if(!l)throw new Error("No active texture");let r=t.get(l);r||(r={},t.set(l,r)),r[o]!==e&&(r[o]=e,s.texParameteri(s.TEXTURE_2D,o,e))}texImage2D(o,e,s,t,l,r,i,f){const{gl:c}=this;r?c.texImage2D(c.TEXTURE_2D,o,e,s,t,l,r,i,f):c.texImage2D(c.TEXTURE_2D,o,e,s,t,l)}compressedTexImage2D(o,e,s,t,l,r){const{gl:i}=this;i.compressedTexImage2D(i.TEXTURE_2D,o,e,s,t,l,r)}pixelStorei(o,e){const{gl:s}=this;s.pixelStorei(o,e)}generateMipmap(){const{gl:o}=this;o.generateMipmap(o.TEXTURE_2D)}createTexture(){const{gl:o}=this;return o.createTexture()}deleteTexture(o){const{gl:e}=this;o&&this.texture2dParams.delete(o),e.deleteTexture(o)}viewport(o,e,s,t){const{gl:l}=this;l.viewport(o,e,s,t)}clearColor(o,e,s,t){const{gl:l}=this;l.clearColor(o,e,s,t)}setScissorTest(o){const{gl:e,scissorEnabled:s}=this;o!==s&&(o?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),this.scissorEnabled=o)}scissor(o,e,s,t){const{gl:l,scissorX:r,scissorY:i,scissorWidth:f,scissorHeight:c}=this;(o!==r||e!==i||s!==f||t!==c)&&(l.scissor(o,e,s,t),this.scissorX=o,this.scissorY=e,this.scissorWidth=s,this.scissorHeight=t)}setBlend(o){const{gl:e,blendEnabled:s}=this;o!==s&&(o?e.enable(e.BLEND):e.disable(e.BLEND),this.blendEnabled=o)}blendFunc(o,e){const{gl:s,blendSrcRgb:t,blendDstRgb:l,blendSrcAlpha:r,blendDstAlpha:i}=this;(o!==t||e!==l||o!==r||e!==i)&&(s.blendFunc(o,e),this.blendSrcRgb=o,this.blendDstRgb=e,this.blendSrcAlpha=o,this.blendDstAlpha=e)}createBuffer(){const{gl:o}=this;return o.createBuffer()}clear(){const{gl:o}=this;o.clear(o.COLOR_BUFFER_BIT)}arrayBufferData(o,e,s){const{gl:t,boundArrayBuffer:l}=this;l!==o&&(t.bindBuffer(t.ARRAY_BUFFER,o),this.boundArrayBuffer=o),t.bufferData(t.ARRAY_BUFFER,e,s)}elementArrayBufferData(o,e,s){const{gl:t,boundElementArrayBuffer:l}=this;l!==o&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),this.boundElementArrayBuffer=o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,s)}vertexAttribPointer(o,e,s,t,l,r,i){const{gl:f,boundArrayBuffer:c}=this;c!==o&&(f.bindBuffer(f.ARRAY_BUFFER,o),this.boundArrayBuffer=o),f.vertexAttribPointer(e,s,t,l,r,i)}useProgram(o){const{gl:e,curProgram:s}=this;s!==o&&(e.useProgram(o),this.curProgram=o)}setUniform(o,e,...s){const{gl:t,programUniforms:l}=this;let r=l.get(this.curProgram);r||(r=new Map,l.set(this.curProgram,r));const i=r.get(e);(!i||!Ln(i,s))&&(r.set(e,s),t[o](e,...s))}getParameter(o){const{gl:e}=this;return e.getParameter(o)}drawElements(o,e,s,t){const{gl:l}=this;l.drawElements(o,e,s,t)}getExtension(o){const{gl:e}=this;return e.getExtension(o)}createVertexArray(){const{gl:o}=this;return o.createVertexArray()}bindVertexArray(o){const{gl:e}=this;e.bindVertexArray(o)}getAttribLocation(o,e){const{gl:s}=this;return s.getAttribLocation(o,e)}getUniformLocation(o,e){const{gl:s}=this;return s.getUniformLocation(o,e)}enableVertexAttribArray(o){const{gl:e}=this;e.enableVertexAttribArray(o)}disableVertexAttribArray(o){const{gl:e}=this;e.disableVertexAttribArray(o)}createShader(o){const{gl:e}=this;return e.createShader(o)}compileShader(o){const{gl:e}=this;e.compileShader(o)}attachShader(o,e){const{gl:s}=this;s.attachShader(o,e)}linkProgram(o){const{gl:e}=this;e.linkProgram(o)}deleteProgram(o){const{gl:e}=this;e.deleteProgram(o)}getShaderParameter(o,e){const{gl:s}=this;return s.getShaderParameter(o,e)}getShaderInfoLog(o){const{gl:e}=this;return e.getShaderInfoLog(o)}createProgram(){const{gl:o}=this;return o.createProgram()}getProgramParameter(o,e){const{gl:s}=this;return s.getProgramParameter(o,e)}getProgramInfoLog(o){const{gl:e}=this;return e.getProgramInfoLog(o)}shaderSource(o,e){const{gl:s}=this;s.shaderSource(o,e)}deleteShader(o){const{gl:e}=this;e.deleteShader(o)}}function Ln(n,o){return n.length!==o.length?!1:n.every((e,s)=>Array.isArray(e)||e instanceof Float32Array?!1:e===o[s])}const Bn=24;class Pn extends bn{constructor(e){super(e.stage);u(this,"glw");u(this,"system");u(this,"txManager");u(this,"shManager");u(this,"options");u(this,"quadBuffer",new ArrayBuffer(1024*1024*4));u(this,"fQuadBuffer",new Float32Array(this.quadBuffer));u(this,"uiQuadBuffer",new Uint32Array(this.quadBuffer));u(this,"renderOps",[]);u(this,"curBufferIdx",0);u(this,"curRenderOp",null);u(this,"renderables",[]);u(this,"defaultShader");u(this,"quadBufferCollection");u(this,"defaultTexture");const{canvas:s,clearColor:t,bufferMemory:l}=e;this.options=e,this.txManager=e.txManager,this.shManager=e.shManager,this.defaultTexture=new Ot(this.txManager),this.defaultTexture.once("loaded",()=>{this.stage.requestRender()});const r=Qs(s,e.contextSpy),i=this.glw=new Mn(r),f=Ce(t);i.viewport(0,0,s.width,s.height),i.clearColor(f[0],f[1],f[2],f[3]),i.setBlend(!0),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),Cn(i,l),this.system={parameters:wn(this.glw),extensions:Tn(this.glw)},this.shManager.renderer=this,this.defaultShader=this.shManager.loadShader("DefaultShader").shader;const c=i.createBuffer(),a=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new xs([{buffer:c,attributes:{a_position:{name:"a_position",size:2,type:i.FLOAT,normalized:!1,stride:a,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:i.FLOAT,normalized:!1,stride:a,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:i.UNSIGNED_BYTE,normalized:!0,stride:a,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:i.FLOAT,normalized:!1,stride:a,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:e}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof pt?new _n(this.glw,e):new ms(this.glw,e)}addQuad(e){const{fQuadBuffer:s,uiQuadBuffer:t}=this,{width:l,height:r,colorTl:i,colorTr:f,colorBl:c,colorBr:a,textureOptions:d,shader:m,shaderProps:p,alpha:h,clippingRect:y,tx:g,ty:x,ta:_,tb:S,tc:I,td:v}=e;let{texture:P}=e;if(p&&no(p,"$dimensions")){const M=p.$dimensions;M.width=l,M.height=r}P=P??this.defaultTexture;let{curBufferIdx:b,curRenderOp:k}=this;const L={width:l,height:r},F=m||this.defaultShader;k&&(k.shader!==F||!un(k.clippingRect,y)||k.shader!==this.defaultShader&&(!p||!k.shader.canBatchShaderProps(k.shaderProps,p)))&&(k=null),k||(this.newRenderOp(F,p,h,L,y,b),k=this.curRenderOp);const R=(d==null?void 0:d.flipX)??!1,N=(d==null?void 0:d.flipY)??!1;let O=0,$=0,B=1,T=1;if(P instanceof pt){const{x:M,y:E,width:Y,height:D}=P.props,{width:q=0,height:U=0}=P.parentTexture.dimensions||{width:0,height:0};O=M/q,B=O+Y/q,$=E/U,T=$+D/U,P=P.parentTexture}R&&([O,B]=[B,O]),N&&([$,T]=[T,$]);const{txManager:w}=this.stage,A=w.getCtxTexture(P),z=this.addTexture(A,b);if(k=this.curRenderOp,S!==0||I!==0)s[b++]=g,s[b++]=x,s[b++]=O,s[b++]=$,t[b++]=i,s[b++]=z,s[b++]=g+l*_,s[b++]=x+l*I,s[b++]=B,s[b++]=$,t[b++]=f,s[b++]=z,s[b++]=g+r*S,s[b++]=x+r*v,s[b++]=O,s[b++]=T,t[b++]=c,s[b++]=z,s[b++]=g+l*_+r*S,s[b++]=x+l*I+r*v,s[b++]=B,s[b++]=T,t[b++]=a,s[b++]=z;else{const M=g+l*_,E=x+r*v;s[b++]=g,s[b++]=x,s[b++]=O,s[b++]=$,t[b++]=i,s[b++]=z,s[b++]=M,s[b++]=x,s[b++]=B,s[b++]=$,t[b++]=f,s[b++]=z,s[b++]=g,s[b++]=E,s[b++]=O,s[b++]=T,t[b++]=c,s[b++]=z,s[b++]=M,s[b++]=E,s[b++]=B,s[b++]=T,t[b++]=a,s[b++]=z}k.length+=Bn,k.numQuads++,this.curBufferIdx=b}newRenderOp(e,s,t,l,r,i){const f=new ps(this.glw,this.options,this.quadBufferCollection,e,s,t,r,l,i,0);this.curRenderOp=f,this.renderOps.push(f)}addTexture(e,s,t){const{curRenderOp:l}=this,r=l.addTexture(e);if(r===4294967295){if(t)throw new Error("Unable to add texture to render op");const{shader:i,shaderProps:f,dimensions:c,clippingRect:a,alpha:d}=l;return this.newRenderOp(i,f,d,c,a,s),this.addTexture(e,s,!0)}return r}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){const{glw:s,quadBuffer:t}=this,l=new Float32Array(t,0,this.curBufferIdx),r=this.quadBufferCollection.getBuffer("a_position")??null;s.arrayBufferData(r,l,s.STATIC_DRAW),this.renderOps.forEach((i,f)=>{i.draw()}),this.renderables=[]}}function Nn(n){return/\.(ktx|pvr)$/.test(n)}const Fn=async n=>{const e=await(await fetch(n)).arrayBuffer();return n.indexOf(".ktx")!==-1?zn(e):On(e)},zn=async n=>{const o=new DataView(n),e=o.getUint32(12)===16909060,s=[],t={glInternalFormat:o.getUint32(28,e),pixelWidth:o.getUint32(36,e),pixelHeight:o.getUint32(40,e),numberOfMipmapLevels:o.getUint32(56,e),bytesOfKeyValueData:o.getUint32(60,e)};let l=64;l+=t.bytesOfKeyValueData;for(let r=0;r<t.numberOfMipmapLevels;r++){const i=o.getUint32(l);l+=4,s.push(o.buffer.slice(l,i)),l+=i}return{data:{glInternalFormat:t.glInternalFormat,mipmaps:s,width:t.pixelWidth||0,height:t.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},On=async n=>{const i=n,f=new Int32Array(i,0,13),c=f[12]+52,a=new Uint8Array(i,c),d=[],m={pixelWidth:f[7],pixelHeight:f[6],numberOfMipmapLevels:f[11]||0};let p=0,h=m.pixelWidth||0,y=m.pixelHeight||0;for(let g=0;g<m.numberOfMipmapLevels;g++){const x=(h+3>>2)*(y+3>>2)*8,_=new Uint8Array(i,a.byteOffset+p,x);d.push(_),p+=x,h=h>>1,y=y>>1}return{data:{glInternalFormat:36196,mipmaps:d,width:m.pixelWidth||0,height:m.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}},ut=class ut extends Gt{constructor(e,s){super(e);u(this,"props");this.props=ut.resolveDefaults(s)}hasAlphaChannel(e){return e.indexOf("image/png")!==-1}async getTextureData(){const{src:e,premultiplyAlpha:s}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:s};if(Nn(e))return Fn(e);if(this.txManager.imageWorkerManager)return await this.txManager.imageWorkerManager.getImage(e,s);if(this.txManager.hasCreateImageBitmap){const l=await(await fetch(e)).blob(),r=s??this.hasAlphaChannel(l.type);return{data:await createImageBitmap(l,{premultiplyAlpha:r?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:r}}else{const t=new Image;return t.src=e,await new Promise((l,r)=>{t.onload=()=>l(),t.onerror=()=>r(new Error("Failed to load image"))}).catch(l=>{console.error(l)}),{data:t,premultiplyAlpha:s??!0}}}static makeCacheKey(e){const s=ut.resolveDefaults(e);return s.src instanceof ImageData?!1:`ImageTexture,${s.src},${s.premultiplyAlpha}`}static resolveDefaults(e){return{src:e.src??"",premultiplyAlpha:e.premultiplyAlpha??!0}}};u(ut,"z$__type__Props");let fo=ut;const $n={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class Dn{}class Un extends Dn{constructor(e,s){super();u(this,"data");u(this,"glyphMap");u(this,"kernings");this.data=e,this.glyphMap=s;const t=this.kernings={};e.kernings.forEach(l=>{const r=l.second,i=t[r]=t[r]||{};i[l.first]=l.amount}),this.kernings=t}*shapeText(e,s){var r;let t,l;for(;(t=s.peek())&&!t.done;){const i=t.value,f=this.glyphMap.get(i);if(s.next(),f!==void 0){const c=l!==void 0?(((r=this.kernings[f.id])==null?void 0:r[l])||0)+e.letterSpacing:0;l=f.id,yield{mapped:!0,glyphId:f.id,codepoint:i,cluster:s.lastIndex,xAdvance:f.xadvance+c,yAdvance:0,xOffset:f.xoffset+c,yOffset:f.yoffset,xBearing:0,yBearing:0,width:f.width,height:f.height}}else i===$n.LINE_FEED&&(l=void 0),yield{mapped:!1,codepoint:i,cluster:s.lastIndex}}}}class bs extends us{constructor(e,s,t,l,r,i){super(e,s);u(this,"type");u(this,"texture");u(this,"maxCharHeight",0);u(this,"data");u(this,"shaper");u(this,"glyphMap",new Map);this.type=t,l.renderer,this.texture=l.txManager.loadTexture("ImageTexture",{src:r,premultiplyAlpha:!1},{preload:!0}),this.texture.on("loaded",()=>{this.checkLoaded()}),fetch(i).then(async f=>{this.data=await f.json();let c=0;this.data.chars.forEach(a=>{this.glyphMap.set(a.id,a);const d=a.yoffset+a.height;d>c&&(c=d)}),this.maxCharHeight=c,this.shaper=new Un(this.data,this.glyphMap),this.checkLoaded()}).catch(console.error)}getAtlasEntry(e){const s=this.glyphMap.get(e);if(s===void 0)throw new Error(`Glyph ${e} not found in font ${this.fontFamily}`);return{x:s.x,y:s.y,width:s.width,height:s.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const Xn=24;function Wn(n,o,e,s,t,l,r,i,f){const c=Math.min(Math.max(r.firstLineIdx,0),i.length),a=0;let d=0;s==="middle"?d=(o-n)/2:s==="bottom"&&(d=o-n);const p=t/l+c*o+d;if(!(f&&p>=f/l))return{sdfX:a,sdfY:p,lineIndex:c}}class ft{constructor(o,e=0){u(this,"iterator");u(this,"peekBuffer",[]);u(this,"_lastIndex");this.iterator=o,this.iterator=o,this._lastIndex=e-1,this.peekBuffer=[]}next(){const o=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return o.done?this._lastIndex=-1:this._lastIndex++,o}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const o=this.iterator.next();return this.peekBuffer.push(o),o}get lastIndex(){return this._lastIndex}}function*at(n,o=0){let e=o;for(;e<n.length;){const s=n.codePointAt(e);if(s===void 0)throw new Error("Invalid Unicode code point");yield s,e+=s<=65535?1:2}}function Yn(n,o,e){const s=e.shapeText(o,new ft(at(n,0),0));let t=0;for(const l of s)l.mapped&&(t+=l.xAdvance);return t}function Gn(n,o,e,s,t,l,r,i,f,c,a,d,m,p,h,y,g,x,_){h.loaded,h.data,h.shaper;const S=i/h.data.info.size,I=f/S,v=l/S,P=c/S,b=m[n],k=(b==null?void 0:b.codepointIndex)||0,L=(b==null?void 0:b.maxX)||0,F=(b==null?void 0:b.maxY)||0;let R=L,N=F,O=o,$=e,B=0;const T={codepointIndex:-1,bufferOffset:-1,xStart:-1},w=h.shaper,A={letterSpacing:P};let z=w.shapeText(A,new ft(at(s,k),k)),M,E=-1;const Y=[],D=r/S,q=Yn(x,A,w);let U=!0;for(;U;){const j=(_===0||n+1<_)&&(d!=="both"||g||$+I+h.maxCharHeight<=D),Z=j?v:v-q;let V=0;const Q=$+I>=p.y1,oe=$<=p.y2,ee=Q&&oe;for(;(M=z.next())&&!M.done;){const K=M.value;if(n===m.length)m.push({codepointIndex:K.cluster,maxY:N,maxX:R});else if(n>m.length)throw new Error("Unexpected lineCache length");if(K.codepoint===32||K.codepoint===10?T.codepointIndex!==-1&&(T.codepointIndex=-1,V=O):T.codepointIndex===-1&&(T.codepointIndex=K.cluster,T.bufferOffset=B,T.xStart=V),K.mapped){const de=O+K.xOffset+K.width;if(d!=="none"&&de>=Z&&T.codepointIndex!==-1&&T.codepointIndex<K.cluster&&T.xStart>0)if(j){z=w.shapeText(A,new ft(at(s,T.codepointIndex),T.codepointIndex)),B=T.bufferOffset;break}else z=w.shapeText(A,new ft(at(x,0),0)),O=T.xStart,B=T.bufferOffset;else{const le=O+K.xOffset,fe=$+K.yOffset;if(ee){E===-1&&(E=B);const ue=h.getAtlasEntry(K.glyphId),W=ue.x/h.data.common.scaleW,ke=ue.y/h.data.common.scaleH,ve=ue.width/h.data.common.scaleW,Te=ue.height/h.data.common.scaleH;a[B++]=le,a[B++]=fe,a[B++]=W,a[B++]=ke,a[B++]=le+K.width,a[B++]=fe,a[B++]=W+ve,a[B++]=ke,a[B++]=le,a[B++]=fe+K.height,a[B++]=W,a[B++]=ke+Te,a[B++]=le+K.width,a[B++]=fe+K.height,a[B++]=W+ve,a[B++]=ke+Te}N=Math.max(N,fe+K.height),O+=K.xAdvance,R=Math.max(R,O)}}else if(K.codepoint===10){if(j)break;z=w.shapeText(A,new ft(at(x,0),0)),d="none"}}E!==-1&&(Y.push({bufferStart:E,bufferEnd:B}),E=-1),O=0,$+=I,n++,T.codepointIndex=-1,V=0,!y&&d==="both"&&$>p.y2||M&&M.done?U=!1:j||(U=!1)}if(t==="center"){const j=d==="none"?R:v;for(let Z=0;Z<Y.length;Z++){const V=Y[Z],Q=a[V.bufferEnd-4]-a[V.bufferStart],oe=(j-Q)/2;for(let ee=V.bufferStart;ee<V.bufferEnd;ee+=4)a[ee]+=oe}}else if(t==="right"){const j=d==="none"?R:v;for(let Z=0;Z<Y.length;Z++){const V=Y[Z],Q=V.bufferEnd===V.bufferStart?0:a[V.bufferEnd-4]-a[V.bufferStart],oe=j-Q;for(let ee=V.bufferStart;ee<V.bufferEnd;ee+=4)a[ee]+=oe}}return{bufferNumFloats:B,bufferNumQuads:B/16,layoutNumCharacters:M.done?s.length-k:M.value.cluster-k+1,fullyProcessed:!!M.done,maxX:R,maxY:N}}function Hn(n,o){return Math.ceil(n/o)*o}function Vn(n,o){return Math.floor(n/o)*o}function qn(n,o,e,s,t,l,r,i){const{screen:f,sdf:c}=n;if(!hn(r))f.x1=0,f.y1=0,f.x2=0,f.y2=0,c.x1=0,c.y1=0,c.x2=0,c.y2=0,n.numLines=0,n.firstLineIdx=0;else{const a=r.x1-o,d=a+(r.x2-r.x1),m=r.y1-e+s,p=Vn(m-l,t||1),h=Hn(m+(r.y2-r.y1)+l,t||1);f.x1=a,f.y1=p,f.x2=d,f.y2=h,c.x1=a/i,c.y1=p/i,c.x2=d/i,c.y2=h/i,n.numLines=Math.ceil((h-p)/t),n.firstLineIdx=t?Math.floor(p/t):0}n.valid=!0}const jn={normal:400,bold:700,bolder:900,lighter:100},Do=n=>typeof n=="number"?n:jn[n]||400;function Kn(n,o,e,s,t){let l=Do(e);for(const r of n){const i=r[o];if(!i)continue;if(i.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${o}' - will be used for all weights and styles`),i.values().next().value;const f=new Map;for(const a of i){const d=Do(a.descriptors.weight);if(d===l&&a.descriptors.style===s&&a.descriptors.stretch===t)return a;f.set(d,a)}const c=`TrFontManager: No exact match: '${o} Weight: ${l} Style: ${s} Stretch: ${t}'`;if(console.error(c),l===400&&f.has(500))return f.get(500);if(l===500&&f.has(400))return f.get(400);if(l<400){for(;l>0;){if(f.has(l))return f.get(l);l-=100}l=600}for(;l<1e3;){if(f.has(l))return f.get(l);l+=100}for(l=500;l>0;){if(f.has(l))return f.get(l);l-=100}}}const Zn=So(Kn);class Ss{constructor(o){u(this,"textRenderers");this.textRenderers=o}addFontFace(o){for(const e in this.textRenderers){const s=this.textRenderers[e];s&&s.isFontFaceSupported(o)&&s.addFontFace(o)}}static resolveFontFace(o,e){const{fontFamily:s,fontWeight:t,fontStyle:l,fontStretch:r}=e;return Zn(o,s,t,l,r)}}const Qn={x:0,y:0,width:0,height:0};class Jn extends cs{constructor(e){super(e);u(this,"ssdfFontFamilies",{});u(this,"msdfFontFamilies",{});u(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);u(this,"sdfShader");u(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,s)=>{e.props.fontFamily=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,s)=>{e.props.fontWeight=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,s)=>{e.props.fontStyle=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,s)=>{e.props.fontStretch=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontSize:(e,s)=>{e.props.fontSize=s,this.invalidateLayoutCache(e)},text:(e,s)=>{e.props.text=s,this.invalidateLayoutCache(e)},textAlign:(e,s)=>{e.props.textAlign=s,this.invalidateLayoutCache(e)},color:(e,s)=>{e.props.color=s},x:(e,s)=>{e.props.x=s,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&Kt(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,s)=>{e.props.y=s,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&Kt(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,s)=>{e.props.contain=s,this.invalidateLayoutCache(e)},width:(e,s)=>{e.props.width=s,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,s)=>{e.props.height=s,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,s)=>{e.props.offsetY=s,this.invalidateLayoutCache(e)},scrollable:(e,s)=>{e.props.scrollable=s,this.invalidateLayoutCache(e)},scrollY:(e,s)=>{e.props.scrollY=s,this.scheduleUpdateState(e)},letterSpacing:(e,s)=>{e.props.letterSpacing=s,this.invalidateLayoutCache(e)},lineHeight:(e,s)=>{e.props.lineHeight=s,this.invalidateLayoutCache(e)},maxLines:(e,s)=>{e.props.maxLines=s,this.invalidateLayoutCache(e)},textBaseline:(e,s)=>{e.props.textBaseline=s,this.invalidateLayoutCache(e)},verticalAlign:(e,s)=>{e.props.verticalAlign=s,this.invalidateLayoutCache(e)},overflowSuffix:(e,s)=>{e.props.overflowSuffix=s,this.invalidateLayoutCache(e)},debug:(e,s)=>{e.props.debug=s}}}canRenderFont(e){const{fontFamily:s}=e;return s in this.ssdfFontFamilies||s in this.msdfFontFamilies||s==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof bs}addFontFace(e){const s=e.fontFamily,t=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!t){console.warn(`Invalid font face type: ${e.type}`);return}let l=t[s];l||(l=new Set,t[s]=l),l.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new _e,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:s}=e;const{textH:t,lineCache:l,debugData:r,forceFullLayoutCalc:i}=e;if(r.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!s&&(s=this.resolveFontFace(e.props),e.trFontFace=s,!s)){const w=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;console.error(w),this.setStatus(e,"failed",new Error(w));return}if(!s.loaded){s.once("loaded",()=>{this.scheduleUpdateState(e)});return}s.data;const{text:f,fontSize:c,x:a,y:d,contain:m,width:p,height:h,lineHeight:y,verticalAlign:g,scrollable:x,overflowSuffix:_,maxLines:S}=e.props,I=m==="both"&&x?e.props.scrollY:0,{renderWindow:v}=e,P=s.data.info.size,b=c/P,k=y/b;e.distanceRange=b*s.data.distanceField.distanceRange;const L=f.length*Xn;let F=e.vertexBuffer;(!F||F.length<L)&&(F=new Float32Array(L*2));const R=e.elementBounds;if(R.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),R.valid=!0),!i&&v.valid){const w=v.screen;if(a+w.x1<=R.x1&&a+w.x2>=R.x2&&d-I+w.y1<=R.y1&&d-I+w.y2>=R.y2){this.setStatus(e,"loaded");return}v.valid=!1,this.setStatus(e,"loading")}const{offsetY:N,textAlign:O}=e.props;if(!v.valid){if(!Kt(R,this.rendererBounds))return;qn(v,a,d,I,y,m==="both"?R.y2-R.y1:0,R,b)}const $=Wn(P,k,y,g,N,b,v,l,t);if(!$){this.setStatus(e,"loaded");return}const{letterSpacing:B}=e.props,T=Gn($.lineIndex,$.sdfX,$.sdfY,f,O,p,h,c,y,B,F,m,l,v.sdf,s,i,x,_,S);e.bufferUploaded=!1,e.bufferNumFloats=T.bufferNumFloats,e.bufferNumQuads=T.bufferNumQuads,e.vertexBuffer=F,e.renderWindow=v,r.lastLayoutNumCharacters=T.layoutNumCharacters,r.bufferSize=F.byteLength,T.fullyProcessed&&(e.textW=T.maxX*b,e.textH=T.maxY*b),this.setStatus(e,"loaded")}renderQuads(e,s,t,l){var L,F;if(!e.vertexBuffer)return;const{renderer:r}=this.stage,{fontSize:i,color:f,contain:c,scrollable:a,zIndex:d,debug:m}=e.props,p=c==="both"&&a?e.props.scrollY:0,{textW:h=0,textH:y=0,distanceRange:g,vertexBuffer:x,bufferUploaded:_,trFontFace:S,elementBounds:I}=e;let{webGlBuffers:v}=e;if(!v){const R=r.glw,N=4*Float32Array.BYTES_PER_ELEMENT,O=R.createBuffer();e.webGlBuffers=new xs([{buffer:O,attributes:{a_position:{name:"a_position",size:2,type:R.FLOAT,normalized:!1,stride:N,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:R.FLOAT,normalized:!1,stride:N,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,e.webGlBuffers,v=e.webGlBuffers}if(!_){const R=r.glw,N=(v==null?void 0:v.getBuffer("a_textureCoordinate"))??null;R.arrayBufferData(N,x,R.STATIC_DRAW),e.bufferUploaded=!0}if(a&&c==="both"){I.valid;const R=dn(I,Qn);t.valid?(e.clippingRect.valid=!0,t=bo(t,R,e.clippingRect)):(e.clippingRect.valid=!0,t=ds(R,e.clippingRect))}const P=new ps(r.glw,r.options,v,this.sdfShader,{transform:s.data,color:Js(f,l),size:i/(((L=S.data)==null?void 0:L.info.size)||0),scrollY:p,distanceRange:g,debug:m.sdfShaderDebug},l,t,{height:y,width:h},0,d),b=(F=e.trFontFace)==null?void 0:F.texture,k=this.stage.txManager.getCtxTexture(b);P.addTexture(k),P.length=e.bufferNumFloats,P.numQuads=e.bufferNumQuads,r.addRenderOp(P)}resolveFontFace(e){return Ss.resolveFontFace(this.fontFamilyArray,e)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:s,contain:t,width:l}=e.props,{elementBounds:r}=e;r.x1=s,r.x2=t!=="none"?s+l:1/0}setElementBoundsY(e){const{y:s,contain:t,height:l}=e.props,{elementBounds:r}=e;r.y1=s,r.y2=t==="both"?s+l:1/0}}class ei{}function ti(n){return n.prototype instanceof ei}async function oi(n,o){let e;try{console.log("Loading core extension",n),e=await as(()=>import(n),[])}catch(t){console.error(`The core extension module at '${n}' could not be loaded.`),console.error(t);return}if(!e.default){console.error(`The core extension module at '${n}' does not have a default export.`);return}const s=e.default;if(ti(s)){const t=new s;try{await t.run(o)}catch(l){console.error(`The core extension at '${n}' threw an error.`),console.error(l)}}else console.error(`The core extension at '${n}' does not extend CoreExtension.`)}function ws(n){const o={boolean:!0,string:!0,number:!0},e=Object.keys(n);for(let s=0;s<e.length;s++){const t=e[s];if(!t)continue;const l=n[t],r=typeof l;r==="string"&&l.length>2048&&(console.warn(`Custom Data value for ${t} is too long, it will be truncated to 2048 characters`),n[t]=l.substring(0,2048)),o[r]||(console.warn(`Custom Data value for ${t} is not a boolean, string, or number, it will be ignored`),delete n[t])}return n}class si extends _e{constructor(e,s,t){super();u(this,"root",null);u(this,"driver");u(this,"canvas");u(this,"settings");u(this,"inspector",null);u(this,"nodes",new Map);u(this,"nextTextureId",1);u(this,"textureTracker");const l={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:e.clearColor??0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:e.experimental_FinalizationRegistryTextureUsageTracker??!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:e.enableContextSpy??!1,enableInspector:e.enableInspector??!1};this.settings=l;const{appWidth:r,appHeight:i,deviceLogicalPixelRatio:f,devicePhysicalPixelRatio:c,enableInspector:a}=l,d=x=>{this.driver.releaseTexture(x)},m=l.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=m?new tn(d):new en(d,this.settings.textureCleanupOptions);const p=r*f,h=i*f;this.driver=t;const y=document.createElement("canvas");this.canvas=y,y.width=p*c,y.height=h*c,y.style.width=`${p}px`,y.style.height=`${h}px`;let g;if(typeof s=="string"?g=document.getElementById(s):g=s,!g)throw new Error("Could not find target element");t.onCreateNode=x=>{this.nodes.set(x.id,x)},t.onBeforeDestroyNode=x=>{this.nodes.delete(x.id)},t.onFpsUpdate=x=>{this.emit("fpsUpdate",x)},t.onFrameTick=x=>{this.emit("frameTick",x)},g.appendChild(y)}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(e)):this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){const s=e.fontSize??16,t={...this.resolveNodeDefaults(e),text:e.text??"",textRendererOverride:e.textRendererOverride??null,fontSize:s,fontFamily:e.fontFamily??"sans-serif",fontStyle:e.fontStyle??"normal",fontWeight:e.fontWeight??"normal",fontStretch:e.fontStretch??"normal",textAlign:e.textAlign??"left",contain:e.contain??"none",scrollable:e.scrollable??!1,scrollY:e.scrollY??0,offsetY:e.offsetY??0,letterSpacing:e.letterSpacing??0,lineHeight:e.lineHeight??s,maxLines:e.maxLines??0,textBaseline:e.textBaseline??"alphabetic",verticalAlign:e.verticalAlign??"top",overflowSuffix:e.overflowSuffix??"...",debug:e.debug??{}};return this.inspector?this.inspector.createTextNode(this.driver,t):this.driver.createTextNode(t)}resolveNodeDefaults(e){const s=e.color??4294967295,t=e.colorTl??e.colorTop??e.colorLeft??s,l=e.colorTr??e.colorTop??e.colorRight??s,r=e.colorBl??e.colorBottom??e.colorLeft??s,i=e.colorBr??e.colorBottom??e.colorRight??s,f=ws(e.data??{});return{x:e.x??0,y:e.y??0,width:e.width??0,height:e.height??0,alpha:e.alpha??1,clipping:e.clipping??!1,color:s,colorTop:e.colorTop??s,colorBottom:e.colorBottom??s,colorLeft:e.colorLeft??s,colorRight:e.colorRight??s,colorBl:r,colorBr:i,colorTl:t,colorTr:l,zIndex:e.zIndex??0,zIndexLocked:e.zIndexLocked??0,parent:e.parent??null,texture:e.texture??null,shader:e.shader??null,src:e.src??"",scale:e.scale??null,scaleX:e.scaleX??e.scale??1,scaleY:e.scaleY??e.scale??1,mount:e.mount??0,mountX:e.mountX??e.mount??0,mountY:e.mountY??e.mount??0,pivot:e.pivot??.5,pivotX:e.pivotX??e.pivot??.5,pivotY:e.pivotY??e.pivot??.5,rotation:e.rotation??0,data:f}}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e),this.driver.destroyNode(e)}createTexture(e,s,t){const l=this.nextTextureId++,r={descType:"texture",txType:e,props:s,options:{...t,id:l}};return this.textureTracker.registerTexture(r),r}createShader(e,s){return{descType:"shader",shType:e,props:s}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class ni extends _e{constructor(e,s,t){super();u(this,"node");u(this,"props");u(this,"settings");u(this,"propStartValues",{});u(this,"restoreValues",{});u(this,"progress",0);u(this,"delayFor",0);u(this,"timingFunction");u(this,"propsList");this.node=e,this.props=s,this.settings=t,this.propStartValues={},this.propsList=Object.keys(s),this.propsList.forEach(l=>{this.propStartValues[l]=e[l]}),this.timingFunction=l=>l,t.easing&&typeof t.easing=="string"&&(this.timingFunction=In(t.easing)),this.delayFor=t.delay||0}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const s=this.props[e],t=this.propStartValues[e];this.props[e]=t,this.propStartValues[e]=s}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,s,t){return(this.timingFunction(e)||e)*(t-s)+s}update(e){const{duration:s,loop:t,easing:l,stopMethod:r}=this.settings;if(!s){this.emit("finished",{});return}if(this.delayFor>0){this.delayFor-=e;return}if(this.delayFor<=0&&this.progress===0&&this.emit("start",{}),this.progress+=e/s,this.progress>1&&(this.progress=t?0:1,r)){this.emit("finished",{});return}for(let i=0;i<this.propsList.length;i++){const f=this.propsList[i],c=this.props[f],a=this.propStartValues[f],d=c;if(f.indexOf("color")!==-1){if(a===d){this.node[f]=a;continue}if(l){const m=this.timingFunction(this.progress)||this.progress,p=Ao(a,d,m);this.node[f]=p;continue}this.node[f]=Ao(a,d,this.progress);continue}if(l){this.node[f]=this.applyEasing(this.progress,a,d);continue}this.node[f]=a+(d-a)*this.progress}this.progress===1&&this.emit("finished",{})}}class ii{constructor(o,e){u(this,"manager");u(this,"animation");u(this,"startedPromise",null);u(this,"startedResolve",null);u(this,"stoppedPromise",null);u(this,"stoppedResolve",null);u(this,"state");this.manager=o,this.animation=e,this.state="stopped"}start(){return this.makeStartedPromise(),this.animation.once("start",this.started.bind(this)),this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStarted(){return this.makeStartedPromise(),this.startedPromise}waitUntilStopped(){return this.makeStoppedPromise(),this.stoppedPromise}makeStartedPromise(){this.startedResolve===null&&(this.startedPromise=new Promise(o=>{this.startedResolve=o}))}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(o=>{this.stoppedResolve=o}))}started(){this.startedResolve,this.startedResolve(this),this.startedResolve=null}finished(){this.stoppedResolve;const{loop:o,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!o&&this.manager.unregisterAnimation(this.animation)}}const ne=0,ie=3,he=6,se=1,re=4,pe=7,ge=2,xe=5,be=8;class Se{constructor(o){u(this,"data");o?(this.data=new Float32Array(9),this.data[ne]=o[0],this.data[ie]=o[3],this.data[he]=o[6],this.data[se]=o[1],this.data[re]=o[4],this.data[pe]=o[7],this.data[ge]=o[2],this.data[xe]=o[5],this.data[be]=o[8]):this.data=new Float32Array(9)}static get temp(){return ri}static multiply(o,e,s){const t=o.data[ne]*e.data[ne]+o.data[ie]*e.data[se]+o.data[he]*e.data[ge],l=o.data[ne]*e.data[ie]+o.data[ie]*e.data[re]+o.data[he]*e.data[xe],r=o.data[ne]*e.data[he]+o.data[ie]*e.data[pe]+o.data[he]*e.data[be],i=o.data[se]*e.data[ne]+o.data[re]*e.data[se]+o.data[pe]*e.data[ge],f=o.data[se]*e.data[ie]+o.data[re]*e.data[re]+o.data[pe]*e.data[xe],c=o.data[se]*e.data[he]+o.data[re]*e.data[pe]+o.data[pe]*e.data[be],a=o.data[ge]*e.data[ne]+o.data[xe]*e.data[se]+o.data[be]*e.data[ge],d=o.data[ge]*e.data[ie]+o.data[xe]*e.data[re]+o.data[be]*e.data[xe],m=o.data[ge]*e.data[he]+o.data[xe]*e.data[pe]+o.data[be]*e.data[be];return s||(s=new Se),s.data[ne]=t,s.data[ie]=l,s.data[he]=r,s.data[se]=i,s.data[re]=f,s.data[pe]=c,s.data[ge]=a,s.data[xe]=d,s.data[be]=m,s}static identity(o){return o||(o=new Se),o.data[ne]=1,o.data[ie]=0,o.data[he]=0,o.data[se]=0,o.data[re]=1,o.data[pe]=0,o.data[ge]=0,o.data[xe]=0,o.data[be]=1,o}static translate(o,e,s){return s||(s=new Se),s.data[ne]=1,s.data[ie]=0,s.data[he]=o,s.data[se]=0,s.data[re]=1,s.data[pe]=e,s.data[ge]=0,s.data[xe]=0,s.data[be]=1,s}static scale(o,e,s){return s||(s=new Se),s.data[ne]=o,s.data[ie]=0,s.data[he]=0,s.data[se]=0,s.data[re]=e,s.data[pe]=0,s.data[ge]=0,s.data[xe]=0,s.data[be]=1,s}static rotate(o,e){const s=Math.cos(o),t=Math.sin(o);return e||(e=new Se),e.data[ne]=s,e.data[ie]=-t,e.data[he]=0,e.data[se]=t,e.data[re]=s,e.data[pe]=0,e.data[ge]=0,e.data[xe]=0,e.data[be]=1,e}static copy(o,e,s){return e||(e=new Se),e.data[0]=o.data[0],e.data[1]=o.data[1],e.data[2]=o.data[2],e.data[3]=o.data[3],e.data[4]=o.data[4],e.data[5]=o.data[5],e.data[6]=o.data[6],e.data[7]=o.data[7],e.data[8]=o.data[8],e}translate(o,e){return this.data[he]=this.data[ne]*o+this.data[ie]*e+this.data[he],this.data[pe]=this.data[se]*o+this.data[re]*e+this.data[pe],this}scale(o,e){return this.data[ne]=this.data[ne]*o,this.data[ie]=this.data[ie]*e,this.data[se]=this.data[se]*o,this.data[re]=this.data[re]*e,this}rotate(o){if(o===0||!(o%Math.PI*2))return this;const e=Math.cos(o),s=Math.sin(o),t=this.data[ne]*e+this.data[ie]*s,l=this.data[ie]*e-this.data[ne]*s,r=this.data[se]*e+this.data[re]*s,i=this.data[re]*e-this.data[se]*s;return this.data[ne]=t,this.data[ie]=l,this.data[se]=r,this.data[re]=i,this}multiply(o){return Se.multiply(this,o,this)}get tx(){return this.data[he]}get ty(){return this.data[pe]}get ta(){return this.data[ne]}get tb(){return this.data[ie]}get tc(){return this.data[se]}get td(){return this.data[re]}transformPoint(o,e){return[this.data[ne]*o+this.data[ie]*e+this.data[he],this.data[se]*o+this.data[re]*e+this.data[se]]}}const ri=new Se,xt=0,bt=2,St=4,wt=6,Tt=1,Ct=3,vt=5,It=7;class $t{constructor(o){u(this,"data");this.data=new Float32Array(8),o&&(this.data[xt]=o[xt],this.data[bt]=o[bt],this.data[St]=o[St],this.data[wt]=o[wt],this.data[Tt]=o[Tt],this.data[Ct]=o[Ct],this.data[vt]=o[vt],this.data[It]=o[It])}static translate(o,e,s,t,l,r,i,f,c){return c||(c=new $t),c.data[xt]=o,c.data[bt]=s,c.data[St]=l,c.data[wt]=i,c.data[Tt]=e,c.data[Ct]=t,c.data[vt]=r,c.data[It]=f,c}get x1(){return this.data[xt]}get x2(){return this.data[bt]}get x3(){return this.data[St]}get x4(){return this.data[wt]}get y1(){return this.data[Tt]}get y2(){return this.data[Ct]}get y3(){return this.data[vt]}get y4(){return this.data[It]}}var ye;(function(n){n[n.Init=0]="Init",n[n.OutOfBounds=2]="OutOfBounds",n[n.InBounds=4]="InBounds",n[n.InViewport=8]="InViewport"})(ye||(ye={}));const yt=new Map;yt.set(ye.Init,"init");yt.set(ye.OutOfBounds,"outOfBounds");yt.set(ye.InBounds,"inBounds");yt.set(ye.InViewport,"inViewport");var G;(function(n){n[n.Children=1]="Children",n[n.ScaleRotate=2]="ScaleRotate",n[n.Local=4]="Local",n[n.Global=8]="Global",n[n.Clipping=16]="Clipping",n[n.CalculatedZIndex=32]="CalculatedZIndex",n[n.ZIndexSortedChildren=64]="ZIndexSortedChildren",n[n.PremultipliedColors=128]="PremultipliedColors",n[n.WorldAlpha=256]="WorldAlpha",n[n.None=0]="None",n[n.All=511]="All"})(G||(G={}));class wo extends _e{constructor(e,s){super();u(this,"stage");u(this,"children",[]);u(this,"props");u(this,"updateType",G.All);u(this,"globalTransform");u(this,"scaleRotateTransform");u(this,"localTransform");u(this,"renderCoords");u(this,"renderBound");u(this,"strictBound");u(this,"preloadBound");u(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});u(this,"isRenderable",!1);u(this,"renderState",ye.Init);u(this,"worldAlpha",1);u(this,"premultipliedColorTl",0);u(this,"premultipliedColorTr",0);u(this,"premultipliedColorBl",0);u(this,"premultipliedColorBr",0);u(this,"calcZIndex",0);u(this,"onTextureLoaded",(e,s)=>{this.stage.requestRender(),this.emit("loaded",{type:"texture",dimensions:s})});u(this,"onTextureFailed",(e,s)=>{this.emit("failed",{type:"texture",error:s})});this.stage=e,this.props={...s,parent:null},this.parent=s.parent,this.updateScaleRotateTransform()}loadTexture(e,s,t=null){this.props.texture&&this.unloadTexture();const{txManager:l}=this.stage,r=l.loadTexture(e,s,t);this.props.texture=r,this.props.textureOptions=t,this.updateIsRenderable(),queueMicrotask(()=>{r.state==="loaded"?this.onTextureLoaded(r,r.dimensions):r.state==="failed"&&this.onTextureFailed(r,r.error),r.on("loaded",this.onTextureLoaded),r.on("failed",this.onTextureFailed)})}unloadTexture(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null,this.updateIsRenderable()}loadShader(e,s){const t=this.stage.renderer.getShaderManager(),{shader:l,props:r}=t.loadShader(e,s);this.props.shader=l,this.props.shaderProps=r,this.updateIsRenderable()}setUpdateType(e){this.updateType|=e;const s=this.props.parent;s&&!(s.updateType&G.Children)&&s.setUpdateType(G.Children)}sortChildren(){this.children.sort((e,s)=>e.calcZIndex-s.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=Se.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){this.scaleRotateTransform;const e=this.props.pivotX*this.props.width,s=this.props.pivotY*this.props.height,t=this.props.mountX*this.props.width,l=this.props.mountY*this.props.height;this.localTransform=Se.translate(e-t+this.props.x,s-l+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-s),this.setUpdateType(G.Global)}update(e,s){this.updateType&G.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(G.Local)),this.updateType&G.Local&&(this.updateLocalTransform(),this.setUpdateType(G.Global));const t=this.props.parent;let l=G.None;this.updateType&G.Global&&(this.localTransform,this.globalTransform=Se.copy((t==null?void 0:t.globalTransform)||this.localTransform,this.globalTransform),t&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.updateRenderState(),this.setUpdateType(G.Clipping|G.Children),l|=G.Global),this.updateType&G.Clipping&&(this.calculateClippingRect(s),this.setUpdateType(G.Children),l|=G.Clipping),this.updateType&G.WorldAlpha&&(t?this.worldAlpha=t.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(G.Children|G.PremultipliedColors),l|=G.WorldAlpha),this.updateType&G.PremultipliedColors&&(this.premultipliedColorTl=it(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=it(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=it(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=it(this.props.colorBr,this.worldAlpha,!0)),this.updateIsRenderable(),this.setUpdateType(G.Children),l|=G.PremultipliedColors),t&&this.updateType&G.CalculatedZIndex&&(this.calculateZIndex(),t.setUpdateType(G.ZIndexSortedChildren)),this.updateType&G.Children&&this.children.length&&this.children.forEach(r=>{r.setUpdateType(l),r.updateType!==0&&r.update(e,this.clippingRect)}),this.updateType&G.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(){this.clippingRect,this.renderBound;const e=this.clippingRect.width||this.stage.root.width,s=this.clippingRect.height||this.stage.root.height;this.strictBound=Me(this.clippingRect.x,this.clippingRect.y,e,s,this.strictBound);const t=this.stage.boundsMargin;return this.preloadBound=Me(this.clippingRect.x-t[3],this.clippingRect.y-t[0],this.clippingRect.x+e+t[1],this.clippingRect.y+s+t[2],this.preloadBound),Bo(this.renderBound,this.strictBound)?ye.InViewport:Bo(this.renderBound,this.preloadBound)?ye.InBounds:ye.OutOfBounds}updateRenderState(){const e=this.checkRenderBounds();if(e!==this.renderState){const s=this.renderState;this.renderState=e,s===ye.InViewport&&this.emit("outOfViewPort",{previous:s,current:e});const t=yt.get(e);this.emit(t,{previous:s,current:e})}this.updateIsRenderable()}setRenderState(e){e!==this.renderState&&(this.renderState=e,this.emit(ye[e]))}updateIsRenderable(){if(!this.checkRenderProps())return this.isRenderable=!1;this.isRenderable=this.renderState>ye.OutOfBounds}calculateRenderCoords(){const{width:e,height:s,globalTransform:t}=this,{tx:l,ty:r,ta:i,tb:f,tc:c,td:a}=t;if(f===0&&c===0){const d=l,m=l+e*i,p=r,h=r+s*a;this.renderCoords=$t.translate(d,p,m,p,m,h,d,h,this.renderCoords)}else this.renderCoords=$t.translate(l,r,l+e*i,r+e*c,l+e*i+s*f,r+e*c+s*a,l+s*f,r+s*a,this.renderCoords)}updateBoundingRect(){const{renderCoords:e,globalTransform:s}=this,{tb:t,tc:l}=s,{x1:r,y1:i,x3:f,y3:c}=e;if(t===0||l===0)this.renderBound=Me(r,i,f,c,this.renderBound);else{const{x2:a,x4:d,y2:m,y4:p}=e;this.renderBound=Me(Math.min(r,a,f,d),Math.min(i,m,c,p),Math.max(r,a,f,d),Math.max(i,m,c,p),this.renderBound)}}calculateClippingRect(e){this.globalTransform;const{clippingRect:s,props:t,globalTransform:l}=this,{clipping:r}=t,i=l.tb!==0||l.tc!==0;r&&!i?(s.x=l.tx,s.y=l.ty,s.width=this.width*l.ta,s.height=this.height*l.td,s.valid=!0):s.valid=!1,e.valid&&s.valid?bo(e,s,s):e.valid&&(ds(e,s),s.valid=!0)}calculateZIndex(){var r,i;const e=this.props,s=e.zIndex||0,t=((r=e.parent)==null?void 0:r.zIndex)||0;let l=s;(i=e.parent)!=null&&i.zIndexLocked&&(l=s<t?s:t),this.calcZIndex=l}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=null,this.removeAllListeners(),this.parent=null}renderQuads(e){const{width:s,height:t,texture:l,textureOptions:r,shader:i,shaderProps:f}=this.props,{premultipliedColorTl:c,premultipliedColorTr:a,premultipliedColorBl:d,premultipliedColorBr:m}=this,{zIndex:p,worldAlpha:h,globalTransform:y,clippingRect:g}=this;e.addQuad({width:s,height:t,colorTl:c,colorTr:a,colorBl:d,colorBr:m,texture:l,textureOptions:r,zIndex:p,shader:i,shaderProps:f,alpha:h,clippingRect:g,tx:y.tx,ty:y.ty,ta:y.ta,tb:y.tb,tc:y.tc,td:y.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(G.Local))}get absX(){var e,s,t;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((t=(s=this.props.parent)==null?void 0:s.globalTransform)==null?void 0:t.tx)||0)}get absY(){var e;return this.props.y+(((e=this.props.parent)==null?void 0:e.absY)??0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(G.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(G.Local))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(G.Local))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(G.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(G.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(G.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(G.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(G.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(G.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(G.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(G.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(G.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(G.PremultipliedColors|G.WorldAlpha)}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(G.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(G.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(G.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(G.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(G.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(G.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(G.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(G.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(G.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(G.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(G.CalculatedZIndex|G.Children),this.children.forEach(s=>{s.setUpdateType(G.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(G.CalculatedZIndex|G.Children),this.children.forEach(s=>{s.setUpdateType(G.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const s=this.props.parent;if(s!==e){if(this.props.parent=e,s){const t=s.children.indexOf(this);s.children.splice(t,1),s.setUpdateType(G.Children|G.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(G.All),e.setUpdateType(G.Children|G.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}let li=1;function To(){return li++}class ao extends _e{constructor(e,s,t,l){super();u(this,"rendererMain");u(this,"stage");u(this,"id");u(this,"coreNode");u(this,"_children",[]);u(this,"_src","");u(this,"_parent",null);u(this,"_texture",null);u(this,"_shader",null);u(this,"_data",{});u(this,"onTextureLoaded",(e,s)=>{this.emit("loaded",s)});u(this,"onTextureFailed",(e,s)=>{this.emit("failed",s)});u(this,"onOutOfBounds",(e,s)=>{this.emit("outOfBounds",s)});u(this,"onInBounds",(e,s)=>{this.emit("inBounds",s)});u(this,"onOutOfViewport",(e,s)=>{this.emit("outOfViewport",s)});u(this,"onInViewport",(e,s)=>{this.emit("inViewport",s)});this.rendererMain=s,this.stage=t,this.id=(l==null?void 0:l.id)??To(),this.coreNode=l||new wo(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.coreNode.on("outOfBounds",this.onOutOfBounds),this.coreNode.on("inBounds",this.onInBounds),this.coreNode.on("outOfViewport",this.onOutOfViewport),this.coreNode.on("inViewport",this.onInViewport),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src,this._data=e.data}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){const s=this._parent;if(this._parent=e,this.coreNode.parent=(e==null?void 0:e.coreNode)??null,s){const t=s.children.indexOf(this);s.children.splice(t,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}get data(){return this._data}set data(e){this._data=ws(e)}destroy(){var s;this.emit("beforeDestroy",{}),this.coreNode.destroy();const e=this.children.length;for(let t=0;t<e;t++)(s=this.children[t])==null||s.destroy();this.children.length=0,this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,s){const t=new ni(this.coreNode,e,s);return new ii(this.stage.animationManager,t)}}const fi=n=>{const o=()=>{if(n.updateAnimations(),!n.hasSceneUpdates()){setTimeout(o,16.666666666666668);return}n.drawFrame(),requestAnimationFrame(o)};requestAnimationFrame(o)},ai=()=>performance?performance.now():Date.now();class ci{constructor(){u(this,"activeAnimations",new Set)}registerAnimation(o){this.activeAnimations.add(o)}unregisterAnimation(o){this.activeAnimations.delete(o)}update(o){this.activeAnimations.forEach(e=>{e.update(o)})}}class di{constructor(o){u(this,"imageWorkersEnabled",!0);u(this,"messageManager",{});u(this,"workers",[]);u(this,"workerIndex",0);this.workers=this.createWorkers(o),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(o){const{src:e,data:s,error:t}=o.data,l=this.messageManager[e];if(l){const[r,i]=l;delete this.messageManager[e],t?i(new Error(t)):r(s)}}createWorkers(o=1){const e=`
      function hasAlphaChannel(mimeType) {
          return (mimeType.indexOf("image/png") !== -1);
      }

      async function getImage(src, premultiplyAlpha) {
        return new Promise(function(resolve, reject) {
          var xhr = new XMLHttpRequest();
          xhr.open('GET', src, true);
          xhr.responseType = 'blob';

          xhr.onload = function() {
            if (xhr.status === 200) {
              var blob = xhr.response;
              var hasAlphaChannel = premultiplyAlpha !== undefined ? premultiplyAlpha : hasAlphaChannel(blob.type);

              createImageBitmap(blob, {
                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',
                colorSpaceConversion: 'none',
                imageOrientation: 'none'
              }).then(function(data) {
                resolve({ data: data, premultiplyAlpha: premultiplyAlpha });
              }).catch(function(error) {
                reject(error);
              });
            } else {
              reject(new Error('Failed to load image: ' + xhr.statusText));
            }
          };

          xhr.onerror = function() {
            reject(new Error('Network error occurred while trying to fetch the image.'));
          };

          xhr.send();
        });
      }

      self.onmessage = async (event) => {
        var src = event.data.src;
        var premultiplyAlpha = event.data.premultiplyAlpha;

        getImage(src, premultiplyAlpha)
          .then(function(data) {
              self.postMessage({ src: src, data: data }, [data.data]);
          })
          .catch(function(error) {
              self.postMessage({ src: src, error: error.message });
          });
      };
    `,s=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),t=(self.URL?URL:webkitURL).createObjectURL(s),l=[];for(let r=0;r<o;r++)l.push(new Worker(t));return l}getNextWorker(){const o=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,o}convertUrlToAbsolute(o){return new URL(o,self.location.href).href}getImage(o,e){return new Promise((s,t)=>{try{if(this.workers){const l=this.convertUrlToAbsolute(o);this.messageManager[l]=[s,t],this.getNextWorker().postMessage({src:l,premultiplyAlpha:e})}}catch(l){t(l)}})}}const ht=class ht extends Gt{constructor(e,s){super(e);u(this,"props");this.props=ht.resolveDefaults(s)}async getTextureData(){const{width:e,height:s}=this.props,t=e*s*4,l=new Uint8ClampedArray(t);for(let r=0;r<t;r+=4){const i=Math.floor(Math.random()*256);l[r]=i,l[r+1]=i,l[r+2]=i,l[r+3]=255}return{data:new ImageData(l,e,s)}}static makeCacheKey(e){const s=ht.resolveDefaults(e);return`NoiseTexture,${s.width},${s.height},${s.cacheId}`}static resolveDefaults(e){return{width:e.width??128,height:e.height??128,cacheId:e.cacheId??0}}};u(ht,"z$__type__Props");let co=ht;class ui{constructor(o){u(this,"usedMemory",0);u(this,"txConstructors",{});u(this,"textureKeyCache",new Map);u(this,"textureIdCache",new Map);u(this,"ctxTextureCache",new WeakMap);u(this,"textureRefCountMap",new WeakMap);u(this,"imageWorkerManager",null);u(this,"hasCreateImageBitmap",!!self.createImageBitmap);u(this,"hasWorker",!!self.Worker);u(this,"renderer");this.hasCreateImageBitmap&&this.hasWorker&&(this.imageWorkerManager=new di(o)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",fo),this.registerTextureType("ColorTexture",Ot),this.registerTextureType("NoiseTexture",co),this.registerTextureType("SubTexture",pt)}registerTextureType(o,e){this.txConstructors[o]=e}loadTexture(o,e,s=null){const t=this.txConstructors[o];if(!t)throw new Error(`Texture type "${o}" is not registered`);let l;if((s==null?void 0:s.id)!==void 0&&this.textureIdCache.has(s.id)&&(l=this.textureIdCache.get(s.id)),!l){const r=s==null?void 0:s.id,i=(s==null?void 0:s.cacheKey)??t.makeCacheKey(e);i&&this.textureKeyCache.has(i)?l=this.textureKeyCache.get(i):l=new t(this,e),r&&this.addTextureIdToCache(r,i,l)}return s!=null&&s.preload&&this.getCtxTexture(l).load(),l}addTextureIdToCache(o,e,s){const{textureIdCache:t,textureRefCountMap:l}=this;t.set(o,s),l.has(s)?l.get(s).count++:(l.set(s,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,s))}removeTextureIdFromCache(o){const{textureIdCache:e,textureRefCountMap:s}=this,t=e.get(o);if(t&&(e.delete(o),s.has(t))){const l=s.get(t);l.count--,l.count===0&&(s.delete(t),l.cacheKey&&this.textureKeyCache.delete(l.cacheKey))}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(o){if(this.ctxTextureCache.has(o))return this.ctxTextureCache.get(o);const e=this.renderer.createCtxTexture(o);return this.ctxTextureCache.set(o,e),e}}const hi=2e6;class pi extends _e{constructor(e){super();u(this,"options");u(this,"animationManager");u(this,"txManager");u(this,"fontManager");u(this,"textRenderers");u(this,"shManager");u(this,"renderer");u(this,"root");u(this,"boundsMargin");u(this,"deltaTime",0);u(this,"lastFrameTime",0);u(this,"currentFrameTime",0);u(this,"fpsNumFrames",0);u(this,"fpsElapsedTime",0);u(this,"renderRequested",!1);u(this,"contextSpy",null);this.options=e;const{canvas:s,clearColor:t,rootId:l,debug:r,appWidth:i,appHeight:f,boundsMargin:c,enableContextSpy:a,numImageWorkers:d}=e;this.txManager=new ui(d),this.shManager=new En,this.animationManager=new ci,this.contextSpy=a?new An:null;let m=[0,0,0,0];c&&(m=Array.isArray(c)?c:[c,c,c,c]),this.boundsMargin=m,r!=null&&r.monitorTextureCache&&setInterval(()=>{this.txManager;const h=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",h.idCacheSize),console.log("Texture Key Cache Size: ",h.keyCacheSize)},1e3),this.renderer=new Pn({stage:this,canvas:s,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:t??4278190080,bufferMemory:hi,txManager:this.txManager,shManager:this.shManager,contextSpy:this.contextSpy}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new gn(this),sdf:new Jn(this)},this.fontManager=new Ss(this.textRenderers);const p=new wo(this,{id:l,x:0,y:0,width:i,height:f,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.root=p,fi(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=ai(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){var l,r;const{renderer:e,renderRequested:s}=this;this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),e==null||e.reset(),this.addQuads(this.root),e==null||e.render(),s&&(this.renderRequested=!1);const{fpsUpdateInterval:t}=this.options;if(t&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=t)){const i=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:i,contextSpyData:((l=this.contextSpy)==null?void 0:l.getData())??null}),(r=this.contextSpy)==null||r.reset()}}addQuads(e){this.renderer&&e.globalTransform,e.isRenderable&&e.renderQuads(this.renderer);for(let s=0;s<e.children.length;s++){const t=e.children[s];t&&(t==null?void 0:t.worldAlpha)!==0&&this.addQuads(t)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,s=null){let t=s,l=!1;if(t){const i=this.textRenderers[t];i?i.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${t}' for font`,e),t=null,l=!0):(console.warn(`Text renderer override '${t}' not found.`),t=null,l=!0)}if(!t){for(const[i,f]of Object.entries(this.textRenderers))if(i!=="canvas"&&f.canRenderFont(e)){t=i;break}t||(t="canvas")}return l&&console.warn(`Falling back to text renderer ${String(t)}`),this.textRenderers[t]}}class mi extends wo{constructor(e,s){super(e,s);u(this,"textRenderer");u(this,"trState");u(this,"_textRendererOverride",null);u(this,"onTextLoaded",()=>{const{contain:e}=this,s=this.trState.props.width,t=this.trState.props.height,l=this.trState.textW||0,r=this.trState.textH||0;e==="both"?(this.props.width=s,this.props.height=t):e==="width"?(this.props.width=s,this.props.height=r):e==="none"&&(this.props.width=l,this.props.height=r),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});u(this,"onTextFailed",(e,s)=>{this.emit("failed",{type:"text",error:s})});this._textRendererOverride=s.textRendererOverride;const{resolvedTextRenderer:t,textRendererState:l}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:s.width,height:s.height,textAlign:s.textAlign,color:s.color,zIndex:s.zIndex,contain:s.contain,scrollable:s.scrollable,scrollY:s.scrollY,offsetY:s.offsetY,letterSpacing:s.letterSpacing,debug:s.debug,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStretch:s.fontStretch,fontStyle:s.fontStyle,fontWeight:s.fontWeight,text:s.text,lineHeight:s.lineHeight,maxLines:s.maxLines,textBaseline:s.textBaseline,verticalAlign:s.verticalAlign,overflowSuffix:s.overflowSuffix},void 0);this.textRenderer=t,this.trState=l}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),this.contain==="none"&&this.setUpdateType(G.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),this.contain!=="both"&&this.setUpdateType(G.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e;const{resolvedTextRenderer:s,textRendererState:t}=this.resolveTextRendererAndState(this.trState.props,this.trState);this.textRenderer=s,this.trState=t}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,s){super.update(e,s),this.globalTransform,this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState.props.text!==""?!0:super.checkRenderProps()}renderQuads(e){this.globalTransform,this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}resolveTextRendererAndState(e,s){const t=this.stage.resolveTextRenderer(e,this._textRendererOverride),l=t.createState(e);return s&&["loading","loaded","failed"].forEach(i=>{s.emitter.off(i)}),l.emitter.on("loaded",this.onTextLoaded),l.emitter.on("failed",this.onTextFailed),t.scheduleUpdateState(l),{resolvedTextRenderer:t,textRendererState:l}}}class yi extends ao{constructor(o,e,s){super(o,e,s,new mi(s,{id:To(),x:o.x,y:o.y,width:o.width,height:o.height,alpha:o.alpha,clipping:o.clipping,color:o.color,colorTop:o.colorTop,colorBottom:o.colorBottom,colorLeft:o.colorLeft,colorRight:o.colorRight,colorTl:o.colorTl,colorTr:o.colorTr,colorBl:o.colorBl,colorBr:o.colorBr,zIndex:o.zIndex,zIndexLocked:o.zIndexLocked,scaleX:o.scaleX,scaleY:o.scaleY,mountX:o.mountX,mountY:o.mountY,mount:o.mount,pivot:o.pivot,pivotX:o.pivotX,pivotY:o.pivotY,rotation:o.rotation,text:o.text,fontSize:o.fontSize,fontFamily:o.fontFamily,fontWeight:o.fontWeight,fontStretch:o.fontStretch,fontStyle:o.fontStyle,contain:o.contain,scrollable:o.scrollable,letterSpacing:o.letterSpacing,textAlign:o.textAlign,scrollY:o.scrollY,offsetY:o.offsetY,textRendererOverride:o.textRendererOverride,lineHeight:o.lineHeight,maxLines:o.maxLines,textBaseline:o.textBaseline,verticalAlign:o.verticalAlign,overflowSuffix:o.overflowSuffix,debug:o.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(o){this.coreNode.text=o}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(o){this.coreNode.textRendererOverride=o}get fontSize(){return this.coreNode.fontSize}set fontSize(o){this.coreNode.fontSize=o}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(o){this.coreNode.fontFamily=o}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(o){this.coreNode.fontWeight=o}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(o){this.coreNode.fontStretch=o}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(o){this.coreNode.fontStyle=o}get textAlign(){return this.coreNode.textAlign}set textAlign(o){this.coreNode.textAlign=o}get contain(){return this.coreNode.contain}set contain(o){this.coreNode.contain=o}get scrollable(){return this.coreNode.scrollable}set scrollable(o){this.coreNode.scrollable=o}get scrollY(){return this.coreNode.scrollY}set scrollY(o){this.coreNode.scrollY=o}get offsetY(){return this.coreNode.offsetY}set offsetY(o){this.coreNode.offsetY=o}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(o){this.coreNode.letterSpacing=o}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(o){o&&(this.coreNode.lineHeight=o)}get maxLines(){return this.coreNode.maxLines}set maxLines(o){o&&(this.coreNode.maxLines=o)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(o){o&&(this.coreNode.textBaseline=o)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(o){o&&(this.coreNode.verticalAlign=o)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(o){o&&(this.coreNode.overflowSuffix=o)}get debug(){return this.coreNode.debug}set debug(o){this.coreNode.debug=o}}class gi{constructor(){u(this,"root",null);u(this,"stage",null);u(this,"rendererMain",null)}async init(o,e,s){this.stage=new pi({rootId:To(),appWidth:e.appWidth,appHeight:e.appHeight,boundsMargin:e.boundsMargin,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:s,fpsUpdateInterval:e.fpsUpdateInterval,enableContextSpy:e.enableContextSpy,numImageWorkers:e.numImageWorkers,debug:{monitorTextureCache:!1}}),this.rendererMain=o,this.stage.root;const t=new ao(o.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=t,t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),e.coreExtensionModule&&await oi(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(l,r)=>{this.onFpsUpdate(r)}),this.stage.on("frameTick",(l,r)=>{this.onFrameTick(r)})}createNode(o){this.rendererMain,this.stage;const e=new ao(o,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(o){this.rendererMain,this.stage;const e=new yi(o,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(o){o.destroy()}releaseTexture(o){const{stage:e}=this;e.txManager.removeTextureIdFromCache(o)}getRootNode(){return this.root,this.root}onCreateNode(o){throw new Error("Method not implemented.")}onBeforeDestroyNode(o){throw new Error("Method not implemented.")}onFpsUpdate(o){throw new Error("Method not implemented.")}onFrameTick(o){throw new Error("Method not implemented.")}}const Uo={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},xi=()=>{const n=we.driver.stage;$e.get("fonts",[]).forEach(o=>{o.type==="sdf"||o.type==="msdf"?(!o.png&&o.file&&(o.png=o.file.replace(/\.[^.]+$/,`.${o.type}.png`)),!o.json&&o.file&&(o.json=o.file.replace(/\.[^.]+$/,`.${o.type}.json`)),n.fontManager.addFontFace(new bs(o.family,{},o.type,n,o.png,o.json))):o.type==="web"&&n.fontManager.addFontFace(new hs(o.family,{},o.file))})};let we;const bi=(n,o,e)=>{$e.set(e),Vs();const s=new gi;"fontLoader"in e&&te.warn("\n\nStarting version 0.9.0 of Blits, the Launch setting `fontLoader` is not supported / required anymore.\nYou can remove the option from your `src/index.js`-file. And you can safely remove the file `src/fontLoader.js` from your project.\n      "),we=new si({appWidth:e.w||1920,appHeight:e.h||1080,fpsUpdateInterval:e.fpsInterval||1e3,deviceLogicalPixelRatio:e.pixelRatio||Uo[e.screenResolution]||Uo[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in e?e.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:e.canvasColor&&Ke.normalize(e.canvasColor)||0,enableInspector:e.inspector||!1,boundsMargin:e.viewportMargin||0},o,s);const t=()=>{let l=n();l.quit=()=>{te.info("Closing App"),l.destroy(),l=null,we=null}};we.init().then(xi).then(t)},Si=`
----------------------------------------------------------------------------------------------------
Deprecation notice:
----------------------------------------------------------------------------------------------------

The property for defining a transition easing function has been renamed from "function" to "easing".

Please update your code like the example below to keep your custom easing function.

Before: <Element :y.transition=“{v: $y, function: ‘ease-in-out’}” />

After: <Element :y.transition=“{v: $y, easing: ‘ease-in-out’}” />

`,wi=n=>typeof n=="object"&&"transition"in n,_t=n=>typeof n=="string"&&n.startsWith("{")&&n.endsWith("}"),kt=n=>JSON.parse(n.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),De=function(n,o){return typeof n=="string"&&n.endsWith("%")?this.element.node._parent[o]*(parseFloat(n)/100):n},uo=n=>{if(typeof n=="object"&&n.constructor===Object){if("value"in n)return n.value;if("transition"in n)return uo(n.transition)}return n},Ts={set parent(n){this._props.parent=n==="root"?we.root:n.node,this._set.add("parent")},set rotation(n){this._props.rotation=n*(Math.PI/180),this._set.add("rotation")},set w(n){this._props.width=De.call(this,n,"width"),this._set.add("width")},set width(n){this._props.width=De.call(this,n,"width"),this._set.add("width")},set h(n){this._props.height=De.call(this,n,"height"),this._set.add("height")},set height(n){this._props.height=De.call(this,n,"height"),this._set.add("height")},set x(n){this._props.x=De.call(this,n,"width"),this._set.add("x")},set y(n){this._props.y=De.call(this,n,"height"),this._set.add("y")},set z(n){this._props.zIndex=n,this._set.add("zIndex")},set zIndex(n){this._props.zIndex=n,this._set.add("zIndex")},set color(n){if(typeof n=="object"||_t(n)&&(n=kt(n))){const o={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};this._props.color=0,Object.entries(n).forEach(e=>{this._props[o[e[0]]]=Ke.normalize(e[1]),this._set.add(o[e[0]])})}else this._props.color=Ke.normalize(n);this._set.add("color")},set src(n){this._props.src=n,this._set.has("color")||(this._props.color=4294967295),this._set.add("src")},set texture(n){this._props.texture=n,this._set.has("color")||(this._props.color=4294967295),this._set.add("texture")},set mount(n){typeof n=="object"||_t(n)&&(n=kt(n))?("x"in n&&(this._props.mountX=n.x,this._set.add("mountX")),"y"in n&&(this._props.mountY=n.y,this._set.add("mountY"))):(this._props.mountX=this._props.mountY=n,this._set.add("mountX"),this._set.add("mountY"))},set pivot(n){typeof n=="object"||_t(n)&&(n=kt(n))?("x"in n&&(this._set.add("pivotX"),this._props.pivotX=n.x),"y"in n&&(this._set.add("pivotY"),this._props.pivotY=n.y)):(this._props.pivotX=this._props.pivotY=n,this._set.add("pivotX"),this._set.add("pivotY"))},set scale(n){typeof n=="object"||_t(n)&&(n=kt(n))?("x"in n&&(this._set.add("scaleX"),this._props.scaleX=n.x),"y"in n&&(this._set.add("scaleX"),this._props.scaleY=n.y)):(this._props.scale=n,this._set.add("scale"))},set show(n){this._props.alpha=n?1:0},set alpha(n){this._props.alpha=n,this._set.add("alpha")},set text(n){this._props.text=n.toString()},set effects(n){this._props.shader=we.createShader("DynamicShader",{effects:n.map(o=>(o.props&&o.props.color&&(o.props.color=Ke.normalize(o.props.color)),o))}),this._set.add("effects")},set clipping(n){this._props.clipping=n},set fontFamily(n){this._props.fontFamily=n},set fontSize(n){this._props.fontSize=n},set wordWrap(n){this._props.width=n},set contain(n){this._props.contain=n},set maxLines(n){this._props.maxLines=n},set overflowSuffix(n){this._props.overflowSuffix=n===!1?" ":n===!0?void 0:n},set letterSpacing(n){this._props.letterSpacing=n||1},set lineHeight(n){this._props.lineHeight=n},set textAlign(n){this._props.textAlign=n}},Ti={defaults:{},populate(n){const o={...this.defaults,...this.config,...n};this.initData=n,o[C.isSlot]&&(this[C.isSlot]=!0),this.props.element=this;for(const[e,s]of Object.entries(o)){const t=Object.getOwnPropertyDescriptor(Ts,e);t&&t.set&&s!==void 0&&(this.props[e]=uo(s))}!o.__textnode&&!this.props._set.has("color")&&(this.props._props.color=this.props._set.has("src")||this.props._set.has("texture")?4294967295:0),this.node=o.__textnode?we.createTextNode(this.props._props):we.createNode(this.props._props),o["@loaded"]&&this.node.on("loaded",(e,{type:s,dimensions:t})=>{o["@loaded"]({w:t.width,h:t.height,type:s},this)}),o["@error"]&&this.node.on("failed",(e,s)=>{o["@error"](s,this)})},set(n,o){if(o===void 0)return;const e=new Set(this.props._set);this.props._props={},this.props[n]=uo(o);for(const[s,t]of Object.entries(this.props._props)){if(wi(o)&&e.has(s))return this.animate(s,t,o.transition);this.node[s]=t}},animate(n,o,e){if(this.node[n]===o)return Promise.resolve();this.scheduledTransitions[n]&&this.scheduledTransitions[n].f.state==="running"&&(this.scheduledTransitions[n].f.pause(),this.node[n]=this.scheduledTransitions[n].v);const s={};s[n]=o;const t=this.node.animate(s,{duration:typeof e=="object"&&"duration"in e?e.duration:300,easing:typeof e=="object"?"function"in e?te.warn(Si):"easing"in e?e.easing:"ease":"ease",delay:typeof e=="object"&&"delay"in e?e.delay:0});return new Promise(l=>{const r=this.node[n];this.scheduledTransitions[n]={v:s[n],f:()=>{try{t.start().waitUntilStarted().then(i=>{e.start&&typeof e.start=="function"&&e.start.call(this.component,this,n,r),i.waitUntilStopped().then(()=>delete this.scheduledTransitions[n]).then(()=>{e.end&&typeof e.end=="function"&&e.end.call(this.component,this,n,this.node[n])}).then(l)})}catch(i){te.error(i)}}},this.scheduledTransitions[n].f()})},destroy(){te.debug("Deleting  Node",this.nodeId),Object.values(this.scheduledTransitions).forEach(n=>{clearTimeout(n.timeout)}),this.node.destroy()},get nodeId(){return this.node&&this.node.id},get ref(){return this.initData.ref||null}},Cs=(n,o)=>Object.assign(Object.create(Ti),{props:Object.assign(Object.create(Ts),{_props:{},_set:new Set}),node:null,scheduledTransitions:{},initData:{},config:n,component:o}),Xo={};let Ci=0;const vi=n=>`BlitsComponent::${n}_${Xo[n]=(Xo[n]||0)+1}`,Ii=()=>++Ci,Pe={},vs=(n,o,e,s=[])=>{Pe[o]&&Pe[o][n]&&Pe[o][n].apply(e,s)},_i=(n,o,e)=>{const s=C[n];Pe[o]&&Pe[o][s]&&Pe[o][s].apply(e)},ki=(n={},o)=>{Pe[o]={},[...Object.keys(n),...Object.getOwnPropertySymbols(n)].forEach(s=>{typeof n[s]=="function"&&(Pe[o][s]=n[s])})};let Oe=null,Co=!1;const Ri=()=>{Co=!0},Ei=()=>{Co=!1;for(let n=0;n<Pt.length;n++){const o=Pt[n];Oe=o.currentEffect,Dt(o.target,o.key)}Pt.length=0},ho=new WeakMap,Pt=[],Dt=(n,o)=>{if(Oe){if(Co){Pt.push({target:n,key:o,currentEffect:Oe});return}let e=ho.get(n);e||(e=new Map,ho.set(n,e));let s=e.get(o);s||(s=new Set,e.set(o,s)),s.add(Oe)}},mt=(n,o,e=!1)=>{const s=ho.get(n);if(!s)return;const t=s.get(o);t&&t.forEach(l=>{l(e)})},Wo=n=>{Oe=n,Oe(),Oe=null},Nt=["push","pop","shift","unshift","splice"],Is=new WeakMap,Ai=n=>Is.get(n),po=n=>{const o=n&&n[C.raw];return o?po(o):n},_s=(n,o=null,e)=>{const s=Ai(n);if(s)return s;const t={get(r,i,f){return i===C.raw?n:Array.isArray(r)?Nt.indexOf(i)>-1?function(...c){Ri();const a=r[i].apply(this,c);return Ei(),mt(o,e),a}:Reflect.get(r,i,f):typeof r[i]=="object"&&r[i]!==null?(Array.isArray(r[i])&&Dt(r,i),_s(r[i],r,i)):(Dt(r,i),Reflect.get(r,i,f))},set(r,i,f,c){const a=po(r[i]),d=po(f);let m=!0;return a!==d&&(m=Reflect.set(r,i,f,c)),m&&a!==f&&mt(r,i,!0),m}},l=new Proxy(n,t);return Is.set(n,l),l},ks=n=>(Object.keys(n).forEach(o=>{let e=n[o];if(n[o]!==null&&typeof n[o]=="object"){if(Object.getPrototypeOf(n[o])===Object.prototype)return ks(n[o]);if(Array.isArray(n[o]))for(let s=0;s<Nt.length-1;s++)n[o][Nt[s]]=function(t){Array.prototype[Nt[s]].call(this,t),mt(n,o)}}Object.defineProperty(n,o,{enumerable:!0,configurable:!0,get(){return Dt(n,o),e},set(s){e!==s&&(e=s,mt(n,o))}})}),n),Yo=(n,o="Proxy")=>o==="defineProperty"?ks(n):_s(n),Mi={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},Le=window.speechSynthesis,Li=()=>(window.navigator||{}).userAgent||"",Go=()=>/android/i.test(Li());let Rs=!1,Ut=null;const vo=()=>Ut&&clearTimeout(Ut),mo=n=>{if(!n||Ut)return vo();Le.pause(),Le.resume(),Ut=setTimeout(()=>{mo(n)},5e3)},qe={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},Bi=()=>{qe.voice=Le.getVoices()[0],Rs=!0},Pi=(n,o)=>{const e=new SpeechSynthesisUtterance(o.value);e.lang=o.lang||qe.lang,e.pitch=o.pitch||qe.pitch,e.rate=o.rate||qe.rate,e.voice=o.voice||qe.voice,e.volume=o.volume||qe.volume,e.onstart=()=>{Go()||mo(e),n.onstart()},e.onresume=()=>{Go()||mo(e),n.onresume()},e.onpause=()=>{n.onpause()},e.onend=()=>{n.onend()},e.onerror=()=>{vo(),n.onerror()},Le.speak(e)},Ft={speak(n){Rs||Bi(),this.cancel(),Pi(this,n)},resume(){Le.resume()},pause(){Le.pause()},cancel(){Le.cancel(),vo()},getVoices(){return Le.getVoices()},onend(){},onerror(){},onstart(){},onresume(){},onpause(){}};let Ho;const Io=(n,o="off")=>{clearTimeout(Ho),Ft.cancel(),o==="assertive"?Ft.speak({value:n}):Ho=setTimeout(()=>{Ft.speak({value:n})},400)},Ni=n=>Io(n,"polite"),Fi=n=>Io(n,"assertive"),zi=()=>{Ft.cancel()},Es={speak:Io,polite:Ni,assertive:Fi,stop:zi};let _o,Xt=!1;const As=new WeakMap,Ms=[];let Ls={},Bs={},yo=!1,Ps;const Oi=()=>(document.location.hash||"/").replace(/^#/,""),Vo=n=>n.replace(/^\/+|\/+$/g,"").toLowerCase(),$i=(n,o=[])=>{const e=n;n=Vo(n);let s=!1,t=0;for(;!s&&t<o.length;){const l=o[t];if(l.path=Vo(l.path),l.path===n)s=l;else if(l.path.indexOf(":")>-1){const r=[...l.path.matchAll(/:([^\s/]+)/gi)];let i=l.path;r.reverse().forEach(c=>{i=i.substring(0,c.index)+"([^\\s/]+)"+i.substring(c.index+c[0].length)});const f=e.match(new RegExp(`${i}`,"i"));f&&(l.params=r.reverse().reduce((c,a,d)=>(c[a[1]]=f[d+1],c),{}),s=l)}else if(l.path.endsWith("*")){const r=new RegExp(l.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),i=n.match(r);i&&(i[1]&&(l.params={path:i[1]}),s=l)}t++}return s&&(s.options={...s.options,...Ls},_o=s),s},Di=async function(){if(Xt=!0,this.parent[C.routes]){const n=_o,o=Oi(),e=$i(o,this.parent[C.routes]);if(e){yo===!1&&n&&n.options.inHistory===!0&&Ms.push(n),"transition"in e||(e.transition=Mi),typeof e.transition=="function"&&(e.transition=e.transition(n,e));let s,{view:t,focus:l}=As.get(e)||{};if(t)s=t[C.wrapper];else{s=Cs({parent:this[C.children][0]}),s.populate({}),s.set("w","100%"),s.set("h","100%");const i={...this[C.props],...e.params,...Bs};t=await e.component({props:i},s,this),t[Symbol.toStringTag]==="Module"&&(t.default&&typeof t.default=="function"?t=t.default({props:i},s,this):te.error("Dynamic import doesn't have a default export or default is not a function")),typeof t=="function"&&(t=t({props:i},s,this))}if(this[C.children].push(t),Ps=Be.get(),l?Be.set(l):Be.set(t),e.transition.before)if(Array.isArray(e.transition.before))for(let i=0;i<e.transition.before.length;i++)s.set(e.transition.before[i].prop,e.transition.before[i].value);else s.set(e.transition.before.prop,e.transition.before.value);let r=!1;if(n){r=!0;const i=this[C.children].splice(1,1).pop();i&&Ui(n,i,e.transition.out)}if(e.transition.in)if(Array.isArray(e.transition.in))for(let i=0;i<e.transition.in.length;i++)i===e.transition.length-1?await Qe(s,e.transition.in[i],r):Qe(s,e.transition.in[i],r);else await Qe(s,e.transition.in,r);e.announce&&(typeof e.announce=="string"&&(e.announce={message:e.announce}),Es.speak(e.announce.message,e.announce.politeness)),this.activeView=this[C.children][this[C.children].length-1]}else te.error(`Route ${o} not found`)}yo=!1,Xt=!1},Ui=async(n,o,e)=>{if(e)if(Array.isArray(e))for(let s=0;s<e.length;s++)s===e.length-1?await Qe(o[C.wrapper],e[s]):Qe(o[C.wrapper],e[s]);else await Qe(o[C.wrapper],e);if(n.options&&n.options.keepAlive===!0)As.set(n,{view:o,focus:Ps});else{for(let s=0;s<o[C.children].length;s++)o[C.children][s]=null;o.destroy(),o=null}},Qe=(n,o,e=!0)=>e?n.animate(o.prop,o.value,o):n.set(o.prop,o.value),ko=(n,o={},e={})=>{Bs=o,Ls=e,window.location.hash=`#${n}`},Ns=()=>{const n=Ms.pop();if(n){yo=!0;let o=n.path;return o.indexOf(":")>-1&&Object.keys(n.params).forEach(e=>{o=o.replace(`:${e}`,n.params[e])}),ko(o),!0}else return!1},Qt={navigate:Di,to:ko,back:Ns};let Ae=null,Rt=[],qo;const Be={_hold:!1,set hold(n){this._hold=n},get hold(){return this._hold},get(){return Ae},set(n,o){clearTimeout(qo),Ae&&Ae!==n.parent&&Ae.unfocus(),Rt.reverse().forEach(e=>e.unfocus()),n!==Ae&&(qo=setTimeout(()=>{Ae=n,Ae.lifecycle.state="focus",o instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",o)):Rt=[]},this.hold?50:0))},input(n,o){if(Xt===!0)return;Rt=Fs([Ae],n);const e=Rt.shift();e&&(e[C.inputEvents][n]?e[C.inputEvents][n].call(e,o):e[C.inputEvents].any&&e[C.inputEvents].any.call(e,o))}},Fs=(n,o)=>n[0][C.inputEvents]&&(typeof n[0][C.inputEvents][o]=="function"||typeof n[0][C.inputEvents].any=="function")?n:n[0].parent?(n.unshift(n[0].parent),Fs(n,o)):[],Xi=()=>Ne("Image",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("imageSource",o.imageSource)}],context:{}},props:["src"],computed:{imageSource(){return/^(?:https?:)?\/\//i.test(this.src)?this.src:`${window.location.protocol}//${window.location.host}/${this.src}`}}}),Wi=()=>Ne("Circle",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("color",o.color)},function(o,e,s){e[0].set("w",o.size)},function(o,e,s){e[0].set("h",o.size)},function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:o.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let Jt;const Yi=()=>Ne("RouterView",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=o.node.width*(100/100),l.height=o.node.height*(100/100),t[0].nodeId||t[0].populate(l),t},effects:[],context:{}},state(){return{activeView:null}},hooks:{ready(){Jt=()=>Qt.navigate.apply(this),Qt.navigate.apply(this),window.addEventListener("hashchange",Jt)},destroy(){window.removeEventListener("hashchange",Jt,!1)},focus(){this.activeView&&this.activeView.focus()}},input:{back(){Qt.back()}}}),Gi=()=>Ne("Sprite",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=e.w,l.h=e.h,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("texture",o.texture)},function(o,e,s){e[0].set("color",o.color)}],context:{}},props:["image","map","frame","w","h","color"],state(){return{spriteTexture:!1}},computed:{texture(){const n="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture&&n)return this[C.renderer].createTexture("SubTexture",{texture:this.spriteTexture,x:n.x,y:n.y,width:n.w,height:n.h})}},hooks:{ready(){this.spriteTexture=this[C.renderer].createTexture("ImageTexture",{src:this.image})}}}),Hi=()=>Ne("Text",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.__textnode=!0,l.fontFamily=e.font,l.letterSpacing=e.letterspacing,l.lineHeight=e._lineheight,l.stretch=e.stretch,l.contain=e._contain,l["@loaded"]=e["@loaded"]&&e["@loaded"].bind(e),l["@error"]=e["@error"]&&e["@error"].bind(e),t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("text",o.content)},function(o,e,s){e[0].set("fontSize",o.size)},function(o,e,s){e[0].set("color",o.color)},function(o,e,s){e[0].set("style",o.style)},function(o,e,s){e[0].set("weight",o.weight)},function(o,e,s){e[0].set("wordWrap",o.wordwrap)},function(o,e,s){e[0].set("maxLines",o.maxlines)},function(o,e,s){e[0].set("h",o.maxheight)},function(o,e,s){e[0].set("textAlign",o.align)},function(o,e,s){e[0].set("overflowSuffix",o.textoverflow)}],context:{}},props:["content",{key:"font",default:$e.get("defaultFont","lato")},{key:"size",cast:Number,default:32},"style","color","weight","letterspacing","stretch","align","wordwrap","maxlines","maxheight","lineheight","contain","@loaded","@error","textoverflow"],computed:{_contain(){return this.contain||(this.maxheight&&this.wordwrap?"both":this.wordwrap?"width":"none")},_lineheight(){return this.lineheight!==void 0?this.lineheight:this.size}}}),Vi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",qi=()=>Ne("FPScounter",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=15,r.x=20,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};t[2].nodeId||t[2].populate(i);const f=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[2],t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};if(c.image=e.image,c.w=43,c.h=25,c.map=e.sprite,c.frame="fps",typeof f<"u")for(let X in f.config.props)delete c[f.config.props[X]];t[3].nodeId||t[3].populate(c),o=t[3];const a={};if(a.image=e.image,a.w=43,a.h=25,a.map=e.sprite,a.frame="fps",!t[4]){const X=a.is||"Sprite";t[4]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:a},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}o=t[2],t[5]||(t[5]=this.element({parent:o||"root"},e));const d={};d.x=58,d.y=2,t[5].nodeId||t[5].populate(d);const m=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const p={};if(p.image=e.image,p.x=0,p.h=20,p.w=20,p.map=e.sprite,typeof m<"u")for(let X in m.config.props)delete p[m.config.props[X]];t[6].nodeId||t[6].populate(p),o=t[6];const h={};if(h.image=e.image,h.x=0,h.h=20,h.w=20,h.map=e.sprite,h.frame=e.fps[0],!t[7]){const X=h.is||"Sprite";t[7]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:h},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]}const y=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[5],t[8]||(t[8]=this.element({parent:o||"root"},e));const g={};if(g.image=e.image,g.x=18,g.h=20,g.w=20,g.map=e.sprite,typeof y<"u")for(let X in y.config.props)delete g[y.config.props[X]];t[8].nodeId||t[8].populate(g),o=t[8];const x={};if(x.image=e.image,x.x=18,x.h=20,x.w=20,x.map=e.sprite,x.frame=e.fps[1],!t[9]){const X=x.is||"Sprite";t[9]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:x},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]}const _=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[5],t[10]||(t[10]=this.element({parent:o||"root"},e));const S={};if(S.image=e.image,S.x=36,S.h=20,S.w=20,S.map=e.sprite,typeof _<"u")for(let X in _.config.props)delete S[_.config.props[X]];t[10].nodeId||t[10].populate(S),o=t[10];const I={};if(I.image=e.image,I.x=36,I.h=20,I.w=20,I.map=e.sprite,I.frame=e.fps[2],!t[11]){const X=I.is||"Sprite";t[11]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:I},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]}o=t[1],t[12]||(t[12]=this.element({parent:o||"root"},e));const v={};v.x=150,t[12].nodeId||t[12].populate(v);const P=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[12],t[13]||(t[13]=this.element({parent:o||"root"},e));const b={};if(b.image=e.image,b.y=2,b.w=48,b.h=25,b.map=e.sprite,b.frame="avg",typeof P<"u")for(let X in P.config.props)delete b[P.config.props[X]];t[13].nodeId||t[13].populate(b),o=t[13];const k={};if(k.image=e.image,k.y=2,k.w=48,k.h=25,k.map=e.sprite,k.frame="avg",!t[14]){const X=k.is||"Sprite";t[14]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:k},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]}o=t[12],t[15]||(t[15]=this.element({parent:o||"root"},e));const L={};L.x=63,L.y=2,t[15].nodeId||t[15].populate(L);const F=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const R={};if(R.image=e.image,R.x=0,R.h=20,R.w=20,R.map=e.sprite,typeof F<"u")for(let X in F.config.props)delete R[F.config.props[X]];t[16].nodeId||t[16].populate(R),o=t[16];const N={};if(N.image=e.image,N.x=0,N.h=20,N.w=20,N.map=e.sprite,N.frame=e.avgFps[0],!t[17]){const X=N.is||"Sprite";t[17]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:N},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]}const O=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[15],t[18]||(t[18]=this.element({parent:o||"root"},e));const $={};if($.image=e.image,$.x=18,$.h=20,$.w=20,$.map=e.sprite,typeof O<"u")for(let X in O.config.props)delete $[O.config.props[X]];t[18].nodeId||t[18].populate($),o=t[18];const B={};if(B.image=e.image,B.x=18,B.h=20,B.w=20,B.map=e.sprite,B.frame=e.avgFps[1],!t[19]){const X=B.is||"Sprite";t[19]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:B},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]}const T=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[15],t[20]||(t[20]=this.element({parent:o||"root"},e));const w={};if(w.image=e.image,w.x=36,w.h=20,w.w=20,w.map=e.sprite,typeof T<"u")for(let X in T.config.props)delete w[T.config.props[X]];t[20].nodeId||t[20].populate(w),o=t[20];const A={};if(A.image=e.image,A.x=36,A.h=20,A.w=20,A.map=e.sprite,A.frame=e.avgFps[2],!t[21]){const X=A.is||"Sprite";t[21]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:A},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]}o=t[1],t[22]||(t[22]=this.element({parent:o||"root"},e));const z={};z.x=0,z.y=40,t[22].nodeId||t[22].populate(z);const M=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[22],t[23]||(t[23]=this.element({parent:o||"root"},e));const E={};if(E.image=e.image,E.x=-2,E.w=47,E.h=25,E.map=e.sprite,E.frame="min",typeof M<"u")for(let X in M.config.props)delete E[M.config.props[X]];t[23].nodeId||t[23].populate(E),o=t[23];const Y={};if(Y.image=e.image,Y.x=-2,Y.w=47,Y.h=25,Y.map=e.sprite,Y.frame="min",!t[24]){const X=Y.is||"Sprite";t[24]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:Y},t[23],e),t[24][Symbol.for("slots")][0]?(o=t[24][Symbol.for("slots")][0],e=t[24]):o=t[24][Symbol.for("children")][0]}o=t[22],t[25]||(t[25]=this.element({parent:o||"root"},e));const D={};D.x=58,D.y=2,t[25].nodeId||t[25].populate(D);const q=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[25],t[26]||(t[26]=this.element({parent:o||"root"},e));const U={};if(U.image=e.image,U.x=0,U.h=20,U.w=20,U.map=e.sprite,typeof q<"u")for(let X in q.config.props)delete U[q.config.props[X]];t[26].nodeId||t[26].populate(U),o=t[26];const j={};if(j.image=e.image,j.x=0,j.h=20,j.w=20,j.map=e.sprite,j.frame=e.minFps[0],!t[27]){const X=j.is||"Sprite";t[27]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:j},t[26],e),t[27][Symbol.for("slots")][0]?(o=t[27][Symbol.for("slots")][0],e=t[27]):o=t[27][Symbol.for("children")][0]}const Z=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[25],t[28]||(t[28]=this.element({parent:o||"root"},e));const V={};if(V.image=e.image,V.x=18,V.h=20,V.w=20,V.map=e.sprite,typeof Z<"u")for(let X in Z.config.props)delete V[Z.config.props[X]];t[28].nodeId||t[28].populate(V),o=t[28];const Q={};if(Q.image=e.image,Q.x=18,Q.h=20,Q.w=20,Q.map=e.sprite,Q.frame=e.minFps[1],!t[29]){const X=Q.is||"Sprite";t[29]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:Q},t[28],e),t[29][Symbol.for("slots")][0]?(o=t[29][Symbol.for("slots")][0],e=t[29]):o=t[29][Symbol.for("children")][0]}const oe=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[25],t[30]||(t[30]=this.element({parent:o||"root"},e));const ee={};if(ee.image=e.image,ee.x=36,ee.h=20,ee.w=20,ee.map=e.sprite,typeof oe<"u")for(let X in oe.config.props)delete ee[oe.config.props[X]];t[30].nodeId||t[30].populate(ee),o=t[30];const K={};if(K.image=e.image,K.x=36,K.h=20,K.w=20,K.map=e.sprite,K.frame=e.minFps[2],!t[31]){const X=K.is||"Sprite";t[31]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:K},t[30],e),t[31][Symbol.for("slots")][0]?(o=t[31][Symbol.for("slots")][0],e=t[31]):o=t[31][Symbol.for("children")][0]}o=t[1],t[32]||(t[32]=this.element({parent:o||"root"},e));const de={};de.x=150,de.y=40,t[32].nodeId||t[32].populate(de);const le=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[32],t[33]||(t[33]=this.element({parent:o||"root"},e));const fe={};if(fe.image=e.image,fe.w=53,fe.h=25,fe.map=e.sprite,fe.frame="max",typeof le<"u")for(let X in le.config.props)delete fe[le.config.props[X]];t[33].nodeId||t[33].populate(fe),o=t[33];const ue={};if(ue.image=e.image,ue.w=53,ue.h=25,ue.map=e.sprite,ue.frame="max",!t[34]){const X=ue.is||"Sprite";t[34]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:ue},t[33],e),t[34][Symbol.for("slots")][0]?(o=t[34][Symbol.for("slots")][0],e=t[34]):o=t[34][Symbol.for("children")][0]}o=t[32],t[35]||(t[35]=this.element({parent:o||"root"},e));const W={};W.x=63,W.y=2,t[35].nodeId||t[35].populate(W);const ke=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[35],t[36]||(t[36]=this.element({parent:o||"root"},e));const ve={};if(ve.image=e.image,ve.x=0,ve.h=20,ve.w=20,ve.map=e.sprite,typeof ke<"u")for(let X in ke.config.props)delete ve[ke.config.props[X]];t[36].nodeId||t[36].populate(ve),o=t[36];const Te={};if(Te.image=e.image,Te.x=0,Te.h=20,Te.w=20,Te.map=e.sprite,Te.frame=e.maxFps[0],!t[37]){const X=Te.is||"Sprite";t[37]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:Te},t[36],e),t[37][Symbol.for("slots")][0]?(o=t[37][Symbol.for("slots")][0],e=t[37]):o=t[37][Symbol.for("children")][0]}const Ht=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[35],t[38]||(t[38]=this.element({parent:o||"root"},e));const Fe={};if(Fe.image=e.image,Fe.x=18,Fe.h=20,Fe.w=20,Fe.map=e.sprite,typeof Ht<"u")for(let X in Ht.config.props)delete Fe[Ht.config.props[X]];t[38].nodeId||t[38].populate(Fe),o=t[38];const Re={};if(Re.image=e.image,Re.x=18,Re.h=20,Re.w=20,Re.map=e.sprite,Re.frame=e.maxFps[1],!t[39]){const X=Re.is||"Sprite";t[39]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:Re},t[38],e),t[39][Symbol.for("slots")][0]?(o=t[39][Symbol.for("slots")][0],e=t[39]):o=t[39][Symbol.for("children")][0]}const Vt=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[35],t[40]||(t[40]=this.element({parent:o||"root"},e));const ze={};if(ze.image=e.image,ze.x=36,ze.h=20,ze.w=20,ze.map=e.sprite,typeof Vt<"u")for(let X in Vt.config.props)delete ze[Vt.config.props[X]];t[40].nodeId||t[40].populate(ze),o=t[40];const Ee={};if(Ee.image=e.image,Ee.x=36,Ee.h=20,Ee.w=20,Ee.map=e.sprite,Ee.frame=e.maxFps[2],!t[41]){const X=Ee.is||"Sprite";t[41]=(s.components&&s.components[X]||e[Symbol.for("components")][X]||(()=>{console.error("component Sprite not found")})).call(null,{props:Ee},t[40],e),t[41][Symbol.for("slots")][0]?(o=t[41][Symbol.for("slots")][0],e=t[41]):o=t[41][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[6].set("frame",o.fps[0])},function(o,e,s){e[7][Symbol.for("props")].frame=o.fps[0]},function(o,e,s){e[8].set("frame",o.fps[1])},function(o,e,s){e[9][Symbol.for("props")].frame=o.fps[1]},function(o,e,s){e[10].set("frame",o.fps[2])},function(o,e,s){e[11][Symbol.for("props")].frame=o.fps[2]},function(o,e,s){e[16].set("frame",o.avgFps[0])},function(o,e,s){e[17][Symbol.for("props")].frame=o.avgFps[0]},function(o,e,s){e[18].set("frame",o.avgFps[1])},function(o,e,s){e[19][Symbol.for("props")].frame=o.avgFps[1]},function(o,e,s){e[20].set("frame",o.avgFps[2])},function(o,e,s){e[21][Symbol.for("props")].frame=o.avgFps[2]},function(o,e,s){e[26].set("frame",o.minFps[0])},function(o,e,s){e[27][Symbol.for("props")].frame=o.minFps[0]},function(o,e,s){e[28].set("frame",o.minFps[1])},function(o,e,s){e[29][Symbol.for("props")].frame=o.minFps[1]},function(o,e,s){e[30].set("frame",o.minFps[2])},function(o,e,s){e[31][Symbol.for("props")].frame=o.minFps[2]},function(o,e,s){e[36].set("frame",o.maxFps[0])},function(o,e,s){e[37][Symbol.for("props")].frame=o.maxFps[0]},function(o,e,s){e[38].set("frame",o.maxFps[1])},function(o,e,s){e[39][Symbol.for("props")].frame=o.maxFps[1]},function(o,e,s){e[40].set("frame",o.maxFps[2])},function(o,e,s){e[41][Symbol.for("props")].frame=o.maxFps[2]}],context:{}},state(){return{image:Vi,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){let n=1e4,o=0,e=0,s=0,t=0;we.on("fpsUpdate",(l,{fps:r})=>{n=Math.min(r,n),o=Math.max(r,o),s+=r,t++,e=Math.round(s/t),this.fps=r.toString().padStart(3,"0"),this.avgFps=e.toString().padStart(3,"0"),this.minFps=n.toString().padStart(3,"0"),this.maxFps=o.toString().padStart(3,"0")})}}}),Et=new Map,eo={registerListener(n,o,e){let s=Et.get(o);s||(s=new Map,Et.set(o,s));let t=s.get(n);t||(t=new Set,s.set(n,t)),t.add(e)},executeListeners(n,o){const e=Et.get(n);e&&e.forEach(s=>{s.forEach(t=>{t(o)})})},removeListeners(n){Et.forEach(o=>{const e=o.get(n);e&&(e.clear(),o.delete(e))})}},ji={rounded:"radius"},Ki=(n,o,e)=>{Object.defineProperties(n.prototype,{name:{value:o,writable:!1,enumerable:!0,configurable:!1},[C.identifier]:{value:n[C.identifier],writable:!1,enumerable:!1,configurable:!1},focus:{value:function(s){this[C.state].hasFocus=!0,Be.set(this,s)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[C.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.lifecycle.state="destroy",this.$clearTimeouts(),this.$clearIntervals(),eo.removeListeners(this),zs(this[C.children]),te.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},select:{value:function(s){let t=null;return this[C.children].forEach(l=>{Array.isArray(l)?l.forEach(r=>{r.ref===s&&(t=r)}):Object.getPrototypeOf(l)===Object.prototype?Object.keys(l).forEach(r=>{l[r].ref===s&&(t=l[r])}):l.ref===s&&(t=l)}),t},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(s,t){const l=ji[s]||s,r=we.driver.stage.shManager.getRegisteredEffects();if(l in r)return{type:l,props:t};te.error(`Shader ${s} not found`)},writable:!1,enumerable:!1,configurable:!1},$router:{value:{to:ko,back:Ns,get currentRoute(){return _o},get routes(){return n.prototype[C.routes]},get navigating(){return Xt}},writable:!1,enumerable:!0,configurable:!1},[C.components]:{value:{Image:Xi(),Circle:Wi(),RouterView:Yi(),Sprite:Gi(),Text:Hi(),FPScounter:qi()},writable:!1,enumerable:!1,configurable:!1},$setTimeout:{value:function(s,t,...l){const r=setTimeout(()=>{this[C.timeouts]=this[C.timeouts].filter(i=>i!==r),s.apply(null,l)},t,l);return this[C.timeouts].push(r),r},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(s){this[C.timeouts].indexOf(s)>-1&&(this[C.timeouts]=this[C.timeouts].filter(t=>t!==s),clearTimeout(s))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let s=0;s<this[C.timeouts].length;s++)clearTimeout(this[C.timeouts][s]);this[C.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(s,t,...l){const r=setInterval(()=>s.apply(null,l),t,l);return this[C.intervals].push(r),r},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(s){this[C.intervals].indexOf(s)>-1&&(this[C.intervals]=this[C.intervals].filter(t=>t!==s),clearInterval(s))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let s=0;s<this[C.intervals].length;s++)clearInterval(this[C.intervals][s]);this[C.intervals]=[]},writable:!1,enumerable:!0,configurable:!1},$emit:{value:function(s,t){eo.executeListeners(s,t)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(s,t){eo.registerListener(this,s,t)},writable:!1,enumerable:!0,configurable:!1},[C.renderer]:{value:we,writable:!1,enumerable:!1,configurable:!1},$log:{value:ns("App"),writable:!1,enumerable:!1,configurable:!1},$trigger:{value:function(s){mt(this[C.originalState],s,!0)},writable:!1,enumerable:!1,configurable:!1},$announcer:{value:Es,writable:!1,enumerable:!1,configurable:!1}})},zs=function(n){for(let o=0;o<n.length;o++){if(!n[o])return;Array.isArray(n[o])?zs(n[o]):n[o].destroy&&n[o].destroy(),n[o]=null}n.length=0},Zi={cast:n=>n,required:!1},Qi=(n,o=[])=>{o.indexOf("ref")===-1&&o.push("ref"),n[C.propKeys]=[],o.forEach(e=>{e={...Zi,...typeof e=="object"?e:{key:e}},n[C.propKeys].push(e.key),Object.defineProperty(n.prototype,e.key,{get(){const s=e.cast(this[C.props]&&e.key in this[C.props]?this[C.props][e.key]:e.default||void 0);return e.required&&s===void 0&&te.warn(`${e.key} is required`),s},set(s){te.warn(`Warning! Avoid mutating props directly (${e.key})`),this[C.props][e.key]=s}})})},Ji=(n,o)=>{n[C.methodKeys]=[];for(let e in o)n[C.propKeys]&&n[C.propKeys].indexOf(e)>-1?te.error(`${e} already exists as a prop`):(typeof o[e]!="function"&&te.warn(`${e} is not a function`),n[C.methodKeys].push(e),n.prototype[e]=o[e])},er=(n,o)=>{n[C.stateKeys]=[],o={...o.apply(n.prototype),hasFocus:!1},Object.keys(o).forEach(e=>{n[C.propKeys]&&n[C.propKeys].indexOf(e)>-1&&te.error(`State ${e} already exists as a prop`),n[C.methodKeys]&&n[C.methodKeys].indexOf(e)>-1&&te.error(`State ${e} already exists as a method`),n[C.stateKeys].push(e);try{Object.defineProperty(n.prototype,e,{get(){return this[C.state]&&e in this[C.state]&&this[C.state][e]},set(s){this[C.state]&&(this[C.state][e]=s)}})}catch(s){te.error(s)}})},tr=(n,o)=>{n[C.computedKeys]=[];for(let e in o)n[C.stateKeys]&&n[C.stateKeys].indexOf(e)>-1?te.error(`${e} already exists as a prop`):n[C.propKeys]&&n[C.propKeys].indexOf(e)>-1?te.error(`${e} already exists as a prop`):n[C.methodKeys]&&n[C.methodKeys].indexOf(e)>-1?te.error(`${e} already exists as a method`):(typeof o[e]!="function"&&te.warn(`${e} is not a function`),n[C.computedKeys].push(e),Object.defineProperty(n.prototype,e,{get(){return o[e].apply(this)}}))},or=(n,o)=>{n.prototype[C.inputEvents]=[],Object.keys(o).forEach(e=>{typeof o[e]!="function"&&te.warn(`${o[e]} is not a function`),n.prototype[C.inputEvents][e]=o[e]})},sr=(n,o)=>{n.prototype[C.routes]=[],Object.keys(o).forEach(e=>{n.prototype[C.routes][e]={...o[e],options:{inHistory:!0,...o[e].options}}})},nr=(n,o)=>{n.prototype[C.watchKeys]=[],n.prototype[C.watchers]={};for(let e in o)typeof o[e]!="function"&&console.warn(`${e} is not a function`),n.prototype[C.watchKeys].push(e),n.prototype[C.watchers][e]=function(s,t){o[e].call(this,s,t)}},ir=["init","ready","focus","unfocus","destroy"],rr={previous:null,current:null,get state(){return this.current},set state(n){ir.indexOf(n)>-1&&(n!==this.current||n==="focus")&&(te.debug(`Setting lifecycle state from ${this.current} to ${n} for ${this.component.componentId}`),this.previous=this.current,this.current=n,_i(n,this.component[C.identifier],this.component),vs(n,this.component[C.identifier],this.component))}};let lr=0;const jo={element:Cs},Ko=n=>{throw new Error(`Parameter ${n} is required`)},Ne=(n=Ko("name"),o=Ko("config"))=>{const e=l=>{o.code||(te.debug(`Generating code for ${n} component`),o.code=js.call(o,qs(o.template,n,l))),s[C.identifier]=++lr,Ki(s,n),ki(o.hooks,s[C.identifier]),Qi(s,o.props),o.methods&&Ji(s,o.methods),o.state&&er(s,o.state),o.computed&&tr(s,o.computed),o.watch&&nr(s,o.watch),o.routes&&sr(s,o.routes),o.input&&or(s,o.input),s.setup=!0},s=function(l,r,i){this.lifecycle=Object.assign(Object.create(rr),{component:this,previous:null,current:null}),s.setup||e(i),o.hooks&&o.hooks.frameTick&&we.on("frameTick",(f,c)=>vs("frameTick",s[C.identifier],this,[c])),this.parent=i,this[C.wrapper]=r,Object.defineProperties(this,{componentId:{value:vi(n),writable:!1,enumerable:!0,configurable:!1},[C.id]:{value:Ii(),writable:!1,enumerable:!1,configurable:!1},[C.props]:{value:Yo(l.props||{},$e.get("reactivityMode")),writable:!1,enumerable:!1,configurable:!1},[C.timeouts]:{value:[],writable:!0,enumerable:!1,configurable:!1},[C.intervals]:{value:[],writable:!0,enumerable:!1,configurable:!1}}),Object.defineProperty(this,C.originalState,{value:{...o.state&&typeof o.state=="function"&&o.state.apply(this)||{},hasFocus:!1},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,C.state,{value:Yo(this[C.originalState],$e.get("reactivityMode")),writable:!1,enumerable:!1,configurable:!1}),this.lifecycle.state="init",Object.defineProperty(this,C.children,{value:o.code.render.apply(jo,[r,this,o]),writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,C.slots,{value:this[C.children].filter(f=>f[C.isSlot]),writable:!1,enumerable:!1,configurable:!1}),o.code.effects.forEach(f=>{Wo(()=>{f.apply(jo,[this,this[C.children],o])})}),this[C.watchers]&&Object.keys(this[C.watchers]).forEach(f=>{let c=this[f];Wo((a=!1)=>{(c!==this[f]||a===!0)&&(this[C.watchers][f].apply(this,[this[f],c]),c=this[f])})}),setTimeout(()=>this.lifecycle.state="ready")},t=(l={},r,i)=>new s(l,r,i);return t.config=o,t},fr=n=>{const o={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};n.hooks=n.hooks||{};let e,s,t;return n.hooks[C.destroy]=function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",s)},n.hooks[C.init]=function(){const l={...o,...$e.get("keymap",{})};e=r=>{const i=l[r.key]||l[r.keyCode]||r.key||r.keyCode;Be.input(i,r),clearTimeout(t),t=setTimeout(()=>{Be.hold=!0},50)},s=()=>{clearTimeout(t),Be.hold=!1},document.addEventListener("keydown",e),document.addEventListener("keyup",s),setTimeout(()=>Be.set(this))},Ne("App",n)},H={Component:Ne,Application:fr,Launch:bi},ar=n=>new URLSearchParams(window.location.search).get(n),tt={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||ar("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}}},cr=()=>{let n={};return Object.keys(tt).forEach(o=>{if(tt[o].test&&typeof tt[o].test=="function"&&tt[o].test()===!0){n=tt[o].mapping;return}}),n},dr=H.Component("PortalItem",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=370,l.h=320,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.x=30,i.y=30,i.size=84,typeof r<"u")for(let y in r.config.props)delete i[r.config.props[y]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.x=30,f.y=30,f.content=e.number,f.size=84,f.color=e.fontColor,!t[2]){const y=f.is||"Text";t[2]=(s.components&&s.components[y]||e[Symbol.for("components")][y]||(()=>{console.error("component Text not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}const c=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.x=30,a.y=140,a.size=42,a.font="raleway",a.letterspacing=2,typeof c<"u")for(let y in c.config.props)delete a[c.config.props[y]];t[3].nodeId||t[3].populate(a),o=t[3];const d={};if(d.x=30,d.y=140,d.content=e.title,d.size=42,d.font="raleway",d.color=e.fontColor,d.letterspacing=2,!t[4]){const y=d.is||"Text";t[4]=(s.components&&s.components[y]||e[Symbol.for("components")][y]||(()=>{console.error("component Text not found")})).call(null,{props:d},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}const m=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.x=30,p.y=200,p.wordwrap=300,p.size=28,p.lineheight=32,typeof m<"u")for(let y in m.config.props)delete p[m.config.props[y]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};if(h.x=30,h.y=200,h.content=e.description,h.wordwrap=300,h.size=28,h.color=e.fontColor,h.lineheight=32,!t[6]){const y=h.is||"Text";t[6]=(s.components&&s.components[y]||e[Symbol.for("components")][y]||(()=>{console.error("component Text not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[0].set("scale",{transition:o.hasFocus?1.1:1})},function(o,e,s){e[0].set("color",o.backgroundColor)},function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:6})])},function(o,e,s){e[1].set("content",o.number)},function(o,e,s){e[1].set("color",o.fontColor)},function(o,e,s){e[2][Symbol.for("props")].content=o.number},function(o,e,s){e[2][Symbol.for("props")].color=o.fontColor},function(o,e,s){e[3].set("content",o.title)},function(o,e,s){e[3].set("color",o.fontColor)},function(o,e,s){e[4][Symbol.for("props")].content=o.title},function(o,e,s){e[4][Symbol.for("props")].color=o.fontColor},function(o,e,s){e[5].set("content",o.description)},function(o,e,s){e[5].set("color",o.fontColor)},function(o,e,s){e[6][Symbol.for("props")].content=o.description},function(o,e,s){e[6][Symbol.for("props")].color=o.fontColor}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),ur=H.Component("PortalRow",{components:{PortalItem:dr},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};t[1].nodeId||t[1].populate(r);const i=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.content=e.title,f.x=60,typeof i<"u")for(let m in i.config.props)delete f[i.config.props[m]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};if(c.content=e.title,c.x=60,!t[3]){const m=c.is||"Text";t[3]=(s.components&&s.components[m]||e[Symbol.for("components")][m]||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]}o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};a.y=50,a.x=60,a.h=1,a.w=1800,a.color="0xe8d7f9ff",t[4].nodeId||t[4].populate(a),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const d={};return d.y=100,t[5].nodeId||t[5].populate(d),t},effects:[function(o,e,s){e[1].set("alpha",{transition:{value:o.itemOffset<240?1:0,duration:200}})},function(o,e,s){e[5].set("x",{transition:o.rowOffset})},function(o,e,s){parent=e[5];const t=o.items||[],l=[];for(let r=0;r<t.length;r++){parent=e[5],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.item.id.toString());const f=s.components&&s.components.PortalItem||o[Symbol.for("components")].PortalItem;e[6]=e[6]||{},e[6][i.item.id]||(e[6][i.item.id]=this.element({parent:parent||"root"},o));const c={};if(c.title=i.item.title,c.description=i.item.description,c.id=i.item.id,c.index=i.index,c.key=i.item.id,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[6][i.item.id].nodeId||e[6][i.item.id].populate(c),e[7]=e[7]||{},parent=e[6][i.item.id];const a={};if(a.x={transition:{value:i.itemOffset+i.index*430,delay:50*(i.index%4),duration:500}},a.title=i.item.title,a.description=i.item.description,a.id=i.item.id,a.index=i.index,a.ref="item"+i.index,a.key=i.item.id,!e[7][i.item.id]){const d=a.is||"PortalItem";e[7][i.item.id]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component PortalItem not found")})).call(null,{props:a},e[6][i.item.id],o),e[7][i.item.id][Symbol.for("slots")][0]?(parent=e[7][i.item.id][Symbol.for("slots")][0],o=e[7][i.item.id]):parent=e[7][i.item.id][Symbol.for("children")][0]}e[6][i.item.id].set("x",{transition:{value:i.itemOffset+i.index*430,delay:50*(i.index%4),duration:500}}),e[6][i.item.id].set("ref","item"+i.index),e[7][i.item.id][Symbol.for("props")].x={transition:{value:i.itemOffset+i.index*430,delay:50*(i.index%4),duration:500}},e[7][i.item.id][Symbol.for("props")].ref="item"+i.index}e[6]&&Object.keys(e[6]).forEach(r=>{l.indexOf(r)===-1&&(e[6][r].destroy&&e[6][r].destroy(),delete e[1][r])})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(n){const o=this.select(`item${n}`);o&&o.focus&&(o.focus(),n<1?this.rowOffset=60:n>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-n*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),hr="@lightningjs/blits-example-app",pr="0.9.4",mr="Lightning 3 Blits Example App",yr="index.js",gr="module",xr={start:"npm run dev","start:test":"NODE_ENV=testing npm run dev",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",build:"vite build",dev:"vite dev --host",test:"NODE_ENV=testing backstop --config=backstop.cjs test","test:reference":"NODE_ENV=testing backstop --config=backstop.cjs reference"},br={hooks:{"pre-commit":"lint-staged"}},Sr="Michiel van der Geest <hello@michielvandergeest.com>",wr="Apache-2",Tr={backstopjs:"^6.3.22",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0",husky:"^7.0.4","lint-staged":"^12.3.3",playwright:"^1.41.0",prettier:"^2.5.1",vite:"^4.0.4"},Cr={"@lightningjs/blits":"^0.9.2"},vr={name:hr,version:pr,description:mr,main:yr,type:gr,scripts:xr,"lint-staged":{"*.js":["eslint --fix"]},husky:br,author:Sr,license:wr,devDependencies:Tr,dependencies:Cr},Ir=H.Component("Portal",{components:{PortalRow:ur},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,l.color="{top: '0x44037aff', bottom: '0x240244ff'}",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.mount="{y: 0.5}",i.h=500,i.title="Demos",i.items=e.demo,i.ref="row0",typeof r<"u")for(let R in r.config.props)delete i[r.config.props[R]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.mount="{y: 0.5}",f.h=500,f.y={transition:-e.rowFocused*420+550},f.title="Demos",f.items=e.demo,f.ref="row0",!t[2]){const R=f.is||"PortalRow";t[2]=(s.components&&s.components[R]||e[Symbol.for("components")][R]||(()=>{console.error("component PortalRow not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}const c=s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.mount="{y: 0.5}",a.h=500,a.title="Examples and tests",a.items=e.example,a.ref="row1",typeof c<"u")for(let R in c.config.props)delete a[c.config.props[R]];t[3].nodeId||t[3].populate(a),o=t[3];const d={};if(d.mount="{y: 0.5}",d.h=500,d.y={transition:-e.rowFocused*420+1100},d.title="Examples and tests",d.items=e.example,d.ref="row1",!t[4]){const R=d.is||"PortalRow";t[4]=(s.components&&s.components[R]||e[Symbol.for("components")][R]||(()=>{console.error("component PortalRow not found")})).call(null,{props:d},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}const m=s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.mount="{y: 0.5}",p.h=500,p.title="Benchmarks and stress tests",p.items=e.benchmark,p.ref="row2",typeof m<"u")for(let R in m.config.props)delete p[m.config.props[R]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};if(h.mount="{y: 0.5}",h.h=500,h.y={transition:-e.rowFocused*420+1650},h.title="Benchmarks and stress tests",h.items=e.benchmark,h.ref="row2",!t[6]){const R=h.is||"PortalRow";t[6]=(s.components&&s.components[R]||e[Symbol.for("components")][R]||(()=>{console.error("component PortalRow not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]}o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const y={};y.w=1920,y.h=200,y.color="0x44037aff",t[7].nodeId||t[7].populate(y),o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const g={};g.w=1920,g.h=70,g.y=200,g.color="{top: '0x44037aff'}",t[8].nodeId||t[8].populate(g),o=t[7],t[9]||(t[9]=this.element({parent:o||"root"},e));const x={};t[9].nodeId||t[9].populate(x),o=t[9],t[10]||(t[10]=this.element({parent:o||"root"},e));const _={};_.src="assets/blits-logo-full.png",_.w=200,_.h=112,_.x=60,t[10].nodeId||t[10].populate(_),o=t[9],t[11]||(t[11]=this.element({parent:o||"root"},e));const S={};S.w=2,S.h=120,S.y=-10,S.color="0xffffff80",S.x=300,t[11].nodeId||t[11].populate(S),o=t[9],t[12]||(t[12]=this.element({parent:o||"root"},e));const I={};I.x=320,I.y=16,t[12].nodeId||t[12].populate(I);const v=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[12],t[13]||(t[13]=this.element({parent:o||"root"},e));const P={};if(P.y=0,P.size=36,P.content="Example App",typeof v<"u")for(let R in v.config.props)delete P[v.config.props[R]];t[13].nodeId||t[13].populate(P),o=t[13];const b={};if(b.y=0,b.size=36,b.content="Example App",!t[14]){const R=b.is||"Text";t[14]=(s.components&&s.components[R]||e[Symbol.for("components")][R]||(()=>{console.error("component Text not found")})).call(null,{props:b},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]}const k=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[12],t[15]||(t[15]=this.element({parent:o||"root"},e));const L={};if(L.y=50,L.size=24,L.content="v"+e.version,typeof k<"u")for(let R in k.config.props)delete L[k.config.props[R]];t[15].nodeId||t[15].populate(L),o=t[15];const F={};if(F.y=50,F.size=24,F.content="v"+e.version,!t[16]){const R=F.is||"Text";t[16]=(s.components&&s.components[R]||e[Symbol.for("components")][R]||(()=>{console.error("component Text not found")})).call(null,{props:F},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[1].set("y",{transition:-o.rowFocused*420+550})},function(o,e,s){e[2][Symbol.for("props")].y={transition:-o.rowFocused*420+550}},function(o,e,s){e[3].set("y",{transition:-o.rowFocused*420+1100})},function(o,e,s){e[4][Symbol.for("props")].y={transition:-o.rowFocused*420+1100}},function(o,e,s){e[5].set("y",{transition:-o.rowFocused*420+1650})},function(o,e,s){e[6][Symbol.for("props")].y={transition:-o.rowFocused*420+1650}},function(o,e,s){e[9].set("y",{transition:{value:80-o.logoOffset,duration:400}})}],context:{}},state(){return{version:vr.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0,this.$trigger("rowFocused"),console.log("backstopjs:ready")}},watch:{rowFocused(n){const o=this.select(`row${n}`);o&&o.focus&&o.focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),_r=H.Component("Letter",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=e.w,r.color="0xe6e6e6ff",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.w=e.w,i.h=280,t[2].nodeId||t[2].populate(i),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};return f.w=e.w,f.color="0xe6e6e6ff",t[3].nodeId||t[3].populate(f),t},effects:[function(o,e,s){e[1].set("h",{transition:{value:410+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,e,s){e[2].set("src",o.image)},function(o,e,s){e[2].set("y",{transition:{value:400+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,e,s){e[3].set("h",{transition:{value:500-o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,e,s){e[3].set("y",{transition:{value:660+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingeasing:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),kr=H.Component("Intro",{components:{Letter:_r},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,l.src="assets/background.jpg",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.letter="l",i.w=294,typeof r<"u")for(let w in r.config.props)delete i[r.config.props[w]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.letter="l",f.w=294,!t[2]){const w=f.is||"Letter";t[2]=(s.components&&s.components[w]||e[Symbol.for("components")][w]||(()=>{console.error("component Letter not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}const c=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.letter="i-1",a.w=128,a.x=294,a.direction="up",a.delay=50,typeof c<"u")for(let w in c.config.props)delete a[c.config.props[w]];t[3].nodeId||t[3].populate(a),o=t[3];const d={};if(d.letter="i-1",d.w=128,d.x=294,d.direction="up",d.delay=50,!t[4]){const w=d.is||"Letter";t[4]=(s.components&&s.components[w]||e[Symbol.for("components")][w]||(()=>{console.error("component Letter not found")})).call(null,{props:d},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}const m=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.letter="g-1",p.w=205,p.x=422,p.delay=100,typeof m<"u")for(let w in m.config.props)delete p[m.config.props[w]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};if(h.letter="g-1",h.w=205,h.x=422,h.delay=100,!t[6]){const w=h.is||"Letter";t[6]=(s.components&&s.components[w]||e[Symbol.for("components")][w]||(()=>{console.error("component Letter not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]}const y=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};if(g.letter="h",g.w=224,g.x=627,g.direction="up",g.delay=150,typeof y<"u")for(let w in y.config.props)delete g[y.config.props[w]];t[7].nodeId||t[7].populate(g),o=t[7];const x={};if(x.letter="h",x.w=224,x.x=627,x.direction="up",x.delay=150,!t[8]){const w=x.is||"Letter";t[8]=(s.components&&s.components[w]||e[Symbol.for("components")][w]||(()=>{console.error("component Letter not found")})).call(null,{props:x},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]}const _=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const S={};if(S.letter="t",S.w=190,S.x=851,S.delay=200,typeof _<"u")for(let w in _.config.props)delete S[_.config.props[w]];t[9].nodeId||t[9].populate(S),o=t[9];const I={};if(I.letter="t",I.w=190,I.x=851,I.delay=200,!t[10]){const w=I.is||"Letter";t[10]=(s.components&&s.components[w]||e[Symbol.for("components")][w]||(()=>{console.error("component Letter not found")})).call(null,{props:I},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]}const v=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const P={};if(P.letter="n-1",P.w=221,P.x=1041,P.direction="up",P.delay=250,typeof v<"u")for(let w in v.config.props)delete P[v.config.props[w]];t[11].nodeId||t[11].populate(P),o=t[11];const b={};if(b.letter="n-1",b.w=221,b.x=1041,b.direction="up",b.delay=250,!t[12]){const w=b.is||"Letter";t[12]=(s.components&&s.components[w]||e[Symbol.for("components")][w]||(()=>{console.error("component Letter not found")})).call(null,{props:b},t[11],e),t[12][Symbol.for("slots")][0]?(o=t[12][Symbol.for("slots")][0],e=t[12]):o=t[12][Symbol.for("children")][0]}const k=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const L={};if(L.letter="i-2",L.w=115,L.x=1262,L.delay=300,typeof k<"u")for(let w in k.config.props)delete L[k.config.props[w]];t[13].nodeId||t[13].populate(L),o=t[13];const F={};if(F.letter="i-2",F.w=115,F.x=1262,F.delay=300,!t[14]){const w=F.is||"Letter";t[14]=(s.components&&s.components[w]||e[Symbol.for("components")][w]||(()=>{console.error("component Letter not found")})).call(null,{props:F},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]}const R=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const N={};if(N.letter="n-2",N.w=219,N.x=1377,N.direction="up",N.delay=350,typeof R<"u")for(let w in R.config.props)delete N[R.config.props[w]];t[15].nodeId||t[15].populate(N),o=t[15];const O={};if(O.letter="n-2",O.w=219,O.x=1377,O.direction="up",O.delay=350,!t[16]){const w=O.is||"Letter";t[16]=(s.components&&s.components[w]||e[Symbol.for("components")][w]||(()=>{console.error("component Letter not found")})).call(null,{props:O},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]}const $=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const B={};if(B.letter="g-2",B.w=324,B.x=1596,B.direction="up",B.delay=400,typeof $<"u")for(let w in $.config.props)delete B[$.config.props[w]];t[17].nodeId||t[17].populate(B),o=t[17];const T={};if(T.letter="g-2",T.w=324,T.x=1596,T.direction="up",T.delay=400,!t[18]){const w=T.is||"Letter";t[18]=(s.components&&s.components[w]||e[Symbol.for("components")][w]||(()=>{console.error("component Letter not found")})).call(null,{props:T},t[17],e),t[18][Symbol.for("slots")][0]?(o=t[18][Symbol.for("slots")][0],e=t[18]):o=t[18][Symbol.for("children")][0]}return t},effects:[],context:{}}}),Rr=H.Component("Toggle",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=100,l.h=50,l.y=5,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Circle||e[Symbol.for("components")].Circle;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.size=50,typeof r<"u")for(let c in r.config.props)delete i[r.config.props[c]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.x={transition:e.on?0:50},f.size=50,f.color=e.primaryColor,!t[2]){const c=f.is||"Circle";t[2]=(s.components&&s.components[c]||e[Symbol.for("components")][c]||(()=>{console.error("component Circle not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[0].set("color",o.bgColor)},function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:25})])},function(o,e,s){e[1].set("x",{transition:o.on?0:50})},function(o,e,s){e[1].set("color",o.primaryColor)},function(o,e,s){e[2][Symbol.for("props")].x={transition:o.on?0:50}},function(o,e,s){e[2][Symbol.for("props")].color=o.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),Er=H.Component("Bar",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};return t[1].nodeId||t[1].populate(r),t},effects:[function(o,e,s){e[0].set("w",{value:o.w,duration:o.duration})},function(o,e,s){e[0].set("h",{value:o.h,duration:o.duration})},function(o,e,s){e[0].set("color",o.bgColor)},function(o,e,s){e[0].set("x",o.index*(o.w+o.w/4))},function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:10})])},function(o,e,s){e[1].set("w",o.w)},function(o,e,s){e[1].set("y",{transition:{value:o.h-o.innerH,duration:o.duration}})},function(o,e,s){e[1].set("h",{transition:{value:o.innerH,duration:o.duration}})},function(o,e,s){e[1].set("color",o.primaryColor)},function(o,e,s){e[1].set("effects",[o.shader("radius",{radius:10})])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),Ar={color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"},Mr={color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},Lr=H.Component("Theming",{components:{Bar:Er,Toggle:Rr},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.y=1020,i.x=1160,i.size=28,i.content='Use "up", "down", "left" and "right" to change the appearance',typeof r<"u")for(let D in r.config.props)delete i[r.config.props[D]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.y=1020,f.x=1160,f.size=28,f.color=e.colors.color4,f.content='Use "up", "down", "left" and "right" to change the appearance',!t[2]){const D=f.is||"Text";t[2]=(s.components&&s.components[D]||e[Symbol.for("components")][D]||(()=>{console.error("component Text not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};t[3].nodeId||t[3].populate(c),o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};a.x=-250,a.y=-100,a.src="assets/shadow.png",a.w=1e3,a.h=900,a.alpha=.5,t[4].nodeId||t[4].populate(a),o=t[3],t[5]||(t[5]=this.element({parent:o||"root"},e));const d={};t[5].nodeId||t[5].populate(d),o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const m={};m.h=100,t[6].nodeId||t[6].populate(m),o=t[5],t[7]||(t[7]=this.element({parent:o||"root"},e));const p={};p.h=80,p.y=20,t[7].nodeId||t[7].populate(p);const h=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[5],t[8]||(t[8]=this.element({parent:o||"root"},e));const y={};if(y.size=28,y.x=20,y.y=14,typeof h<"u")for(let D in h.config.props)delete y[h.config.props[D]];t[8].nodeId||t[8].populate(y),o=t[8];const g={};if(g.content=e.text,g.color=e.colors.color3,g.size=28,g.x=20,g.y=14,!t[9]){const D=g.is||"Text";t[9]=(s.components&&s.components[D]||e[Symbol.for("components")][D]||(()=>{console.error("component Text not found")})).call(null,{props:g},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]}const x=s.components&&s.components.Toggle||e[Symbol.for("components")].Toggle;o=t[5],t[10]||(t[10]=this.element({parent:o||"root"},e));const _={};if(_.primaryColor="#22c55e",typeof x<"u")for(let D in x.config.props)delete _[x.config.props[D]];t[10].nodeId||t[10].populate(_),o=t[10];const S={};if(S.x={transition:e.width-120},S.on=e.mode==="dark",S.bgColor=e.colors.color1,S.primaryColor="#22c55e",!t[11]){const D=S.is||"Toggle";t[11]=(s.components&&s.components[D]||e[Symbol.for("components")][D]||(()=>{console.error("component Toggle not found")})).call(null,{props:S},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]}o=t[3],t[12]||(t[12]=this.element({parent:o||"root"},e));const I={};I.w=200,I.x=25,I.y=140,t[12].nodeId||t[12].populate(I),o=t[3],t[13]||(t[13]=this.element({parent:o||"root"},e));const v={};v.x=270,t[13].nodeId||t[13].populate(v),o=t[3],t[14]||(t[14]=this.element({parent:o||"root"},e));const P={};P.color="0x00000000",t[14].nodeId||t[14].populate(P),o=t[14],t[15]||(t[15]=this.element({parent:o||"root"},e));const b={};t[15].nodeId||t[15].populate(b);const k=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const L={};if(L.height=100,L.index=0,typeof k<"u")for(let D in k.config.props)delete L[k.config.props[D]];t[16].nodeId||t[16].populate(L),o=t[16];const F={};if(F.bgColor=e.colors.color2,F.primaryColor=e.colors.color4,F.size=e.graph.size,F.height=100,F.index=0,!t[17]){const D=F.is||"Bar";t[17]=(s.components&&s.components[D]||e[Symbol.for("components")][D]||(()=>{console.error("component Bar not found")})).call(null,{props:F},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]}const R=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[18]||(t[18]=this.element({parent:o||"root"},e));const N={};if(N.height=140,N.index=1,typeof R<"u")for(let D in R.config.props)delete N[R.config.props[D]];t[18].nodeId||t[18].populate(N),o=t[18];const O={};if(O.bgColor=e.colors.color2,O.primaryColor=e.colors.color4,O.size=e.graph.size,O.height=140,O.index=1,!t[19]){const D=O.is||"Bar";t[19]=(s.components&&s.components[D]||e[Symbol.for("components")][D]||(()=>{console.error("component Bar not found")})).call(null,{props:O},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]}const $=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[20]||(t[20]=this.element({parent:o||"root"},e));const B={};if(B.height=170,B.index=2,typeof $<"u")for(let D in $.config.props)delete B[$.config.props[D]];t[20].nodeId||t[20].populate(B),o=t[20];const T={};if(T.bgColor=e.colors.color2,T.primaryColor=e.colors.color4,T.size=e.graph.size,T.height=170,T.index=2,!t[21]){const D=T.is||"Bar";t[21]=(s.components&&s.components[D]||e[Symbol.for("components")][D]||(()=>{console.error("component Bar not found")})).call(null,{props:T},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]}const w=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[22]||(t[22]=this.element({parent:o||"root"},e));const A={};if(A.height=150,A.index=3,typeof w<"u")for(let D in w.config.props)delete A[w.config.props[D]];t[22].nodeId||t[22].populate(A),o=t[22];const z={};if(z.bgColor=e.colors.color2,z.primaryColor=e.colors.color4,z.size=e.graph.size,z.height=150,z.index=3,!t[23]){const D=z.is||"Bar";t[23]=(s.components&&s.components[D]||e[Symbol.for("components")][D]||(()=>{console.error("component Bar not found")})).call(null,{props:z},t[22],e),t[23][Symbol.for("slots")][0]?(o=t[23][Symbol.for("slots")][0],e=t[23]):o=t[23][Symbol.for("children")][0]}const M=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[24]||(t[24]=this.element({parent:o||"root"},e));const E={};if(E.height=90,E.index=4,typeof M<"u")for(let D in M.config.props)delete E[M.config.props[D]];t[24].nodeId||t[24].populate(E),o=t[24];const Y={};if(Y.bgColor=e.colors.color2,Y.primaryColor=e.colors.color4,Y.size=e.graph.size,Y.height=90,Y.index=4,!t[25]){const D=Y.is||"Bar";t[25]=(s.components&&s.components[D]||e[Symbol.for("components")][D]||(()=>{console.error("component Bar not found")})).call(null,{props:Y},t[24],e),t[25][Symbol.for("slots")][0]?(o=t[25][Symbol.for("slots")][0],e=t[25]):o=t[25][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[0].set("color",{transition:o.colors.bg})},function(o,e,s){e[1].set("color",o.colors.color4)},function(o,e,s){e[2][Symbol.for("props")].color=o.colors.color4},function(o,e,s){e[3].set("x",{transition:(1920-o.width)/2})},function(o,e,s){e[3].set("y",{transition:(1080-o.height)/2})},function(o,e,s){e[5].set("w",{transition:o.width})},function(o,e,s){e[5].set("h",{transition:o.height})},function(o,e,s){e[5].set("color",o.colors.color1)},function(o,e,s){e[5].set("effects",[o.shader("radius",{radius:o.radius})])},function(o,e,s){e[6].set("w",{transition:o.width})},function(o,e,s){e[6].set("color",o.colors.color2)},function(o,e,s){e[6].set("effects",[o.shader("radius",{radius:o.radius})])},function(o,e,s){e[7].set("w",{transition:o.width})},function(o,e,s){e[7].set("color",o.colors.color2)},function(o,e,s){e[8].set("content",o.text)},function(o,e,s){e[8].set("color",o.colors.color3)},function(o,e,s){e[9][Symbol.for("props")].content=o.text},function(o,e,s){e[9][Symbol.for("props")].color=o.colors.color3},function(o,e,s){e[10].set("x",{transition:o.width-120})},function(o,e,s){e[10].set("on",o.mode==="dark")},function(o,e,s){e[10].set("bgColor",o.colors.color1)},function(o,e,s){e[11][Symbol.for("props")].x={transition:o.width-120}},function(o,e,s){e[11][Symbol.for("props")].on=o.mode==="dark"},function(o,e,s){e[11][Symbol.for("props")].bgColor=o.colors.color1},function(o,e,s){e[12].set("h",{transition:o.block1.height})},function(o,e,s){e[12].set("color",o.colors.color2)},function(o,e,s){e[12].set("effects",[o.shader("radius",{radius:o.radius/2})])},function(o,e,s){e[13].set("w",{transition:o.block2.w})},function(o,e,s){e[13].set("h",o.block2.h)},function(o,e,s){e[13].set("y",{transition:o.block2.y})},function(o,e,s){e[13].set("color",o.colors.color2)},function(o,e,s){e[13].set("effects",[o.shader("radius",{radius:o.radius/2})])},function(o,e,s){e[14].set("x",{transition:o.graph.x})},function(o,e,s){e[14].set("y",{transition:o.graph.y})},function(o,e,s){e[14].set("w",o.graph.w)},function(o,e,s){e[14].set("h",o.graph.h)},function(o,e,s){e[15].set("x",{transition:o.graph.offset})},function(o,e,s){e[15].set("y",{transition:o.graph.offset})},function(o,e,s){e[16].set("bgColor",o.colors.color2)},function(o,e,s){e[16].set("primaryColor",o.colors.color4)},function(o,e,s){e[16].set("size",o.graph.size)},function(o,e,s){e[17][Symbol.for("props")].bgColor=o.colors.color2},function(o,e,s){e[17][Symbol.for("props")].primaryColor=o.colors.color4},function(o,e,s){e[17][Symbol.for("props")].size=o.graph.size},function(o,e,s){e[18].set("bgColor",o.colors.color2)},function(o,e,s){e[18].set("primaryColor",o.colors.color4)},function(o,e,s){e[18].set("size",o.graph.size)},function(o,e,s){e[19][Symbol.for("props")].bgColor=o.colors.color2},function(o,e,s){e[19][Symbol.for("props")].primaryColor=o.colors.color4},function(o,e,s){e[19][Symbol.for("props")].size=o.graph.size},function(o,e,s){e[20].set("bgColor",o.colors.color2)},function(o,e,s){e[20].set("primaryColor",o.colors.color4)},function(o,e,s){e[20].set("size",o.graph.size)},function(o,e,s){e[21][Symbol.for("props")].bgColor=o.colors.color2},function(o,e,s){e[21][Symbol.for("props")].primaryColor=o.colors.color4},function(o,e,s){e[21][Symbol.for("props")].size=o.graph.size},function(o,e,s){e[22].set("bgColor",o.colors.color2)},function(o,e,s){e[22].set("primaryColor",o.colors.color4)},function(o,e,s){e[22].set("size",o.graph.size)},function(o,e,s){e[23][Symbol.for("props")].bgColor=o.colors.color2},function(o,e,s){e[23][Symbol.for("props")].primaryColor=o.colors.color4},function(o,e,s){e[23][Symbol.for("props")].size=o.graph.size},function(o,e,s){e[24].set("bgColor",o.colors.color2)},function(o,e,s){e[24].set("primaryColor",o.colors.color4)},function(o,e,s){e[24].set("size",o.graph.size)},function(o,e,s){e[25][Symbol.for("props")].bgColor=o.colors.color2},function(o,e,s){e[25][Symbol.for("props")].primaryColor=o.colors.color4},function(o,e,s){e[25][Symbol.for("props")].size=o.graph.size}],context:{}},state(){return{mode:"dark",radius:20,width:500,height:600}},computed:{colors(){return this.mode==="dark"?Ar:Mr},text(){return this.mode==="dark"?"Dark mode":"Light mode"},block1(){return{height:this.height===600?180:720}},block2(){return{y:this.height===600?140:560,h:this.height===600?180:300,w:this.height===600?200:890}},graph(){return{x:this.height===600?32:270,y:this.height===600?370:140,w:this.height===600?0:890,h:this.height===600?0:400,offset:this.height===600?0:110,size:this.height===600?"small":"large"}}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.width=1200,this.height=900},down(){this.width=500,this.height=600}}}),Br="ABC123",Pr="https://8b4fa39d.lightningjs.workers.dev";let Os,$s;const Nr="w185",Fr={headers:{"Content-Type":"application/json",Authorization:"Bearer "+Br}};function Zo(n,o=Nr){return $s+o+n}function zr(...n){return Os?go(...n):Ds().then(()=>go(...n))}function go(n,o={}){return fetch(Pr+n,{...Fr,...o}).then(e=>e.json())}function Ds(){return go("/configuration").then(n=>(Os=n,$s=n.images.secure_base_url,n))}const Ro={get:zr,loadConfig:Ds},Qo=n=>Ro.get(`/${n}/popular`).then(Us),Us=n=>n.results.filter(e=>!e.adult).map(e=>({poster:Zo(e.poster_path||e.profile_path),background:Zo(e.backdrop_path,"w1280"),identifier:e.id,title:e.title||e.name,overview:e.overview})),ot=n=>{const o=Array.isArray(n)?n:[n];return Or("movie").then(({genres:e})=>{let s=[];return e.forEach(t=>{o.includes(t.name)&&s.push(t.id)}),Ro.get(`/discover/movie?with_genres=${s.join()}`).then(Us)})},Or=n=>Ro.get(`/genre/${n}/list`),$r=H.Component("Poster",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1280,l.h=720,l.x=e.x,l.color="{top: '0xffffffff', bottom: '0x000000ff'}",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.w=185,i.h=278,i.x=54,i.y=220,t[2].nodeId||t[2].populate(i);const f=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};if(c.font="raleway",c.y=520,c.x=54,c.size=64,c.wordwrap=1e3,c.maxlines=1,typeof f<"u")for(let h in f.config.props)delete c[f.config.props[h]];t[3].nodeId||t[3].populate(c),o=t[3];const a={};if(a.content=e.item.title,a.font="raleway",a.y=520,a.x=54,a.size=64,a.wordwrap=1e3,a.maxlines=1,!t[4]){const h=a.is||"Text";t[4]=(s.components&&s.components[h]||e[Symbol.for("components")][h]||(()=>{console.error("component Text not found")})).call(null,{props:a},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}const d=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const m={};if(m.size=21,m.y=620,m.x=60,m.color="0xccccccff",m.wordwrap=1e3,m.maxlines=2,m.lineheight=36,typeof d<"u")for(let h in d.config.props)delete m[d.config.props[h]];t[5].nodeId||t[5].populate(m),o=t[5];const p={};if(p.content=e.item.overview,p.size=21,p.y=620,p.x=60,p.color="0xccccccff",p.wordwrap=1e3,p.maxlines=2,p.lineheight=36,!t[6]){const h=p.is||"Text";t[6]=(s.components&&s.components[h]||e[Symbol.for("components")][h]||(()=>{console.error("component Text not found")})).call(null,{props:p},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[0].set("src",o.item.background)},function(o,e,s){e[0].set("scale",{transition:{value:o.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){e[0].set("_effects",[o.shader("radius",{radius:8})])},function(o,e,s){e[1].set("alpha",{transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){e[2].set("src",o.item.poster)},function(o,e,s){e[3].set("content",o.item.title)},function(o,e,s){e[4][Symbol.for("props")].content=o.item.title},function(o,e,s){e[5].set("content",o.item.overview)},function(o,e,s){e[6][Symbol.for("props")].content=o.item.overview}],context:{}},props:["src","index","item","width"],state(){return{scale:1,zIndex:1,alpha:0}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),Dr=H.Component("Poster",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=185,l.h=278,l.x=e.x,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("src",o.item.poster)},function(o,e,s){e[0].set("scale",{transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){e[0].set("_effects",[o.shader("radius",{radius:8})])}],context:{}},props:["src","index","item","width"],state(){return{scale:1,color:"#333"}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),Ur=H.Component("PosterTitle",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=185,l.h=278,l.x=e.x,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=10,t[1].nodeId||t[1].populate(r);const i=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.font="raleway",f.size=22,f.wordwrap=185,f.maxlines=2,f.lineheight=28,typeof i<"u")for(let a in i.config.props)delete f[i.config.props[a]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};if(c.content=e.item.title,c.font="raleway",c.size=22,c.wordwrap=185,c.maxlines=2,c.lineheight=28,!t[3]){const a=c.is||"Text";t[3]=(s.components&&s.components[a]||e[Symbol.for("components")][a]||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[0].set("src",o.item.poster)},function(o,e,s){e[0].set("scale",{transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){e[0].set("_effects",[o.shader("radius",{radius:8})])},function(o,e,s){e[1].set("y",{transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){e[1].set("alpha",{transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){e[2].set("content",o.item.title)},function(o,e,s){e[3][Symbol.for("props")].content=o.item.title}],context:{}},props:["src","index","item","width"],state(){return{scale:1,alpha:0,y:278}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),Xr=H.Component("TmdbRow",{components:{Hero:$r,Poster:Dr,PosterTitle:Ur},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};return r.y=80,t[1].nodeId||t[1].populate(r),t},effects:[function(o,e,s){e[1].set("x",{transition:{value:o.x,duration:300,easing:"ease-in-out"}})},function(o,e,s){parent=e[1];const t=o.items||[],l=[];for(let r=0;r<t.length;r++){parent=e[1],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r],__ref:"poster"+r});l.push(i.item.identifier.toString());const f=s.components&&s.components.Component||o[Symbol.for("components")].Component;e[2]=e[2]||{},e[2][i.item.identifier]||(e[2][i.item.identifier]=this.element({parent:parent||"root"},o));const c={};if(c.is=i.type,c.index=i.index,c.item=i.item,c.ref=i.__ref,c.width=i.width,c.key=i.item.identifier,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[2][i.item.identifier].nodeId||e[2][i.item.identifier].populate(c),e[3]=e[3]||{},parent=e[2][i.item.identifier];const a={};if(a.is=i.type,a.index=i.index,a.item=i.item,a.ref=i.__ref,a.width=i.width,a.key=i.item.identifier,!e[3][i.item.identifier]){const d=a.is||"Component";e[3][i.item.identifier]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component Component not found")})).call(null,{props:a},e[2][i.item.identifier],o),e[3][i.item.identifier][Symbol.for("slots")][0]?(parent=e[3][i.item.identifier][Symbol.for("slots")][0],o=e[3][i.item.identifier]):parent=e[3][i.item.identifier][Symbol.for("children")][0]}}e[2]&&Object.keys(e[2]).forEach(r=>{l.indexOf(r)===-1&&(e[2][r].destroy&&e[2][r].destroy(),delete e[1][r])})}],context:{}},props:["title","type","items","width"],state(){return{focused:0,offset:0}},hooks:{focus(){this.$trigger("focused")}},computed:{x(){return 150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(n){const o=this.select("poster"+n);o&&o.focus&&(o.focus(),this.$emit("posterSelect",this.items[n]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),Wr=H.Component("Background",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=1920,r.h=1080,r.color="{top: '0xffffffff', bottom: '0x000000ff'}",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.w=1920,i.h=1080,i.color="{top: '0xffffffff', bottom: '0x000000ff'}",t[2].nodeId||t[2].populate(i),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};return f.w=1920,f.h=1080,f.src="assets/gradient.png",f.color="0x8866ddff",f.alpha=.8,t[3].nodeId||t[3].populate(f),t},effects:[function(o,e,s){e[1].set("src",o.bg1)},function(o,e,s){e[1].set("alpha",{transition:{value:o.alpha1,duration:400,easing:"ease-in"}})},function(o,e,s){e[2].set("src",o.bg2)},function(o,e,s){e[2].set("alpha",{transition:{value:o.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["src"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{src(n){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=n,this.alpha1=.8,this.alpha2=0):(this.bg2=n,this.alpha1=0,this.alpha2=.8)}}}),Yr=H.Component("TMdb",{components:{Background:Wr,TmdbRow:Xr},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,l.color="0x000000ff",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Background||e[Symbol.for("components")].Background;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(typeof r<"u")for(let S in r.config.props)delete i[r.config.props[S]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.src=e.src,!t[2]){const S=f.is||"Background";t[2]=(s.components&&s.components[S]||e[Symbol.for("components")][S]||(()=>{console.error("component Background not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};t[3].nodeId||t[3].populate(c),o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};t[4].nodeId||t[4].populate(a),o=t[4],t[5]||(t[5]=this.element({parent:o||"root"},e));const d={};d.src="assets/logo.png",d.x=140,d.y=90,d.w=243,d.h=52,t[5].nodeId||t[5].populate(d);const m=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[4],t[6]||(t[6]=this.element({parent:o||"root"},e));const p={};if(p.font="raleway",p.size=80,p.x=140,p.y=300,p.wordwrap=1e3,p["@loaded"]=e.positionText&&e.positionText.bind(e),p.maxlines=1,typeof m<"u")for(let S in m.config.props)delete p[m.config.props[S]];t[6].nodeId||t[6].populate(p),o=t[6];const h={};if(h.content=e.title,h.font="raleway",h.size=80,h.x=140,h.y=300,h.wordwrap=1e3,h["@loaded"]=e.positionText&&e.positionText.bind(e),h.maxlines=1,!t[7]){const S=h.is||"Text";t[7]=(s.components&&s.components[S]||e[Symbol.for("components")][S]||(()=>{console.error("component Text not found")})).call(null,{props:h},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]}const y=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[4],t[8]||(t[8]=this.element({parent:o||"root"},e));const g={};if(g.wordwrap=880,g.x=140,g.y=430,g.lineheight=40,g.maxlines=3,typeof y<"u")for(let S in y.config.props)delete g[y.config.props[S]];t[8].nodeId||t[8].populate(g),o=t[8];const x={};if(x.content=e.overview,x.wordwrap=880,x.x=140,x.y=430,x.lineheight=40,x.maxlines=3,!t[9]){const S=x.is||"Text";t[9]=(s.components&&s.components[S]||e[Symbol.for("components")][S]||(()=>{console.error("component Text not found")})).call(null,{props:x},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]}o=t[3],t[10]||(t[10]=this.element({parent:o||"root"},e));const _={};return t[10].nodeId||t[10].populate(_),t},effects:[function(o,e,s){e[1].set("src",o.src)},function(o,e,s){e[2][Symbol.for("props")].src=o.src},function(o,e,s){e[4].set("y",{transition:{value:o.contentY,duration:o.duration}})},function(o,e,s){e[4].set("alpha",{transition:{value:o.alpha,duration:o.duration}})},function(o,e,s){e[6].set("content",o.title)},function(o,e,s){e[7][Symbol.for("props")].content=o.title},function(o,e,s){e[8].set("content",o.overview)},function(o,e,s){e[9][Symbol.for("props")].content=o.overview},function(o,e,s){e[10].set("y",{transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){parent=e[10];const t=o.rows||[],l=[];for(let r=0;r<t.length;r++){parent=e[10],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,row:t[r],__ref:"row"+r});l.push(i.row.title.toString());const f=s.components&&s.components.TmdbRow||o[Symbol.for("components")].TmdbRow;e[11]=e[11]||{},e[11][i.row.title]||(e[11][i.row.title]=this.element({parent:parent||"root"},o));const c={};if(c.key=i.row.title,c.title=i.row.title,c.y=i.row.y,c.ref=i.__ref,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[11][i.row.title].nodeId||e[11][i.row.title].populate(c),e[12]=e[12]||{},parent=e[11][i.row.title];const a={};if(a.key=i.row.title,a.title=i.row.title,a.items=i.row.items,a.type=i.row.type,a.width=i.row.width,a.y=i.row.y,a.ref=i.__ref,!e[12][i.row.title]){const d=a.is||"TmdbRow";e[12][i.row.title]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component TmdbRow not found")})).call(null,{props:a},e[11][i.row.title],o),e[12][i.row.title][Symbol.for("slots")][0]?(parent=e[12][i.row.title][Symbol.for("slots")][0],o=e[12][i.row.title]):parent=e[12][i.row.title][Symbol.for("children")][0]}e[11][i.row.title].set("items",i.row.items),e[11][i.row.title].set("type",i.row.type),e[11][i.row.title].set("width",i.row.width),e[12][i.row.title][Symbol.for("props")].items=i.row.items,e[12][i.row.title][Symbol.for("props")].type=i.row.type,e[12][i.row.title][Symbol.for("props")].width=i.row.width}e[11]&&Object.keys(e[11]).forEach(r=>{l.indexOf(r)===-1&&(e[11][r].destroy&&e[11][r].destroy(),delete e[1][r])})}],context:{}},state(){return{rows:[],items:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused(n){const o=this.select("row"+n);o&&o.focus&&o.focus()}},hooks:{async ready(){this.$listen("posterSelect",n=>{this.focused===0&&(this.src=n.background,this.title=n.title,this.overview=n.overview)}),this.rows.push({title:"Popular Movies",items:await Qo("movie"),type:"Poster",width:215,y:0}),this.rows.push({title:"Best Western movies",items:await ot(["Western"]),type:"Hero",width:1370,y:358}),this.rows.push({title:"Best Comedy movies",items:await ot(["Comedy"]),type:"PosterTitle",width:215,y:1158}),this.rows.push({title:"Popular TV shows",items:await Qo("tv"),type:"PosterTitle",width:215,y:1536}),this.rows.push({title:"Best Adventure and Action movies",items:await ot(["adventure","action"]),type:"Hero",width:1370,y:1914}),this.rows.push({title:"Best Documentaries",items:await ot("Documentary"),type:"PosterTitle",width:215,y:2714}),this.rows.push({title:"Best Western movies 2",items:await ot("Western"),type:"PosterTitle",width:215,y:3092}),this.focused=0},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0}}}),Gr=H.Component("MenuSprite",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.src="assets/menusprite.png",i.x=748,i.y=120,i.w=425,i.h=340,t[2].nodeId||t[2].populate(i),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.y=680,f.x=560,t[3].nodeId||t[3].populate(f);const c=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};if(a.image="assets/menusprite.png",a.x=0,a.w=140,a.h=140,a.map=e.map,typeof c<"u")for(let v in c.config.props)delete a[c.config.props[v]];t[4].nodeId||t[4].populate(a),o=t[4];const d={};if(d.image="assets/menusprite.png",d.x=0,d.w=140,d.h=140,d.map=e.map,d.frame=e.icon1,!t[5]){const v=d.is||"Sprite";t[5]=(s.components&&s.components[v]||e[Symbol.for("components")][v]||(()=>{console.error("component Sprite not found")})).call(null,{props:d},t[4],e),t[5][Symbol.for("slots")][0]?(o=t[5][Symbol.for("slots")][0],e=t[5]):o=t[5][Symbol.for("children")][0]}const m=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[6]||(t[6]=this.element({parent:o||"root"},e));const p={};if(p.image="assets/menusprite.png",p.x=220,p.w=140,p.h=140,p.map=e.map,p.frame="icon2",typeof m<"u")for(let v in m.config.props)delete p[m.config.props[v]];t[6].nodeId||t[6].populate(p),o=t[6];const h={};if(h.image="assets/menusprite.png",h.x=220,h.w=140,h.h=140,h.map=e.map,h.frame="icon2",!t[7]){const v=h.is||"Sprite";t[7]=(s.components&&s.components[v]||e[Symbol.for("components")][v]||(()=>{console.error("component Sprite not found")})).call(null,{props:h},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]}const y=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[8]||(t[8]=this.element({parent:o||"root"},e));const g={};if(g.image="assets/menusprite.png",g.x=440,g.w=140,g.h=140,g.map=e.map,g.frame="icon3",typeof y<"u")for(let v in y.config.props)delete g[y.config.props[v]];t[8].nodeId||t[8].populate(g),o=t[8];const x={};if(x.image="assets/menusprite.png",x.x=440,x.w=140,x.h=140,x.map=e.map,x.frame="icon3",!t[9]){const v=x.is||"Sprite";t[9]=(s.components&&s.components[v]||e[Symbol.for("components")][v]||(()=>{console.error("component Sprite not found")})).call(null,{props:x},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]}const _=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[10]||(t[10]=this.element({parent:o||"root"},e));const S={};if(S.image="assets/menusprite.png",S.x=660,S.w=140,S.h=140,S.map=e.map,S.frame="icon4_unfocus",typeof _<"u")for(let v in _.config.props)delete S[_.config.props[v]];t[10].nodeId||t[10].populate(S),o=t[10];const I={};if(I.image="assets/menusprite.png",I.x=660,I.w=140,I.h=140,I.map=e.map,I.frame="icon4_unfocus",!t[11]){const v=I.is||"Sprite";t[11]=(s.components&&s.components[v]||e[Symbol.for("components")][v]||(()=>{console.error("component Sprite not found")})).call(null,{props:I},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[4].set("frame",o.icon1)},function(o,e,s){e[5][Symbol.for("props")].frame=o.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),At=["menu"],Hr=H.Component("Sprites",{components:{MenuSprite:Gr},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.MenuSprite||e[Symbol.for("components")].MenuSprite;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(typeof r<"u")for(let c in r.config.props)delete i[r.config.props[c]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.show=e.currentSprite==="menu",!t[2]){const c=f.is||"MenuSprite";t[2]=(s.components&&s.components[c]||e[Symbol.for("components")][c]||(()=>{console.error("component MenuSprite not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[1].set("show",o.currentSprite==="menu")},function(o,e,s){e[2][Symbol.for("props")].show=o.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const n=At.indexOf(this.currentSprite);n<At.length-1?this.currentSprite=At[n+1]:this.currentSprite=At[0]}}}),Xs=H.Component("Button",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=300,l.h=80,l.color=e.color,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("effects",[o.shader("rounded",{radius:20})])},function(o,e,s){e[0].set("alpha",{transition:o.alpha})},function(o,e,s){e[0].set("scale",{transition:o.scale})},function(o,e,s){e[0].set("z",o.zIndex)},function(o,e,s){e[0].set("rotation",o.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,zIndex:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1,this.zIndex=100},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.zIndex=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),Vr=H.Component("Menu",{components:{Button:Xs},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=400,l.h=1080,l.color="{right: '0x64748baa', left: '0x475569aa'}",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=50,r.y=40,t[1].nodeId||t[1].populate(r);const i=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.color="0xe4e4e7ff",f.ref="menu1",typeof i<"u")for(let S in i.config.props)delete f[i.config.props[S]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};if(c.color="0xe4e4e7ff",c.ref="menu1",!t[3]){const S=c.is||"Button";t[3]=(s.components&&s.components[S]||e[Symbol.for("components")][S]||(()=>{console.error("component Button not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]}const a=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const d={};if(d.color="0xe4e4e7ff",d.y=100,d.ref="menu2",typeof a<"u")for(let S in a.config.props)delete d[a.config.props[S]];t[4].nodeId||t[4].populate(d),o=t[4];const m={};if(m.color="0xe4e4e7ff",m.y=100,m.ref="menu2",!t[5]){const S=m.is||"Button";t[5]=(s.components&&s.components[S]||e[Symbol.for("components")][S]||(()=>{console.error("component Button not found")})).call(null,{props:m},t[4],e),t[5][Symbol.for("slots")][0]?(o=t[5][Symbol.for("slots")][0],e=t[5]):o=t[5][Symbol.for("children")][0]}const p=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const h={};if(h.color="0xe4e4e7ff",h.y=200,h.ref="menu3",typeof p<"u")for(let S in p.config.props)delete h[p.config.props[S]];t[6].nodeId||t[6].populate(h),o=t[6];const y={};if(y.color="0xe4e4e7ff",y.y=200,y.ref="menu3",!t[7]){const S=y.is||"Button";t[7]=(s.components&&s.components[S]||e[Symbol.for("components")][S]||(()=>{console.error("component Button not found")})).call(null,{props:y},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]}const g=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[8]||(t[8]=this.element({parent:o||"root"},e));const x={};if(x.color="0xe4e4e7ff",x.y=300,x.ref="menu4",typeof g<"u")for(let S in g.config.props)delete x[g.config.props[S]];t[8].nodeId||t[8].populate(x),o=t[8];const _={};if(_.color="0xe4e4e7ff",_.y=300,_.ref="menu4",!t[9]){const S=_.is||"Button";t[9]=(s.components&&s.components[S]||e[Symbol.for("components")][S]||(()=>{console.error("component Button not found")})).call(null,{props:_},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[0].set("x",{transition:o.x})}],context:{}},state(){return{x:-360,focused:1}},hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const n=this.select(`menu${this.focused}`);n&&n.focus&&n.focus()}},input:{right(){this.parent.focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),qr=H.Component("FocusHandling",{components:{Menu:Vr,Button:Xs},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=300,r.y=150,t[1].nodeId||t[1].populate(r);const i=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.color="0xef4444ff",f.x=0,f.ref="button1",typeof i<"u")for(let E in i.config.props)delete f[i.config.props[E]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};if(c.color="0xef4444ff",c.x=0,c.ref="button1",!t[3]){const E=c.is||"Button";t[3]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Button not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]}const a=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const d={};if(d.color="0xf97316ff",d.x=320,d.ref="button2",typeof a<"u")for(let E in a.config.props)delete d[a.config.props[E]];t[4].nodeId||t[4].populate(d),o=t[4];const m={};if(m.color="0xf97316ff",m.x=320,m.ref="button2",!t[5]){const E=m.is||"Button";t[5]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Button not found")})).call(null,{props:m},t[4],e),t[5][Symbol.for("slots")][0]?(o=t[5][Symbol.for("slots")][0],e=t[5]):o=t[5][Symbol.for("children")][0]}const p=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const h={};if(h.color="0x84cc16ff",h.x=640,h.ref="button3",typeof p<"u")for(let E in p.config.props)delete h[p.config.props[E]];t[6].nodeId||t[6].populate(h),o=t[6];const y={};if(y.color="0x84cc16ff",y.x=640,y.ref="button3",!t[7]){const E=y.is||"Button";t[7]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Button not found")})).call(null,{props:y},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]}const g=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[8]||(t[8]=this.element({parent:o||"root"},e));const x={};if(x.color="0x10b981ff",x.x=0,x.y=100,x.ref="button4",typeof g<"u")for(let E in g.config.props)delete x[g.config.props[E]];t[8].nodeId||t[8].populate(x),o=t[8];const _={};if(_.color="0x10b981ff",_.x=0,_.y=100,_.ref="button4",!t[9]){const E=_.is||"Button";t[9]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Button not found")})).call(null,{props:_},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]}const S=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[10]||(t[10]=this.element({parent:o||"root"},e));const I={};if(I.color="0x06b6d4ff",I.y=100,I.x=320,I.ref="button5",typeof S<"u")for(let E in S.config.props)delete I[S.config.props[E]];t[10].nodeId||t[10].populate(I),o=t[10];const v={};if(v.color="0x06b6d4ff",v.y=100,v.x=320,v.ref="button5",!t[11]){const E=v.is||"Button";t[11]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Button not found")})).call(null,{props:v},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]}const P=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};if(b.color="0x3b82f6ff",b.y=100,b.x=640,b.ref="button6",typeof P<"u")for(let E in P.config.props)delete b[P.config.props[E]];t[12].nodeId||t[12].populate(b),o=t[12];const k={};if(k.color="0x3b82f6ff",k.y=100,k.x=640,k.ref="button6",!t[13]){const E=k.is||"Button";t[13]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Button not found")})).call(null,{props:k},t[12],e),t[13][Symbol.for("slots")][0]?(o=t[13][Symbol.for("slots")][0],e=t[13]):o=t[13][Symbol.for("children")][0]}const L=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[14]||(t[14]=this.element({parent:o||"root"},e));const F={};if(F.color="0x8b5cf6ff",F.y=200,F.x=0,F.ref="button7",typeof L<"u")for(let E in L.config.props)delete F[L.config.props[E]];t[14].nodeId||t[14].populate(F),o=t[14];const R={};if(R.color="0x8b5cf6ff",R.y=200,R.x=0,R.ref="button7",!t[15]){const E=R.is||"Button";t[15]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Button not found")})).call(null,{props:R},t[14],e),t[15][Symbol.for("slots")][0]?(o=t[15][Symbol.for("slots")][0],e=t[15]):o=t[15][Symbol.for("children")][0]}const N=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[16]||(t[16]=this.element({parent:o||"root"},e));const O={};if(O.color="0xd946efff",O.y=200,O.x=320,O.ref="button8",typeof N<"u")for(let E in N.config.props)delete O[N.config.props[E]];t[16].nodeId||t[16].populate(O),o=t[16];const $={};if($.color="0xd946efff",$.y=200,$.x=320,$.ref="button8",!t[17]){const E=$.is||"Button";t[17]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Button not found")})).call(null,{props:$},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]}const B=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[18]||(t[18]=this.element({parent:o||"root"},e));const T={};if(T.color="0xf43f5eff",T.y=200,T.x=640,T.ref="button9",typeof B<"u")for(let E in B.config.props)delete T[B.config.props[E]];t[18].nodeId||t[18].populate(T),o=t[18];const w={};if(w.color="0xf43f5eff",w.y=200,w.x=640,w.ref="button9",!t[19]){const E=w.is||"Button";t[19]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Button not found")})).call(null,{props:w},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]}const A=s.components&&s.components.Menu||e[Symbol.for("components")].Menu;o=t[0],t[20]||(t[20]=this.element({parent:o||"root"},e));const z={};if(z.ref="menu",typeof A<"u")for(let E in A.config.props)delete z[A.config.props[E]];t[20].nodeId||t[20].populate(z),o=t[20];const M={};if(M.ref="menu",!t[21]){const E=M.is||"Menu";t[21]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Menu not found")})).call(null,{props:M},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]}return t},effects:[],context:{}},state(){return{focused:1}},hooks:{focus(){this.$trigger("focused")}},watch:{focused(n){const o=this.select(`button${n}`);o&&o.focus&&o.focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const n=this.focused-1;if(n===0){const o=this.select("menu");o&&o.focus&&o.focus()}else this.focused=Math.max(n,1)},a(){const n=this.select("menu");n&&n.focus&&n.focus()}}}),jr=H.Component("Positioning",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=100,r.h=100,r.x=20,r.y=20,r.color="0xecfeffff",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.w=100,i.h=100,i.x=140,i.y=20,i.color="0xa5f3fcff",t[2].nodeId||t[2].populate(i),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=100,f.h=100,f.x=260,f.y=20,f.color="0x22d3eeff",t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=100,c.h=100,c.x=380,c.y=20,c.color="0x0891b2ff",t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=100,a.h=100,a.x=e.x1,a.y=e.y,a.color="0xfdf4ffff",t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const d={};d.w=100,d.h=100,d.x=e.x2,d.y=e.y,d.color="0xf5d0feff",t[6].nodeId||t[6].populate(d),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};m.w=100,m.h=100,m.x=e.x3,m.y=e.y,m.color="0xe879f9ff",t[7].nodeId||t[7].populate(m),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.w=100,p.h=100,p.x=e.x4,p.y=e.y,p.color="0xc026d3ff",t[8].nodeId||t[8].populate(p),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.w=100,h.h=100,h.y=260,h.color="0xfff7edff",t[9].nodeId||t[9].populate(h),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const y={};y.w=100,y.h=100,y.y=260,y.color="0xfed7aaff",t[10].nodeId||t[10].populate(y),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const g={};g.w=100,g.h=100,g.y=260,g.color="0xfb923cff",t[11].nodeId||t[11].populate(g),o=t[0],t[12]||(t[12]=this.element({parent:o||"root"},e));const x={};x.w=100,x.h=100,x.y=260,x.color="0xea580cff",t[12].nodeId||t[12].populate(x),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const _={};_.w=800,_.h=800,_.y=20,_.x=800,_.color="0xecfdf5ff",t[13].nodeId||t[13].populate(_),o=t[13],t[14]||(t[14]=this.element({parent:o||"root"},e));const S={};S.w=600,S.h=600,S.y=20,S.x=20,S.color="0xa7f3d0ff",t[14].nodeId||t[14].populate(S),o=t[14],t[15]||(t[15]=this.element({parent:o||"root"},e));const I={};I.w=400,I.h=400,I.y=100,I.x=20,I.color="0x34d399ff",t[15].nodeId||t[15].populate(I),o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const v={};v.w=200,v.h=100,v.color="0x059669ff",t[16].nodeId||t[16].populate(v),o=t[16],t[17]||(t[17]=this.element({parent:o||"root"},e));const P={};P.w=50,P.h=50,P.color="0x065f46ff",t[17].nodeId||t[17].populate(P),o=t[0],t[18]||(t[18]=this.element({parent:o||"root"},e));const b={};b.w=100,b.h=100,b.y=500,b.x=20,b.color="0xe11d48ff",t[18].nodeId||t[18].populate(b),o=t[0],t[19]||(t[19]=this.element({parent:o||"root"},e));const k={};k.w=200,k.h=200,k.x=300,k.y=600,k.color="0x94a3b8ff",k.z=100,t[19].nodeId||t[19].populate(k);const L=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[19],t[20]||(t[20]=this.element({parent:o||"root"},e));const F={};if(F.content="Lightning!",F.x=100,F.y=140,typeof L<"u")for(let E in L.config.props)delete F[L.config.props[E]];t[20].nodeId||t[20].populate(F),o=t[20];const R={};if(R.content="Lightning!",R.x=100,R.y=140,!t[21]){const E=R.is||"Text";t[21]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Text not found")})).call(null,{props:R},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]}o=t[19],t[22]||(t[22]=this.element({parent:o||"root"},e));const N={};N.w=300,N.h=100,N.color="0x475569ff",t[22].nodeId||t[22].populate(N);const O=s.components&&s.components.Circle||e[Symbol.for("components")].Circle;o=t[19],t[23]||(t[23]=this.element({parent:o||"root"},e));const $={};if($.x=150,$.y=150,$.size=100,$.color="0xffffffff",typeof O<"u")for(let E in O.config.props)delete $[O.config.props[E]];t[23].nodeId||t[23].populate($),o=t[23];const B={};if(B.x=150,B.y=150,B.size=100,B.color="0xffffffff",!t[24]){const E=B.is||"Circle";t[24]=(s.components&&s.components[E]||e[Symbol.for("components")][E]||(()=>{console.error("component Circle not found")})).call(null,{props:B},t[23],e),t[24][Symbol.for("slots")][0]?(o=t[24][Symbol.for("slots")][0],e=t[24]):o=t[24][Symbol.for("children")][0]}o=t[0],t[25]||(t[25]=this.element({parent:o||"root"},e));const T={};T.w=300,T.h=300,T.x=300,T.y=600,T.color="0xef444480",t[25].nodeId||t[25].populate(T),o=t[0],t[26]||(t[26]=this.element({parent:o||"root"},e));const w={};w.w=400,w.h=100,w.x=800,w.y=900,w.color="0x0284c7ff",t[26].nodeId||t[26].populate(w),o=t[26],t[27]||(t[27]=this.element({parent:o||"root"},e));const A={};A.w=o.node.width*(42/100),A.h=o.node.height*(30/100),A.y=o.node.height*(5/100),A.x=o.node.width*(1/100),A.color="0x075985ff",t[27].nodeId||t[27].populate(A),o=t[26],t[28]||(t[28]=this.element({parent:o||"root"},e));const z={};z.h=o.node.height*(30/100),z.y=o.node.height*(35/100),z.x=o.node.width*(1/100),z.color="0x6b21a8ff",t[28].nodeId||t[28].populate(z),o=t[26],t[29]||(t[29]=this.element({parent:o||"root"},e));const M={};return M.h=o.node.height*(30/100),M.y=o.node.height*(65/100),M.x=o.node.width*(1/100),M.color="0x9f1239ff",t[29].nodeId||t[29].populate(M),t},effects:[function(o,e,s){e[9].set("x",o.xA)},function(o,e,s){e[10].set("x",o.xB)},function(o,e,s){e[11].set("x",o.xC)},function(o,e,s){e[12].set("x",o.xD)},function(o,e,s){e[16].set("y",(400-100)/2)},function(o,e,s){e[16].set("x",(400-200)/2)},function(o,e,s){e[17].set("y",{transition:o.yNested})},function(o,e,s){e[17].set("x",{transition:o.xNested})},function(o,e,s){e[28].set("w",o.bar2.v)},function(o,e,s){e[29].set("w",{transition:o.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:20+140+100,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const n=parseFloat(this.bar2.v),o=this.bar2.direction==="up"?n+10:n-10;this.bar2.v=o+"%",o>=90&&(this.bar2.direction="down"),o<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}}),Kr=H.Component("Colors",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=20,r.y=20,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.w=100,i.h=100,i.x=0,i.color="0xecfeffff",t[2].nodeId||t[2].populate(i),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=100,f.h=100,f.x=120,f.color="0xa5f3fcff",t[3].nodeId||t[3].populate(f),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=100,c.h=100,c.x=240,c.color="0x22d3eeff",t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=100,a.h=100,a.x=360,a.color="0x0891b2ff",t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const d={};d.x=20,d.y=140,t[6].nodeId||t[6].populate(d),o=t[6],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};m.w=100,m.h=100,m.x=0,m.color="0xecfeffff",t[7].nodeId||t[7].populate(m),o=t[6],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.w=100,p.h=100,p.x=120,p.color="0xa5f3fcff",t[8].nodeId||t[8].populate(p),o=t[6],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.w=100,h.h=100,h.x=240,h.color="0x22d3eeff",t[9].nodeId||t[9].populate(h),o=t[6],t[10]||(t[10]=this.element({parent:o||"root"},e));const y={};y.w=100,y.h=100,y.x=360,y.color="0x0891b2ff",t[10].nodeId||t[10].populate(y),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const g={};g.x=20,g.y=260,t[11].nodeId||t[11].populate(g),o=t[11],t[12]||(t[12]=this.element({parent:o||"root"},e));const x={};x.w=100,x.h=100,x.x=0,x.color="0xecfeffaa",t[12].nodeId||t[12].populate(x),o=t[11],t[13]||(t[13]=this.element({parent:o||"root"},e));const _={};_.w=100,_.h=100,_.x=120,_.color="0xa5f3fc33",t[13].nodeId||t[13].populate(_),o=t[11],t[14]||(t[14]=this.element({parent:o||"root"},e));const S={};S.w=100,S.h=100,S.x=240,S.color="0x22d3ee20",t[14].nodeId||t[14].populate(S),o=t[11],t[15]||(t[15]=this.element({parent:o||"root"},e));const I={};I.w=100,I.h=100,I.x=360,I.color="0x0891b2ff",t[15].nodeId||t[15].populate(I),o=t[0],t[16]||(t[16]=this.element({parent:o||"root"},e));const v={};v.x=20,v.y=380,t[16].nodeId||t[16].populate(v),o=t[16],t[17]||(t[17]=this.element({parent:o||"root"},e));const P={};P.w=100,P.h=100,P.x=0,P.color="0xecfeffff",t[17].nodeId||t[17].populate(P),o=t[16],t[18]||(t[18]=this.element({parent:o||"root"},e));const b={};b.w=100,b.h=100,b.x=120,b.color="0xa5f3fcff",t[18].nodeId||t[18].populate(b),o=t[16],t[19]||(t[19]=this.element({parent:o||"root"},e));const k={};k.w=100,k.h=100,k.x=240,k.color="0x22d3eeff",t[19].nodeId||t[19].populate(k),o=t[16],t[20]||(t[20]=this.element({parent:o||"root"},e));const L={};L.w=100,L.h=100,L.x=360,L.color="0x0891b2ff",t[20].nodeId||t[20].populate(L),o=t[0],t[21]||(t[21]=this.element({parent:o||"root"},e));const F={};F.x=20,F.y=500,t[21].nodeId||t[21].populate(F),o=t[21],t[22]||(t[22]=this.element({parent:o||"root"},e));const R={};R.w=100,R.h=100,R.x=0,R.color="0xecfeffab",t[22].nodeId||t[22].populate(R),o=t[21],t[23]||(t[23]=this.element({parent:o||"root"},e));const N={};N.w=100,N.h=100,N.x=120,N.color="0xa5f3fc33",t[23].nodeId||t[23].populate(N),o=t[21],t[24]||(t[24]=this.element({parent:o||"root"},e));const O={};O.w=100,O.h=100,O.x=240,O.color="0x22d3ee21",t[24].nodeId||t[24].populate(O),o=t[21],t[25]||(t[25]=this.element({parent:o||"root"},e));const $={};$.w=100,$.h=100,$.x=360,$.color="0x0891b2ff",t[25].nodeId||t[25].populate($),o=t[0],t[26]||(t[26]=this.element({parent:o||"root"},e));const B={};B.x=20,B.y=620,t[26].nodeId||t[26].populate(B),o=t[26],t[27]||(t[27]=this.element({parent:o||"root"},e));const T={};T.w=100,T.h=100,T.x=0,T.color="0x000000ff",t[27].nodeId||t[27].populate(T),o=t[26],t[28]||(t[28]=this.element({parent:o||"root"},e));const w={};w.w=100,w.h=100,w.x=120,w.color="0xccccccff",t[28].nodeId||t[28].populate(w),o=t[26],t[29]||(t[29]=this.element({parent:o||"root"},e));const A={};A.w=100,A.h=100,A.x=240,A.color="0x889900ff",t[29].nodeId||t[29].populate(A),o=t[26],t[30]||(t[30]=this.element({parent:o||"root"},e));const z={};z.w=100,z.h=100,z.x=360,z.color="0x00ff00ff",t[30].nodeId||t[30].populate(z),o=t[0],t[31]||(t[31]=this.element({parent:o||"root"},e));const M={};M.x=20,M.y=740,t[31].nodeId||t[31].populate(M),o=t[31],t[32]||(t[32]=this.element({parent:o||"root"},e));const E={};E.w=100,E.h=100,E.x=0,E.color="0x000000ff",t[32].nodeId||t[32].populate(E),o=t[31],t[33]||(t[33]=this.element({parent:o||"root"},e));const Y={};Y.w=100,Y.h=100,Y.x=120,Y.color="0xccccccff",t[33].nodeId||t[33].populate(Y),o=t[31],t[34]||(t[34]=this.element({parent:o||"root"},e));const D={};D.w=100,D.h=100,D.x=240,D.color="0x889900ff",t[34].nodeId||t[34].populate(D),o=t[31],t[35]||(t[35]=this.element({parent:o||"root"},e));const q={};q.w=100,q.h=100,q.x=360,q.color="0x00ff00ff",t[35].nodeId||t[35].populate(q),o=t[0],t[36]||(t[36]=this.element({parent:o||"root"},e));const U={};U.x=620,U.y=20,t[36].nodeId||t[36].populate(U),o=t[36],t[37]||(t[37]=this.element({parent:o||"root"},e));const j={};j.w=300,j.h=200,j.x=0,t[37].nodeId||t[37].populate(j),o=t[36],t[38]||(t[38]=this.element({parent:o||"root"},e));const Z={};Z.w=300,Z.h=200,Z.x=0,Z.y=250,t[38].nodeId||t[38].populate(Z),o=t[36],t[39]||(t[39]=this.element({parent:o||"root"},e));const V={};V.w=300,V.h=200,V.x=100,V.y=400,t[39].nodeId||t[39].populate(V),o=t[36],t[40]||(t[40]=this.element({parent:o||"root"},e));const Q={};return Q.w=300,Q.h=200,Q.x=0,Q.y=650,t[40].nodeId||t[40].populate(Q),t},effects:[function(o,e,s){e[0].set("color",{transition:o.bg})},function(o,e,s){e[37].set("color",{transition:o.color1})},function(o,e,s){e[38].set("color",{transition:o.color2})},function(o,e,s){e[39].set("color",{transition:o.color3})},function(o,e,s){e[40].set("color",{transition:{value:o.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let n=0;const o=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{n=n+1,n===o.length-1&&(n=0),this.bg=o[n]},2e3)}}}),Zr=H.Component("Gradients",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.h=1080,r.color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.h=1080,i.color="{left: '0xdc2626ff',  right: '0xf87171ff'}",t[2].nodeId||t[2].populate(i),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.h=1080,f.color="{top: '0x0891b2ff', right: '0xf87171ff'}",t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};return c.h=1080,c.color="{right: '0x008000ff', bottom: '0xffd700ff'}",t[4].nodeId||t[4].populate(c),t},effects:[function(o,e,s){e[1].set("w",1920/4)},function(o,e,s){e[2].set("w",1920/4)},function(o,e,s){e[2].set("x",1920/4)},function(o,e,s){e[3].set("w",1920/4)},function(o,e,s){e[3].set("x",1920/4*2)},function(o,e,s){e[4].set("w",1920/4)},function(o,e,s){e[4].set("x",1920/4*3)}],context:{}}}),Qr=H.Component("Transitions",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=200,r.h=200,r.x=50,r.color="0xc4b5fdff",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.w=200,i.h=200,i.x=300,i.color="0xa78bfaff",t[2].nodeId||t[2].populate(i),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=200,f.h=200,f.x=550,f.color="0x8b5cf6ff",f.ref="bla",t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=200,c.h=200,c.x=800,c.color="0x7c3aedff",t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=200,a.h=200,a.x=1050,a.color="0x6d28d9ff",t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const d={};d.w=200,d.h=200,d.x=1300,d.color="0x5b21b6ff",t[6].nodeId||t[6].populate(d),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};return m.w=200,m.h=200,m.x=1550,m.color="0x4c1d95ff",t[7].nodeId||t[7].populate(m),t},effects:[function(o,e,s){e[1].set("y",{transition:o.y})},function(o,e,s){e[2].set("y",{transition:{value:o.y}})},function(o,e,s){e[3].set("y",{transition:{value:o.y,duration:1e3,start:o.start,end:o.doneTransition3}})},function(o,e,s){e[4].set("y",{transition:{value:o.y,duration:500,delay:1e3,start:o.start,end:o.finished}})},function(o,e,s){e[5].set("y",{transition:{value:o.y,easing:"ease-in-out",end:o.finished}})},function(o,e,s){e[6].set("y",{transition:{value:o.y,duration:3e3,easing:"ease-in-out-back",end:o.finished}})},function(o,e,s){e[7].set("y",{transition:{value:o.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{ready(){this.$setTimeout(()=>{this.y=1080-50-200},500)}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(n,o,e){this.$log.info("Start transition",n.nodeId,o,e)},finished(n,o,e){this.$log.info("Finished transition",n.nodeId,o,e)}}}),Jr=H.Component("Alpha",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=100,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.w=200,i.h=200,i.x=100,i.color="0xffffffff",i.alpha=.2,t[2].nodeId||t[2].populate(i),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=200,f.h=200,f.x=320,f.color="0xffffffff",f.alpha=.4,t[3].nodeId||t[3].populate(f),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=200,c.h=200,c.x=540,c.color="0xffffffff",c.alpha=.6,t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=200,a.h=200,a.x=760,a.color="0xffffffff",a.alpha=.8,t[5].nodeId||t[5].populate(a),o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const d={};d.w=200,d.h=200,d.x=980,d.color="0xffffffff",d.alpha=1,t[6].nodeId||t[6].populate(d),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};m.w=200,m.h=200,m.x=100,m.y=320,m.color="0xffffffff",m.alpha=e.alpha,t[7].nodeId||t[7].populate(m),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.w=200,p.h=200,p.x=100,p.y=540,p.color="0xffffffff",t[8].nodeId||t[8].populate(p),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.w=200,h.h=200,h.x=100,h.y=760,h.color="0xffffffff",t[9].nodeId||t[9].populate(h),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const y={};y.w=428,y.h=234,y.x=1200,y.y=100,y.alpha=1,t[10].nodeId||t[10].populate(y),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const g={};g.w=428,g.h=234,g.x=1300,g.alpha=.4,t[11].nodeId||t[11].populate(g),o=t[0],t[12]||(t[12]=this.element({parent:o||"root"},e));const x={};x.w=428,x.h=234,x.x=1200,x.alpha=.1,t[12].nodeId||t[12].populate(x);const _=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const S={};if(S.x=400,S.y=400,S.alpha=.2,S.content="Text with alpha applied directly",typeof _<"u")for(let L in _.config.props)delete S[_.config.props[L]];t[13].nodeId||t[13].populate(S),o=t[13];const I={};if(I.x=400,I.y=400,I.alpha=.2,I.content="Text with alpha applied directly",!t[14]){const L=I.is||"Text";t[14]=(s.components&&s.components[L]||e[Symbol.for("components")][L]||(()=>{console.error("component Text not found")})).call(null,{props:I},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]}o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const v={};v.alpha=.5,v.x=400,v.y=500,t[15].nodeId||t[15].populate(v);const P=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const b={};if(b.content="Text with alpha applied on parent element",typeof P<"u")for(let L in P.config.props)delete b[P.config.props[L]];t[16].nodeId||t[16].populate(b),o=t[16];const k={};if(k.content="Text with alpha applied on parent element",!t[17]){const L=k.is||"Text";t[17]=(s.components&&s.components[L]||e[Symbol.for("components")][L]||(()=>{console.error("component Text not found")})).call(null,{props:k},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[8].set("alpha",o.alpha)},function(o,e,s){e[9].set("alpha",{transition:{value:o.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(o,e,s){e[10].set("src",o.image)},function(o,e,s){e[11].set("y",100+234-40)},function(o,e,s){e[11].set("src",o.image)},function(o,e,s){e[12].set("y",100+234*2-40*2)},function(o,e,s){e[12].set("src",o.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const n=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(n,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),el=H.Component("Scaling",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=100,r.y=100,r.w=150,r.h=150,r.color="0x64748bff",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.x=300,i.y=100,i.w=100,i.h=100,i.color="0x64748bff",i.scale=1.5,t[2].nodeId||t[2].populate(i),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.x=100,f.y=400,f.w=100,f.h=100,f.color="0xb45309ff",f.scale=e.scale,t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.x=900,c.y=400,c.w=100,c.h=100,t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.x=300,a.y=600,a.w=100,a.h=100,a.color="0x059669ff",t[5].nodeId||t[5].populate(a),o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const d={};d.x=10,d.y=10,d.h=60,d.w=80,d.color="0x0369a1ff",t[6].nodeId||t[6].populate(d),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};m.x=1500,m.y=600,m.w=100,m.h=100,m.color="0x059669ff",t[7].nodeId||t[7].populate(m),o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};return p.x=10,p.y=10,p.h=60,p.w=80,p.color="0x0369a1ff",t[8].nodeId||t[8].populate(p),t},effects:[function(o,e,s){e[4].set("src",o.balloon)},function(o,e,s){e[4].set("scale",{transition:{value:o.scale,easing:"ease-in-out"}})},function(o,e,s){e[5].set("scale",o.scale2)},function(o,e,s){e[7].set("scale",o.scale2)},function(o,e,s){e[8].set("scale",o.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const e=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(e,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),tl=H.Component("Rotation",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=70,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.x=100,i.y=0,i.w=200,i.h=100,i.color="0xfee2e2ff",i.rotation=0,t[2].nodeId||t[2].populate(i),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.x=100,f.y=150,f.w=200,f.h=100,f.color="0xfecacaff",f.rotation=10,t[3].nodeId||t[3].populate(f),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.x=100,c.y=300,c.w=200,c.h=100,c.color="0xfca5a5ff",c.rotation=20,t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.x=100,a.y=450,a.w=200,a.h=100,a.color="0xf87171ff",a.rotation=30,t[5].nodeId||t[5].populate(a),o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const d={};d.x=100,d.y=610,d.w=200,d.h=100,d.color="0xef4444ff",d.rotation=40,t[6].nodeId||t[6].populate(d),o=t[1],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};m.x=100,m.y=800,m.w=200,m.h=100,m.color="0xdc2626ff",m.rotation=50,t[7].nodeId||t[7].populate(m),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.y=70,p.x=300,t[8].nodeId||t[8].populate(p),o=t[8],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.x=100,h.y=0,h.w=200,h.h=100,h.color="0xfee2e2ff",h.rotation=60,t[9].nodeId||t[9].populate(h),o=t[8],t[10]||(t[10]=this.element({parent:o||"root"},e));const y={};y.x=100,y.y=150,y.w=200,y.h=100,y.color="0xfecacaff",y.rotation=70,t[10].nodeId||t[10].populate(y),o=t[8],t[11]||(t[11]=this.element({parent:o||"root"},e));const g={};g.x=100,g.y=300,g.w=200,g.h=100,g.color="0xfca5a5ff",g.rotation=80,t[11].nodeId||t[11].populate(g),o=t[8],t[12]||(t[12]=this.element({parent:o||"root"},e));const x={};x.x=100,x.y=450,x.w=200,x.h=100,x.color="0xf87171ff",x.rotation=90,t[12].nodeId||t[12].populate(x),o=t[8],t[13]||(t[13]=this.element({parent:o||"root"},e));const _={};_.x=100,_.y=610,_.w=200,_.h=100,_.color="0xef4444ff",_.rotation=100,t[13].nodeId||t[13].populate(_),o=t[8],t[14]||(t[14]=this.element({parent:o||"root"},e));const S={};S.x=100,S.y=800,S.w=200,S.h=100,S.color="0xdc2626ff",S.rotation=100,t[14].nodeId||t[14].populate(S),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const I={};I.y=70,I.x=600,t[15].nodeId||t[15].populate(I),o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const v={};v.x=100,v.y=0,v.w=200,v.h=100,v.color="0xfee2e2ff",v.rotation=110,t[16].nodeId||t[16].populate(v),o=t[15],t[17]||(t[17]=this.element({parent:o||"root"},e));const P={};P.x=100,P.y=150,P.w=200,P.h=100,P.color="0xfecacaff",P.rotation=120,t[17].nodeId||t[17].populate(P),o=t[15],t[18]||(t[18]=this.element({parent:o||"root"},e));const b={};b.x=100,b.y=300,b.w=200,b.h=100,b.color="0xfca5a5ff",b.rotation=130,t[18].nodeId||t[18].populate(b),o=t[15],t[19]||(t[19]=this.element({parent:o||"root"},e));const k={};k.x=100,k.y=450,k.w=200,k.h=100,k.color="0xf87171ff",k.rotation=140,t[19].nodeId||t[19].populate(k),o=t[15],t[20]||(t[20]=this.element({parent:o||"root"},e));const L={};L.x=100,L.y=610,L.w=200,L.h=100,L.color="0xef4444ff",L.rotation=150,t[20].nodeId||t[20].populate(L),o=t[15],t[21]||(t[21]=this.element({parent:o||"root"},e));const F={};F.x=100,F.y=800,F.w=200,F.h=100,F.color="0xdc2626ff",F.rotation=160,t[21].nodeId||t[21].populate(F),o=t[0],t[22]||(t[22]=this.element({parent:o||"root"},e));const R={};R.y=70,R.x=900,t[22].nodeId||t[22].populate(R),o=t[22],t[23]||(t[23]=this.element({parent:o||"root"},e));const N={};N.x=100,N.y=0,N.w=200,N.h=100,N.color="0xfee2e2ff",N.rotation=170,t[23].nodeId||t[23].populate(N),o=t[22],t[24]||(t[24]=this.element({parent:o||"root"},e));const O={};O.x=100,O.y=150,O.w=200,O.h=100,O.color="0xfecacaff",O.rotation=180,t[24].nodeId||t[24].populate(O),o=t[22],t[25]||(t[25]=this.element({parent:o||"root"},e));const $={};$.x=100,$.y=300,$.w=200,$.h=100,$.color="0xfca5a5ff",$.rotation=190,t[25].nodeId||t[25].populate($),o=t[22],t[26]||(t[26]=this.element({parent:o||"root"},e));const B={};B.x=100,B.y=450,B.w=200,B.h=100,B.color="0xf87171ff",B.rotation=200,t[26].nodeId||t[26].populate(B),o=t[22],t[27]||(t[27]=this.element({parent:o||"root"},e));const T={};T.x=100,T.y=610,T.w=200,T.h=100,T.color="0xef4444ff",T.rotation=210,t[27].nodeId||t[27].populate(T),o=t[22],t[28]||(t[28]=this.element({parent:o||"root"},e));const w={};w.x=100,w.y=800,w.w=200,w.h=100,w.color="0xdc2626ff",w.rotation=220,t[28].nodeId||t[28].populate(w),o=t[0],t[29]||(t[29]=this.element({parent:o||"root"},e));const A={};A.y=70,A.x=1200,t[29].nodeId||t[29].populate(A),o=t[29],t[30]||(t[30]=this.element({parent:o||"root"},e));const z={};z.x=100,z.y=0,z.w=200,z.h=100,z.color="0xfee2e2ff",z.rotation=230,t[30].nodeId||t[30].populate(z),o=t[29],t[31]||(t[31]=this.element({parent:o||"root"},e));const M={};M.x=100,M.y=150,M.w=200,M.h=100,M.color="0xfecacaff",M.rotation=240,t[31].nodeId||t[31].populate(M),o=t[29],t[32]||(t[32]=this.element({parent:o||"root"},e));const E={};E.x=100,E.y=300,E.w=200,E.h=100,E.color="0xfca5a5ff",E.rotation=250,t[32].nodeId||t[32].populate(E),o=t[29],t[33]||(t[33]=this.element({parent:o||"root"},e));const Y={};Y.x=100,Y.y=450,Y.w=200,Y.h=100,Y.color="0xf87171ff",Y.rotation=260,t[33].nodeId||t[33].populate(Y),o=t[29],t[34]||(t[34]=this.element({parent:o||"root"},e));const D={};D.x=100,D.y=610,D.w=200,D.h=100,D.color="0xef4444ff",D.rotation=270,t[34].nodeId||t[34].populate(D),o=t[29],t[35]||(t[35]=this.element({parent:o||"root"},e));const q={};q.x=100,q.y=800,q.w=200,q.h=100,q.color="0xdc2626ff",q.rotation=280,t[35].nodeId||t[35].populate(q),o=t[0],t[36]||(t[36]=this.element({parent:o||"root"},e));const U={};U.y=70,U.x=1500,t[36].nodeId||t[36].populate(U),o=t[36],t[37]||(t[37]=this.element({parent:o||"root"},e));const j={};j.x=100,j.y=0,j.w=200,j.h=100,j.color="0xfee2e2ff",j.rotation=290,t[37].nodeId||t[37].populate(j),o=t[36],t[38]||(t[38]=this.element({parent:o||"root"},e));const Z={};Z.x=100,Z.y=150,Z.w=200,Z.h=100,Z.color="0xfecacaff",Z.rotation=300,t[38].nodeId||t[38].populate(Z),o=t[36],t[39]||(t[39]=this.element({parent:o||"root"},e));const V={};V.x=100,V.y=300,V.w=200,V.h=100,V.color="0xfca5a5ff",V.rotation=310,t[39].nodeId||t[39].populate(V),o=t[36],t[40]||(t[40]=this.element({parent:o||"root"},e));const Q={};Q.x=100,Q.y=450,Q.w=200,Q.h=100,Q.color="0xf87171ff",Q.rotation=320,t[40].nodeId||t[40].populate(Q),o=t[36],t[41]||(t[41]=this.element({parent:o||"root"},e));const oe={};oe.x=100,oe.y=610,oe.w=200,oe.h=100,oe.color="0xef4444ff",oe.rotation=330,t[41].nodeId||t[41].populate(oe),o=t[36],t[42]||(t[42]=this.element({parent:o||"root"},e));const ee={};ee.x=100,ee.y=800,ee.w=200,ee.h=100,ee.color="0xdc2626ff",ee.rotation=340,t[42].nodeId||t[42].populate(ee),o=t[0],t[43]||(t[43]=this.element({parent:o||"root"},e));const K={};K.x=200,K.y=200,K.w=400,K.h=400,K.color="0x0891b2ff",K.rotation=e.rotation1,t[43].nodeId||t[43].populate(K),o=t[0],t[44]||(t[44]=this.element({parent:o||"root"},e));const de={};de.x=800,de.y=200,de.w=400,de.h=400,de.color="0x0891b2ff",t[44].nodeId||t[44].populate(de),o=t[0],t[45]||(t[45]=this.element({parent:o||"root"},e));const le={};return le.x=1400,le.y=200,le.w=400,le.h=400,le.color="0x0891b2ff",t[45].nodeId||t[45].populate(le),t},effects:[function(o,e,s){e[44].set("rotation",o.rotation2)},function(o,e,s){e[45].set("rotation",{transition:o.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){let n=800,o=2e3;this.$setInterval(()=>{const e=this.rotation2+10;this.rotation2=e<=360?e:0},n),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},o)}}}),ol=H.Component("KeyInput",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.x=525,l.y=130,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=200,r.h=200,t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.w=180,i.h=180,i.x=10,i.y=10,t[2].nodeId||t[2].populate(i),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=180,f.h=180,f.x=230,f.y=10,t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=180,c.h=180,c.x=450,c.y=10,t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=180,a.h=180,a.x=670,a.y=10,t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const d={};d.w=180,d.h=180,d.x=10,d.y=220,t[6].nodeId||t[6].populate(d),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};m.w=180,m.h=180,m.x=230,m.y=220,t[7].nodeId||t[7].populate(m),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.w=180,p.h=180,p.x=450,p.y=220,t[8].nodeId||t[8].populate(p),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.w=180,h.h=180,h.x=670,h.y=220,t[9].nodeId||t[9].populate(h),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const y={};y.w=180,y.h=180,y.x=10,y.y=430,t[10].nodeId||t[10].populate(y),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const g={};g.w=180,g.h=180,g.x=230,g.y=430,t[11].nodeId||t[11].populate(g),o=t[0],t[12]||(t[12]=this.element({parent:o||"root"},e));const x={};x.w=180,x.h=180,x.x=450,x.y=430,t[12].nodeId||t[12].populate(x),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const _={};_.w=180,_.h=180,_.x=670,_.y=430,t[13].nodeId||t[13].populate(_),o=t[0],t[14]||(t[14]=this.element({parent:o||"root"},e));const S={};S.w=180,S.h=180,S.x=10,S.y=640,t[14].nodeId||t[14].populate(S),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const I={};I.w=180,I.h=180,I.x=230,I.y=640,t[15].nodeId||t[15].populate(I),o=t[0],t[16]||(t[16]=this.element({parent:o||"root"},e));const v={};v.w=180,v.h=180,v.x=450,v.y=640,t[16].nodeId||t[16].populate(v),o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const P={};return P.w=180,P.h=180,P.x=670,P.y=640,t[17].nodeId||t[17].populate(P),t},effects:[function(o,e,s){e[1].set("color",o.focusColor)},function(o,e,s){e[1].set("x",o.focusedX*220)},function(o,e,s){e[1].set("y",o.focusedY*210)},function(o,e,s){e[2].set("color",o.blockColor)},function(o,e,s){e[3].set("color",o.blockColor)},function(o,e,s){e[4].set("color",o.blockColor)},function(o,e,s){e[5].set("color",o.blockColor)},function(o,e,s){e[6].set("color",o.blockColor)},function(o,e,s){e[7].set("color",o.blockColor)},function(o,e,s){e[8].set("color",o.blockColor)},function(o,e,s){e[9].set("color",o.blockColor)},function(o,e,s){e[10].set("color",o.blockColor)},function(o,e,s){e[11].set("color",o.blockColor)},function(o,e,s){e[12].set("color",o.blockColor)},function(o,e,s){e[13].set("color",o.blockColor)},function(o,e,s){e[14].set("color",o.blockColor)},function(o,e,s){e[15].set("color",o.blockColor)},function(o,e,s){e[16].set("color",o.blockColor)},function(o,e,s){e[17].set("color",o.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(){const n=this.focusedX-1;this.focusedX=Math.max(n,0)},right(){const n=this.focusedX+1;this.focusedX=Math.min(n,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(n){const o=parseInt(n.key);isNaN(o)?this.parent.focus(n):(this.focusedX=Math.max(0,(o-1)%4),this.focusedY=Math.max(0,Math.ceil(o/4)-1))}}}),to=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],oo=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],sl=H.Component("Texts",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.x=100,l.y=100,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.content="Default text",i["@loaded"]=e.textLoaded&&e.textLoaded.bind(e),typeof r<"u")for(let M in r.config.props)delete i[r.config.props[M]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.content="Default text",f["@loaded"]=e.textLoaded&&e.textLoaded.bind(e),!t[2]){const M=f.is||"Text";t[2]=(s.components&&s.components[M]||e[Symbol.for("components")][M]||(()=>{console.error("component Text not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}const c=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.content="123456",a.x=400,typeof c<"u")for(let M in c.config.props)delete a[c.config.props[M]];t[3].nodeId||t[3].populate(a),o=t[3];const d={};if(d.content="123456",d.x=400,!t[4]){const M=d.is||"Text";t[4]=(s.components&&s.components[M]||e[Symbol.for("components")][M]||(()=>{console.error("component Text not found")})).call(null,{props:d},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}const m=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.content="Text with a different fontsize",p.y=120,p.font="raleway",typeof m<"u")for(let M in m.config.props)delete p[m.config.props[M]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};if(h.content="Text with a different fontsize",h.size=e.size,h.y=120,h.font="raleway",!t[6]){const M=h.is||"Text";t[6]=(s.components&&s.components[M]||e[Symbol.for("components")][M]||(()=>{console.error("component Text not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]}const y=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};if(g.content="Text with a different color",g.size=50,g.y=250,typeof y<"u")for(let M in y.config.props)delete g[y.config.props[M]];t[7].nodeId||t[7].populate(g),o=t[7];const x={};if(x.content="Text with a different color",x.size=50,x.color=e.color,x.y=250,!t[8]){const M=x.is||"Text";t[8]=(s.components&&s.components[M]||e[Symbol.for("components")][M]||(()=>{console.error("component Text not found")})).call(null,{props:x},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]}const _=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const S={};if(S.content="Letterspacing",S.size=50,S.color="0x38bdf8ff",S.y=450,S.letterspacing=40,typeof _<"u")for(let M in _.config.props)delete S[_.config.props[M]];t[9].nodeId||t[9].populate(S),o=t[9];const I={};if(I.content="Letterspacing",I.size=50,I.color="0x38bdf8ff",I.y=450,I.letterspacing=40,!t[10]){const M=I.is||"Text";t[10]=(s.components&&s.components[M]||e[Symbol.for("components")][M]||(()=>{console.error("component Text not found")})).call(null,{props:I},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]}o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const v={};v.w=800,v.h=100,v.y=550,v.color="0x94a3b8ff",t[11].nodeId||t[11].populate(v);const P=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[11],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};if(b.content="Text align center",b.size=50,b.y=15,b.color="0xbae6fdff",b.align="center",b.wordwrap=800,typeof P<"u")for(let M in P.config.props)delete b[P.config.props[M]];t[12].nodeId||t[12].populate(b),o=t[12];const k={};if(k.content="Text align center",k.size=50,k.y=15,k.color="0xbae6fdff",k.align="center",k.wordwrap=800,!t[13]){const M=k.is||"Text";t[13]=(s.components&&s.components[M]||e[Symbol.for("components")][M]||(()=>{console.error("component Text not found")})).call(null,{props:k},t[12],e),t[13][Symbol.for("slots")][0]?(o=t[13][Symbol.for("slots")][0],e=t[13]):o=t[13][Symbol.for("children")][0]}o=t[0],t[14]||(t[14]=this.element({parent:o||"root"},e));const L={};L.w=800,L.h=200,L.x=900,L.y=550,L.color="0x94a3b8ff",t[14].nodeId||t[14].populate(L);const F=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[14],t[15]||(t[15]=this.element({parent:o||"root"},e));const R={};if(R.content=e.longText,R.size=40,R.color="0xbae6fdff",R.wordwrap=800,R.maxlines=5,R.textoverflow="!!!",typeof F<"u")for(let M in F.config.props)delete R[F.config.props[M]];t[15].nodeId||t[15].populate(R),o=t[15];const N={};if(N.content=e.longText,N.size=40,N.color="0xbae6fdff",N.wordwrap=800,N.maxlines=5,N.textoverflow="!!!",!t[16]){const M=N.is||"Text";t[16]=(s.components&&s.components[M]||e[Symbol.for("components")][M]||(()=>{console.error("component Text not found")})).call(null,{props:N},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]}o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const O={};O.w=800,O.h=120,O.x=900,O.y=800,O.color="0x94a3b8ff",t[17].nodeId||t[17].populate(O);const $=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[17],t[18]||(t[18]=this.element({parent:o||"root"},e));const B={};if(B.content=e.longText,B.size=40,B.color="0xbae6fdff",B.wordwrap=800,B.maxlines=2,B.lineheight=60,B.textoverflow=!1,typeof $<"u")for(let M in $.config.props)delete B[$.config.props[M]];t[18].nodeId||t[18].populate(B),o=t[18];const T={};if(T.content=e.longText,T.size=40,T.color="0xbae6fdff",T.wordwrap=800,T.maxlines=2,T.lineheight=60,T.textoverflow=!1,!t[19]){const M=T.is||"Text";t[19]=(s.components&&s.components[M]||e[Symbol.for("components")][M]||(()=>{console.error("component Text not found")})).call(null,{props:T},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]}const w=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[20]||(t[20]=this.element({parent:o||"root"},e));const A={};if(A.size=50,A.y=750,A.font="opensans",typeof w<"u")for(let M in w.config.props)delete A[w.config.props[M]];t[20].nodeId||t[20].populate(A),o=t[20];const z={};if(z.content=e.character,z.size=50,z.color=e.color,z.y=750,z.font="opensans",!t[21]){const M=z.is||"Text";t[21]=(s.components&&s.components[M]||e[Symbol.for("components")][M]||(()=>{console.error("component Text not found")})).call(null,{props:z},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[5].set("size",o.size)},function(o,e,s){e[6][Symbol.for("props")].size=o.size},function(o,e,s){e[7].set("color",o.color)},function(o,e,s){e[8][Symbol.for("props")].color=o.color},function(o,e,s){e[20].set("content",o.character)},function(o,e,s){e[20].set("color",o.color)},function(o,e,s){e[21][Symbol.for("props")].content=o.character},function(o,e,s){e[21][Symbol.for("props")].color=o.color}],context:{}},state(){return{color:to[0],size:10,character:oo[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo."}},hooks:{ready(){let n=0;this.$setInterval(()=>{n++,n>to.length-1&&(n=0),this.color=to[n],this.size=10*(n*2+1)},1e3);let o=0;this.$setInterval(()=>{o++,o>oo.length-1&&(o=0),this.character=oo[o]},1400)}},methods:{textLoaded(n){this.$log.info(`Image loaded with w: ${n.w} and h: ${n.h}`)}}}),Mt=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],nl=H.Component("Images",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.src="assets/lightningbolt.png",r.w=428,r.h=234,r.x=100,r.y=100,t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",i.w=428,i.h=234,i.x=100,i.y=400,t[2].nodeId||t[2].populate(i),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=428,f.h=234,f.x=100,f.y=700,f["@loaded"]=e.imageLoaded&&e.imageLoaded.bind(e),t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.color="{top: '0xff0000ff', bottom: '0xffd700ff'}",c.src="assets/lightningbolt.png",c.w=428,c.h=234,c.x=600,c.y=100,t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.x=600,a.y=400,a.w=428,a.h=234,t[5].nodeId||t[5].populate(a),o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const d={};d.src="assets/lightningbolt.png",d.w=856,d.h=468,t[6].nodeId||t[6].populate(d),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};return m.src="assets/lightningbolt.png",m.w=428,m.h=234,m.x=1100,m.y=100,t[7].nodeId||t[7].populate(m),t},effects:[function(o,e,s){e[3].set("src",o.image)},function(o,e,s){e[5].set("clipping",o.clipping)},function(o,e,s){e[7].set("color",o.color)}],context:{}},state(){return{image:Mt[0],clipping:!0,color:"red"}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===Mt[0]?Mt[1]:Mt[0],this.clipping=!this.clipping,this.color=this.color==="red"?"blue":"red"},2e3)}},methods:{imageLoaded(n){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${n.w} and h: ${n.h}`)}}}),et=H.Component("Square",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("w",{transition:o.size})},function(o,e,s){e[0].set("h",{transition:o.size})},function(o,e,s){e[0].set("color",{transition:o.color})}],context:{}},props:[{key:"size",default:80}],state(){return{color:"#86198f"}},watch:{size(n,o){this.$log.info(`Size changed from ${o} to ${n}`),this.color=this.color==="#86198f"?"#9d174d":"#86198f"}}}),Ws=H.Component("Card",{components:{Square:et},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=e.w,l.h=e.h,l.color="0x0891b2ff",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.x=80,i.y=80,typeof r<"u")for(let m in r.config.props)delete i[r.config.props[m]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.x=80,f.y=80,!t[2]){const m=f.is||"Square";t[2]=(s.components&&s.components[m]||e[Symbol.for("components")][m]||(()=>{console.error("component Square not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}const c=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.x=20,a.y=20,a.size=40,typeof c<"u")for(let m in c.config.props)delete a[c.config.props[m]];t[3].nodeId||t[3].populate(a),o=t[3];const d={};if(d.x=20,d.y=20,d.size=40,!t[4]){const m=d.is||"Square";t[4]=(s.components&&s.components[m]||e[Symbol.for("components")][m]||(()=>{console.error("component Square not found")})).call(null,{props:d},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}return t},effects:[],context:{}},props:["size"],computed:{w(){return this.size==="large"?400:200},h(){return this.size==="large"?500:300}}}),il=H.Component("Components",{components:{Square:et,Card:Ws},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.x=100,i.y=100,i.size=50,typeof r<"u")for(let A in r.config.props)delete i[r.config.props[A]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.x=100,f.y=100,f.size=50,!t[2]){const A=f.is||"Square";t[2]=(s.components&&s.components[A]||e[Symbol.for("components")][A]||(()=>{console.error("component Square not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}const c=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.x=100,a.y=200,a.size=100,typeof c<"u")for(let A in c.config.props)delete a[c.config.props[A]];t[3].nodeId||t[3].populate(a),o=t[3];const d={};if(d.x=100,d.y=200,d.size=100,!t[4]){const A=d.is||"Square";t[4]=(s.components&&s.components[A]||e[Symbol.for("components")][A]||(()=>{console.error("component Square not found")})).call(null,{props:d},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}const m=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.x=100,p.y=350,p.size=200,typeof m<"u")for(let A in m.config.props)delete p[m.config.props[A]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};if(h.x=100,h.y=350,h.size=200,!t[6]){const A=h.is||"Square";t[6]=(s.components&&s.components[A]||e[Symbol.for("components")][A]||(()=>{console.error("component Square not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]}const y=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};if(g.y=600,g.size=50,typeof y<"u")for(let A in y.config.props)delete g[y.config.props[A]];t[7].nodeId||t[7].populate(g),o=t[7];const x={};if(x.x={transition:e.x},x.y=600,x.size=50,!t[8]){const A=x.is||"Square";t[8]=(s.components&&s.components[A]||e[Symbol.for("components")][A]||(()=>{console.error("component Square not found")})).call(null,{props:x},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]}const _=s.components&&s.components.Card||e[Symbol.for("components")].Card;o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const S={};if(S.x=500,S.y=100,typeof _<"u")for(let A in _.config.props)delete S[_.config.props[A]];t[9].nodeId||t[9].populate(S),o=t[9];const I={};if(I.x=500,I.y=100,!t[10]){const A=I.is||"Card";t[10]=(s.components&&s.components[A]||e[Symbol.for("components")][A]||(()=>{console.error("component Card not found")})).call(null,{props:I},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]}const v=s.components&&s.components.Card||e[Symbol.for("components")].Card;o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const P={};if(P.x=500,P.y=500,P.size="large",typeof v<"u")for(let A in v.config.props)delete P[v.config.props[A]];t[11].nodeId||t[11].populate(P),o=t[11];const b={};if(b.x=500,b.y=500,b.size="large",!t[12]){const A=b.is||"Card";t[12]=(s.components&&s.components[A]||e[Symbol.for("components")][A]||(()=>{console.error("component Card not found")})).call(null,{props:b},t[11],e),t[12][Symbol.for("slots")][0]?(o=t[12][Symbol.for("slots")][0],e=t[12]):o=t[12][Symbol.for("children")][0]}const k=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const L={};if(L.x=100,L.y=750,typeof k<"u")for(let A in k.config.props)delete L[k.config.props[A]];t[13].nodeId||t[13].populate(L),o=t[13];const F={};if(F.x=100,F.y=750,F.size=e.size,!t[14]){const A=F.is||"Square";t[14]=(s.components&&s.components[A]||e[Symbol.for("components")][A]||(()=>{console.error("component Square not found")})).call(null,{props:F},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]}o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const R={};R.x=1100,R.y=200,t[15].nodeId||t[15].populate(R);const N=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const O={};if(O.content="Dynamic components",typeof N<"u")for(let A in N.config.props)delete O[N.config.props[A]];t[16].nodeId||t[16].populate(O),o=t[16];const $={};if($.content="Dynamic components",!t[17]){const A=$.is||"Text";t[17]=(s.components&&s.components[A]||e[Symbol.for("components")][A]||(()=>{console.error("component Text not found")})).call(null,{props:$},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]}const B=s.components&&s.components.Component||e[Symbol.for("components")].Component;o=t[15],t[18]||(t[18]=this.element({parent:o||"root"},e));const T={};if(T.is=e.dynamicComponent,T.y=100,typeof B<"u")for(let A in B.config.props)delete T[B.config.props[A]];t[18].nodeId||t[18].populate(T),o=t[18];const w={};if(w.is=e.dynamicComponent,w.y=100,!t[19]){const A=w.is||"Component";t[19]=(s.components&&s.components[A]||e[Symbol.for("components")][A]||(()=>{console.error("component Component not found")})).call(null,{props:w},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[7].set("x",{transition:o.x})},function(o,e,s){e[8][Symbol.for("props")].x={transition:o.x}},function(o,e,s){e[13].set("size",o.size)},function(o,e,s){e[14][Symbol.for("props")].size=o.size},function(o,e,s){parent=e[15];const t=o.dynamicComponents||[],l=[];for(let r=0;r<t.length;r++){parent=e[15],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,component:t[r]});l.push(i.key.toString());const f=s.components&&s.components.Component||o[Symbol.for("components")].Component;e[20]=e[20]||{},e[20][i.key]||(e[20][i.key]=this.element({parent:parent||"root"},o));const c={};if(c.is=i.component,c.y=300,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[20][i.key].nodeId||e[20][i.key].populate(c),e[21]=e[21]||{},parent=e[20][i.key];const a={};if(a.is=i.component,a.x=250*i.index,a.y=300,!e[21][i.key]){const d=a.is||"Component";e[21][i.key]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component Component not found")})).call(null,{props:a},e[20][i.key],o),e[21][i.key][Symbol.for("slots")][0]?(parent=e[21][i.key][Symbol.for("slots")][0],o=e[21][i.key]):parent=e[21][i.key][Symbol.for("children")][0]}e[20][i.key].set("x",250*i.index),e[21][i.key][Symbol.for("props")].x=250*i.index}e[20]&&Object.keys(e[20]).forEach(r=>{l.indexOf(r)===-1&&(e[20][r].destroy&&e[20][r].destroy(),delete e[1][r])})}],context:{}},state(){return{x:100,dynamicComponent:"Square",dynamicComponents:["Square","Card","Square"],toggle:!1,size:50}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100,this.size=this.size===50?200:50},2e3)}}}),me=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],rl=H.Component("ForLoop",{components:{Square:et},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=20,t[1].nodeId||t[1].populate(r),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const i={};i.y=120,t[3].nodeId||t[3].populate(i),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.y=220,t[5].nodeId||t[5].populate(f),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const c={};c.y=320,t[7].nodeId||t[7].populate(c),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const a={};a.y=420,t[10].nodeId||t[10].populate(a),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const d={};d.y=520,t[13].nodeId||t[13].populate(d),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const m={};m.y=620,t[15].nodeId||t[15].populate(m),o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const p={};p.y=720,t[17].nodeId||t[17].populate(p),o=t[0],t[19]||(t[19]=this.element({parent:o||"root"},e));const h={};h.y=720,h.x=700,t[19].nodeId||t[19].populate(h),o=t[0],t[21]||(t[21]=this.element({parent:o||"root"},e));const y={};y.y=920,t[21].nodeId||t[21].populate(y),o=t[0],t[24]||(t[24]=this.element({parent:o||"root"},e));const g={};return g.y=920,g.x=700,t[24].nodeId||t[24].populate(g),t},effects:[function(o,e,s){parent=e[1];const t=o.collection1||[],l=[];for(let r=0;r<t.length;r++){parent=e[1],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.key.toString()),parent=e[1],e[2]=e[2]||{},e[2][i.key]||(e[2][i.key]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.x=i.item,f.color="0x4d7c0fff",e[2][i.key].nodeId||e[2][i.key].populate(f)}e[2]&&Object.keys(e[2]).forEach(r=>{l.indexOf(r)===-1&&(e[2][r].destroy&&e[2][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[3];const t=o.collection2||[],l=[];for(let r=0;r<t.length;r++){parent=e[3],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.item.id.toString()),parent=e[3],e[4]=e[4]||{},e[4][i.item.id]||(e[4][i.item.id]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color=i.item.color,f.key=i.item.id,e[4][i.item.id].nodeId||e[4][i.item.id].populate(f),e[4][i.item.id].set("x",i.item.x*i.index)}e[4]&&Object.keys(e[4]).forEach(r=>{l.indexOf(r)===-1&&(e[4][r].destroy&&e[4][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[5];const t=o.collection3||[],l=[];for(let r=0;r<t.length;r++){parent=e[5],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.key.toString()),parent=e[5],e[6]=e[6]||{},e[6][i.key]||(e[6][i.key]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color=i.item.color,e[6][i.key].nodeId||e[6][i.key].populate(f),e[6][i.key].set("x",i.item.x)}e[6]&&Object.keys(e[6]).forEach(r=>{l.indexOf(r)===-1&&(e[6][r].destroy&&e[6][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[7];const t=o.collection2||[],l=[];for(let r=0;r<t.length;r++){parent=e[7],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.key.toString());const f=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[8]=e[8]||{},e[8][i.key]||(e[8][i.key]=this.element({parent:parent||"root"},o));const c={};if(typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[8][i.key].nodeId||e[8][i.key].populate(c),e[9]=e[9]||{},parent=e[8][i.key];const a={};if(a.x=i.item.x*i.index,a.ref="square"+i.index,a.alpha=i.alpha,!e[9][i.key]){const d=a.is||"Square";e[9][i.key]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component Square not found")})).call(null,{props:a},e[8][i.key],o),e[9][i.key][Symbol.for("slots")][0]?(parent=e[9][i.key][Symbol.for("slots")][0],o=e[9][i.key]):parent=e[9][i.key][Symbol.for("children")][0]}e[8][i.key].set("x",i.item.x*i.index),e[8][i.key].set("ref","square"+i.index),e[8][i.key].set("alpha",i.alpha),e[9][i.key][Symbol.for("props")].x=i.item.x*i.index,e[9][i.key][Symbol.for("props")].ref="square"+i.index,e[9][i.key][Symbol.for("props")].alpha=i.alpha}e[8]&&Object.keys(e[8]).forEach(r=>{l.indexOf(r)===-1&&(e[8][r].destroy&&e[8][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[10];const t=o.collection3||[],l=[];for(let r=0;r<t.length;r++){parent=e[10],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.item.color.toString());const f=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[11]=e[11]||{},e[11][i.item.color]||(e[11][i.item.color]=this.element({parent:parent||"root"},o));const c={};if(c.key=i.item.color,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[11][i.item.color].nodeId||e[11][i.item.color].populate(c),e[12]=e[12]||{},parent=e[11][i.item.color];const a={};if(a.x=i.item.x,a.key=i.item.color,a.alpha=i.alpha,!e[12][i.item.color]){const d=a.is||"Square";e[12][i.item.color]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component Square not found")})).call(null,{props:a},e[11][i.item.color],o),e[12][i.item.color][Symbol.for("slots")][0]?(parent=e[12][i.item.color][Symbol.for("slots")][0],o=e[12][i.item.color]):parent=e[12][i.item.color][Symbol.for("children")][0]}e[11][i.item.color].set("x",i.item.x),e[11][i.item.color].set("alpha",i.alpha),e[12][i.item.color][Symbol.for("props")].x=i.item.x,e[12][i.item.color][Symbol.for("props")].alpha=i.alpha}e[11]&&Object.keys(e[11]).forEach(r=>{l.indexOf(r)===-1&&(e[11][r].destroy&&e[11][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[13];const t=o.collection1||[],l=[];for(let r=0;r<t.length;r++){parent=e[13],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.key.toString()),parent=e[13],e[14]=e[14]||{},e[14][i.key]||(e[14][i.key]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color="0xeab308ff",e[14][i.key].nodeId||e[14][i.key].populate(f),e[14][i.key].set("x",i.item),e[14][i.key].set("alpha",i.alpha)}e[14]&&Object.keys(e[14]).forEach(r=>{l.indexOf(r)===-1&&(e[14][r].destroy&&e[14][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[15];const t=o.collection2||[],l=[];for(let r=0;r<t.length;r++){parent=e[15],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.item.id.toString()),parent=e[15],e[16]=e[16]||{},e[16][i.item.id]||(e[16][i.item.id]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color=i.item.color,f.key=i.item.id,e[16][i.item.id].nodeId||e[16][i.item.id].populate(f),e[16][i.item.id].set("x",i.item.x),e[16][i.item.id].set("alpha",i.alpha)}e[16]&&Object.keys(e[16]).forEach(r=>{l.indexOf(r)===-1&&(e[16][r].destroy&&e[16][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[17];const t=o.collection4||[],l=[];for(let r=0;r<t.length;r++){parent=e[17],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.item.id.toString()),parent=e[17],e[18]=e[18]||{},e[18][i.item.id]||(e[18][i.item.id]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color="0x06b6d4ff",f.key=i.item.id,e[18][i.item.id].nodeId||e[18][i.item.id].populate(f),e[18][i.item.id].set("x",i.item.x)}e[18]&&Object.keys(e[18]).forEach(r=>{l.indexOf(r)===-1&&(e[18][r].destroy&&e[18][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[19];const t=o.collection4||[],l=[];for(let r=0;r<t.length;r++){parent=e[19],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.key.toString()),parent=e[19],e[20]=e[20]||{},e[20][i.key]||(e[20][i.key]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color="0x8b5cf6ff",e[20][i.key].nodeId||e[20][i.key].populate(f),e[20][i.key].set("x",i.item.x)}e[20]&&Object.keys(e[20]).forEach(r=>{l.indexOf(r)===-1&&(e[20][r].destroy&&e[20][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[21];const t=o.collection4||[],l=[];for(let r=0;r<t.length;r++){parent=e[21],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.item.id.toString());const f=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[22]=e[22]||{},e[22][i.item.id]||(e[22][i.item.id]=this.element({parent:parent||"root"},o));const c={};if(c.w=80,c.h=80,c.key=i.item.id,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[22][i.item.id].nodeId||e[22][i.item.id].populate(c),e[23]=e[23]||{},parent=e[22][i.item.id];const a={};if(a.w=80,a.h=80,a.x=i.item.x,a.key=i.item.id,!e[23][i.item.id]){const d=a.is||"Square";e[23][i.item.id]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component Square not found")})).call(null,{props:a},e[22][i.item.id],o),e[23][i.item.id][Symbol.for("slots")][0]?(parent=e[23][i.item.id][Symbol.for("slots")][0],o=e[23][i.item.id]):parent=e[23][i.item.id][Symbol.for("children")][0]}e[22][i.item.id].set("x",i.item.x),e[23][i.item.id][Symbol.for("props")].x=i.item.x}e[22]&&Object.keys(e[22]).forEach(r=>{l.indexOf(r)===-1&&(e[22][r].destroy&&e[22][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[24];const t=o.collection4||[],l=[];for(let r=0;r<t.length;r++){parent=e[24],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.key.toString());const f=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[25]=e[25]||{},e[25][i.key]||(e[25][i.key]=this.element({parent:parent||"root"},o));const c={};if(c.w=80,c.h=80,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[25][i.key].nodeId||e[25][i.key].populate(c),e[26]=e[26]||{},parent=e[25][i.key];const a={};if(a.w=80,a.h=80,a.x=i.item.x,!e[26][i.key]){const d=a.is||"Square";e[26][i.key]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component Square not found")})).call(null,{props:a},e[25][i.key],o),e[26][i.key][Symbol.for("slots")][0]?(parent=e[26][i.key][Symbol.for("slots")][0],o=e[26][i.key]):parent=e[26][i.key][Symbol.for("children")][0]}e[25][i.key].set("x",i.item.x),e[26][i.key][Symbol.for("props")].x=i.item.x}e[25]&&Object.keys(e[25]).forEach(r=>{l.indexOf(r)===-1&&(e[25][r].destroy&&e[25][r].destroy(),delete e[1][r])})}],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:me[0]},{id:"block2",x:100,color:me[1]},{id:"block3",x:200,color:me[2]},{id:"block4",x:300,color:me[3]},{id:"block5",x:400,color:me[4]},{id:"block6",x:500,color:me[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=me[5],this.collection2[1].color=me[4],this.collection2[2].color=me[3],this.collection2[3].color=me[2],this.collection2[4].color=me[1],this.collection2[5].color=me[0]},4e3);let n=0;const o=this.$setInterval(()=>{this.collection3.push({x:n*100,color:me[n]}),n++,n===me.length&&clearInterval(o)},1e3);this.$setTimeout(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),Jo=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],es=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],ts=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],so=n=>Math.round(Math.random()*1e3)%n;let ll=0;const ct=()=>({id:ll++,text:`${Jo[so(Jo.length)]} ${es[so(es.length)]} ${ts[so(ts.length)]}`}),fl=(n=1)=>{const o=[];for(let e=0;e<n;e++)o.push(ct());return o},al=H.Component("LegendItem",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Circle||e[Symbol.for("components")].Circle;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.color="0xfb923cff",i.size=60,typeof r<"u")for(let y in r.config.props)delete i[r.config.props[y]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.color="0xfb923cff",f.size=60,!t[2]){const y=f.is||"Circle";t[2]=(s.components&&s.components[y]||e[Symbol.for("components")][y]||(()=>{console.error("component Circle not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}const c=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.color="0xe5e5e5ff",a.size=32,a.y=10,a.wordwrap=57,a.align="center",a.content=""+e.id,typeof c<"u")for(let y in c.config.props)delete a[c.config.props[y]];t[3].nodeId||t[3].populate(a),o=t[3];const d={};if(d.color="0xe5e5e5ff",d.size=32,d.y=10,d.wordwrap=57,d.align="center",d.content=""+e.id,!t[4]){const y=d.is||"Text";t[4]=(s.components&&s.components[y]||e[Symbol.for("components")][y]||(()=>{console.error("component Text not found")})).call(null,{props:d},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}const m=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.color="0xe5e5e5ff",p.x=80,p.y=14,p.size=28,p.content=""+e.text,typeof m<"u")for(let y in m.config.props)delete p[m.config.props[y]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};if(h.color="0xe5e5e5ff",h.x=80,h.y=14,h.size=28,h.content=""+e.text,!t[6]){const y=h.is||"Text";t[6]=(s.components&&s.components[y]||e[Symbol.for("components")][y]||(()=>{console.error("component Text not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]}return t},effects:[],context:{}},props:["id","text"]}),Ys=H.Component("Row",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=500,l.h=60,l.color="0xfff7edff",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=10,r.h=60,r.color="0x06b6d4ff",t[1].nodeId||t[1].populate(r);const i=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.content=e.text,f.x=30,f.y=10,f.font="opensans",f.color="0x1e293bff",typeof i<"u")for(let a in i.config.props)delete f[i.config.props[a]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};if(c.content=e.text,c.x=30,c.y=10,c.font="opensans",c.color="0x1e293bff",!t[3]){const a=c.is||"Text";t[3]=(s.components&&s.components[a]||e[Symbol.for("components")][a]||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[0].set("y",o.index*80)}],context:{}},props:["index","text"]}),cl=H.Component("Row",{components:{Row:Ys},code:{render:function(o,e,s){return[]},effects:[function(o,e,s){const t=o.data||[],l=[];for(let r=0;r<t.length;r++){parent=!1,o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.item.id+"key2".toString());const f=s.components&&s.components.Row||o[Symbol.for("components")].Row;e[0]=e[0]||{},e[0][i.item.id+"key2"]||(e[0][i.item.id+"key2"]=this.element({parent:parent||"root"},o));const c={};if(c.key=i.item.id+"key2",c.text=i.item.text,c.y=50,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[0][i.item.id+"key2"].nodeId||e[0][i.item.id+"key2"].populate(c),e[1]=e[1]||{},parent=e[0][i.item.id+"key2"];const a={};if(a.key=i.item.id+"key2",a.index=i.index,a.text=i.item.text,a.y=50,!e[1][i.item.id+"key2"]){const d=a.is||"Row";e[1][i.item.id+"key2"]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component Row not found")})).call(null,{props:a},e[0][i.item.id+"key2"],o),e[1][i.item.id+"key2"][Symbol.for("slots")][0]?(parent=e[1][i.item.id+"key2"][Symbol.for("slots")][0],o=e[1][i.item.id+"key2"]):parent=e[1][i.item.id+"key2"][Symbol.for("children")][0]}e[0][i.item.id+"key2"].set("index",i.index),e[1][i.item.id+"key2"][Symbol.for("props")].index=i.index}e[0]&&Object.keys(e[0]).forEach(r=>{l.indexOf(r)===-1&&(e[0][r].destroy&&e[0][r].destroy(),delete e[1][r])})}],context:{}},props:["data"]}),dl=H.Component("ForLoop",{components:{Square:et,LegendItem:al,Row:Ys,Rows:cl},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.x=100,i.y=60,i.size=48,i.content="Array operations test",typeof r<"u")for(let W in r.config.props)delete i[r.config.props[W]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.x=100,f.y=60,f.size=48,f.content="Array operations test",!t[2]){const W=f.is||"Text";t[2]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component Text not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};c.y=170,c.x=140,t[3].nodeId||t[3].populate(c),o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};a.x=-10,a.w=500,a.h=80,a.color="0x64748bff",t[4].nodeId||t[4].populate(a);const d=s.components&&s.components.LegendItem||e[Symbol.for("components")].LegendItem;o=t[3],t[5]||(t[5]=this.element({parent:o||"root"},e));const m={};if(m.y=0,m.id="a",m.text="Fill array by assignment",typeof d<"u")for(let W in d.config.props)delete m[d.config.props[W]];t[5].nodeId||t[5].populate(m),o=t[5];const p={};if(p.y=0,p.id="a",p.text="Fill array by assignment",!t[6]){const W=p.is||"LegendItem";t[6]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component LegendItem not found")})).call(null,{props:p},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]}const h=s.components&&s.components.LegendItem||e[Symbol.for("components")].LegendItem;o=t[3],t[7]||(t[7]=this.element({parent:o||"root"},e));const y={};if(y.y=90,y.id="b",y.text="Push new item to array",typeof h<"u")for(let W in h.config.props)delete y[h.config.props[W]];t[7].nodeId||t[7].populate(y),o=t[7];const g={};if(g.y=90,g.id="b",g.text="Push new item to array",!t[8]){const W=g.is||"LegendItem";t[8]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component LegendItem not found")})).call(null,{props:g},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]}const x=s.components&&s.components.LegendItem||e[Symbol.for("components")].LegendItem;o=t[3],t[9]||(t[9]=this.element({parent:o||"root"},e));const _={};if(_.y=180,_.id="c",_.text="Pop item from array",typeof x<"u")for(let W in x.config.props)delete _[x.config.props[W]];t[9].nodeId||t[9].populate(_),o=t[9];const S={};if(S.y=180,S.id="c",S.text="Pop item from array",!t[10]){const W=S.is||"LegendItem";t[10]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component LegendItem not found")})).call(null,{props:S},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]}const I=s.components&&s.components.LegendItem||e[Symbol.for("components")].LegendItem;o=t[3],t[11]||(t[11]=this.element({parent:o||"root"},e));const v={};if(v.y=270,v.id="d",v.text="Shift item from array",typeof I<"u")for(let W in I.config.props)delete v[I.config.props[W]];t[11].nodeId||t[11].populate(v),o=t[11];const P={};if(P.y=270,P.id="d",P.text="Shift item from array",!t[12]){const W=P.is||"LegendItem";t[12]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component LegendItem not found")})).call(null,{props:P},t[11],e),t[12][Symbol.for("slots")][0]?(o=t[12][Symbol.for("slots")][0],e=t[12]):o=t[12][Symbol.for("children")][0]}const b=s.components&&s.components.LegendItem||e[Symbol.for("components")].LegendItem;o=t[3],t[13]||(t[13]=this.element({parent:o||"root"},e));const k={};if(k.y=360,k.id="e",k.text="Splice 2 items from array",typeof b<"u")for(let W in b.config.props)delete k[b.config.props[W]];t[13].nodeId||t[13].populate(k),o=t[13];const L={};if(L.y=360,L.id="e",L.text="Splice 2 items from array",!t[14]){const W=L.is||"LegendItem";t[14]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component LegendItem not found")})).call(null,{props:L},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]}const F=s.components&&s.components.LegendItem||e[Symbol.for("components")].LegendItem;o=t[3],t[15]||(t[15]=this.element({parent:o||"root"},e));const R={};if(R.y=450,R.id="f",R.text="Unshift 2 items into array",typeof F<"u")for(let W in F.config.props)delete R[F.config.props[W]];t[15].nodeId||t[15].populate(R),o=t[15];const N={};if(N.y=450,N.id="f",N.text="Unshift 2 items into array",!t[16]){const W=N.is||"LegendItem";t[16]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component LegendItem not found")})).call(null,{props:N},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]}const O=s.components&&s.components.LegendItem||e[Symbol.for("components")].LegendItem;o=t[3],t[17]||(t[17]=this.element({parent:o||"root"},e));const $={};if($.y=540,$.id="g",$.text="Empty array by assignment",typeof O<"u")for(let W in O.config.props)delete $[O.config.props[W]];t[17].nodeId||t[17].populate($),o=t[17];const B={};if(B.y=540,B.id="g",B.text="Empty array by assignment",!t[18]){const W=B.is||"LegendItem";t[18]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component LegendItem not found")})).call(null,{props:B},t[17],e),t[18][Symbol.for("slots")][0]?(o=t[18][Symbol.for("slots")][0],e=t[18]):o=t[18][Symbol.for("children")][0]}const T=s.components&&s.components.LegendItem||e[Symbol.for("components")].LegendItem;o=t[3],t[19]||(t[19]=this.element({parent:o||"root"},e));const w={};if(w.y=630,w.id="h",w.text="Concat an array with items",typeof T<"u")for(let W in T.config.props)delete w[T.config.props[W]];t[19].nodeId||t[19].populate(w),o=t[19];const A={};if(A.y=630,A.id="h",A.text="Concat an array with items",!t[20]){const W=A.is||"LegendItem";t[20]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component LegendItem not found")})).call(null,{props:A},t[19],e),t[20][Symbol.for("slots")][0]?(o=t[20][Symbol.for("slots")][0],e=t[20]):o=t[20][Symbol.for("children")][0]}const z=s.components&&s.components.LegendItem||e[Symbol.for("components")].LegendItem;o=t[3],t[21]||(t[21]=this.element({parent:o||"root"},e));const M={};if(M.y=720,M.id="i",M.text="Sort array alphabetically",typeof z<"u")for(let W in z.config.props)delete M[z.config.props[W]];t[21].nodeId||t[21].populate(M),o=t[21];const E={};if(E.y=720,E.id="i",E.text="Sort array alphabetically",!t[22]){const W=E.is||"LegendItem";t[22]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component LegendItem not found")})).call(null,{props:E},t[21],e),t[22][Symbol.for("slots")][0]?(o=t[22][Symbol.for("slots")][0],e=t[22]):o=t[22][Symbol.for("children")][0]}o=t[3],t[23]||(t[23]=this.element({parent:o||"root"},e));const Y={};Y.y=840,t[23].nodeId||t[23].populate(Y);const D=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[23],t[24]||(t[24]=this.element({parent:o||"root"},e));const q={};if(q.size=26,q.y=10,q.content="Array length:",typeof D<"u")for(let W in D.config.props)delete q[D.config.props[W]];t[24].nodeId||t[24].populate(q),o=t[24];const U={};if(U.size=26,U.y=10,U.content="Array length:",!t[25]){const W=U.is||"Text";t[25]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component Text not found")})).call(null,{props:U},t[24],e),t[25][Symbol.for("slots")][0]?(o=t[25][Symbol.for("slots")][0],e=t[25]):o=t[25][Symbol.for("children")][0]}const j=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[23],t[26]||(t[26]=this.element({parent:o||"root"},e));const Z={};if(Z.size=40,Z.x=180,Z.color="0xfb923cff",typeof j<"u")for(let W in j.config.props)delete Z[j.config.props[W]];t[26].nodeId||t[26].populate(Z),o=t[26];const V={};if(V.content=e.data.length,V.size=40,V.x=180,V.color="0xfb923cff",!t[27]){const W=V.is||"Text";t[27]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component Text not found")})).call(null,{props:V},t[26],e),t[27][Symbol.for("slots")][0]?(o=t[27][Symbol.for("slots")][0],e=t[27]):o=t[27][Symbol.for("children")][0]}o=t[0],t[28]||(t[28]=this.element({parent:o||"root"},e));const Q={};Q.x=740,Q.y=100,t[28].nodeId||t[28].populate(Q);const oe=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[28],t[29]||(t[29]=this.element({parent:o||"root"},e));const ee={};if(ee.content="For loop on Element",typeof oe<"u")for(let W in oe.config.props)delete ee[oe.config.props[W]];t[29].nodeId||t[29].populate(ee),o=t[29];const K={};if(K.content="For loop on Element",!t[30]){const W=K.is||"Text";t[30]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component Text not found")})).call(null,{props:K},t[29],e),t[30][Symbol.for("slots")][0]?(o=t[30][Symbol.for("slots")][0],e=t[30]):o=t[30][Symbol.for("children")][0]}o=t[0],t[35]||(t[35]=this.element({parent:o||"root"},e));const de={};de.x=1280,de.y=100,t[35].nodeId||t[35].populate(de);const le=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[35],t[36]||(t[36]=this.element({parent:o||"root"},e));const fe={};if(fe.content="For loop on Component",typeof le<"u")for(let W in le.config.props)delete fe[le.config.props[W]];t[36].nodeId||t[36].populate(fe),o=t[36];const ue={};if(ue.content="For loop on Component",!t[37]){const W=ue.is||"Text";t[37]=(s.components&&s.components[W]||e[Symbol.for("components")][W]||(()=>{console.error("component Text not found")})).call(null,{props:ue},t[36],e),t[37][Symbol.for("slots")][0]?(o=t[37][Symbol.for("slots")][0],e=t[37]):o=t[37][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[4].set("y",{transition:o.y})},function(o,e,s){e[4].set("alpha",{transition:!o.hide})},function(o,e,s){e[26].set("content",o.data.length)},function(o,e,s){e[27][Symbol.for("props")].content=o.data.length},function(o,e,s){parent=e[28];const t=o.data||[],l=[];for(let r=0;r<t.length;r++){parent=e[28],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.item.id+"key".toString()),parent=e[28],e[31]=e[31]||{},e[31][i.item.id+"key"]||(e[31][i.item.id+"key"]=this.element({parent:parent||"root"},o));const f={};f.key=i.item.id+"key",f.w=500,f.h=60,f.color="0xfff7edff",e[31][i.item.id+"key"].nodeId||e[31][i.item.id+"key"].populate(f),parent=e[31][i.item.id+"key"],e[32]=e[32]||{},e[32][i.item.id+"key"]||(e[32][i.item.id+"key"]=this.element({parent:parent||"root"},o));const c={};c.w=10,c.h=60,c.color="0xfb923cff",e[32][i.item.id+"key"].nodeId||e[32][i.item.id+"key"].populate(c);const a=s.components&&s.components.Text||o[Symbol.for("components")].Text;parent=e[31][i.item.id+"key"],e[33]=e[33]||{},e[33][i.item.id+"key"]||(e[33][i.item.id+"key"]=this.element({parent:parent||"root"},o));const d={};if(d.content=i.item.text,d.x=30,d.y=10,d.font="opensans",d.color="0x1e293bff",typeof a<"u")for(let p in a.config.props)delete d[a.config.props[p]];e[33][i.item.id+"key"].nodeId||e[33][i.item.id+"key"].populate(d),e[34]=e[34]||{},parent=e[33][i.item.id+"key"];const m={};if(m.content=i.item.text,m.x=30,m.y=10,m.font="opensans",m.color="0x1e293bff",!e[34][i.item.id+"key"]){const p=m.is||"Text";e[34][i.item.id+"key"]=(s.components&&s.components[p]||o[Symbol.for("components")][p]||(()=>{console.error("component Text not found")})).call(null,{props:m},e[33][i.item.id+"key"],o),e[34][i.item.id+"key"][Symbol.for("slots")][0]?(parent=e[34][i.item.id+"key"][Symbol.for("slots")][0],o=e[34][i.item.id+"key"]):parent=e[34][i.item.id+"key"][Symbol.for("children")][0]}e[31][i.item.id+"key"].set("y",i.index*80+50)}e[31]&&Object.keys(e[31]).forEach(r=>{l.indexOf(r)===-1&&(e[31][r].destroy&&e[31][r].destroy(),delete e[1][r])})},function(o,e,s){parent=e[35];const t=o.data||[],l=[];for(let r=0;r<t.length;r++){parent=e[35],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.item.id+"key2".toString());const f=s.components&&s.components.Row||o[Symbol.for("components")].Row;e[38]=e[38]||{},e[38][i.item.id+"key2"]||(e[38][i.item.id+"key2"]=this.element({parent:parent||"root"},o));const c={};if(c.key=i.item.id+"key2",c.text=i.item.text,c.y=50,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[38][i.item.id+"key2"].nodeId||e[38][i.item.id+"key2"].populate(c),e[39]=e[39]||{},parent=e[38][i.item.id+"key2"];const a={};if(a.key=i.item.id+"key2",a.index=i.index,a.text=i.item.text,a.y=50,!e[39][i.item.id+"key2"]){const d=a.is||"Row";e[39][i.item.id+"key2"]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component Row not found")})).call(null,{props:a},e[38][i.item.id+"key2"],o),e[39][i.item.id+"key2"][Symbol.for("slots")][0]?(parent=e[39][i.item.id+"key2"][Symbol.for("slots")][0],o=e[39][i.item.id+"key2"]):parent=e[39][i.item.id+"key2"][Symbol.for("children")][0]}e[38][i.item.id+"key2"].set("index",i.index),e[39][i.item.id+"key2"][Symbol.for("props")].index=i.index}e[38]&&Object.keys(e[38]).forEach(r=>{l.indexOf(r)===-1&&(e[38][r].destroy&&e[38][r].destroy(),delete e[1][r])})}],context:{}},state(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1}},computed:{show(){return this.hide>0},data2(){return this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const n=[];for(let o=0;o<6;o++)n.push(ct());this.data=n},b(){this.y=80,this.$trigger("y"),this.data.push(ct())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.$trigger("y"),this.data.unshift(ct(),ct())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(fl(3))},i(){this.y=710,this.$trigger("y"),this.data=this.data.sort((n,o)=>{const e=n.text.toLowerCase(),s=o.text.toLowerCase();return this.sortDirection=this.sortDirection===1?0:1,this.sortDirection===1?e<s?-1:e>s?1:0:e>s?-1:e<s?1:0})}}}),ul=H.Component("Effects",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=160,r.h=160,r.x=40,r.y=40,r.color="0xfb923cff",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.w=160,i.h=160,i.x=240,i.y=40,i.color="0xd97706ff",t[2].nodeId||t[2].populate(i),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=160,f.h=160,f.x=440,f.y=40,f.color="0xb45309ff",t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=160,c.h=160,c.x=640,c.y=40,c.color="0x78350fff",t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=160,a.h=160,a.x=40,a.y=240,a.color="0x65a30dff",t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const d={};d.w=300,d.h=300,d.x=40,d.y=440,d.color="0x0c4a6eff",t[6].nodeId||t[6].populate(d),o=t[6],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};m.w=200,m.h=200,m.x=50,m.y=50,m.color="0x0284c7ff",t[7].nodeId||t[7].populate(m),o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.w=100,p.h=100,p.x=50,p.y=50,p.color="0x38bdf8ff",t[8].nodeId||t[8].populate(p),o=t[8],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.w=40,h.h=40,h.x=30,h.y=30,h.color="0xbae6fdff",t[9].nodeId||t[9].populate(h),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const y={};y.w=160,y.h=160,y.x=840,y.y=40,y.color="0x3b82f6ff",t[10].nodeId||t[10].populate(y),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const g={};return g.w=160,g.h=160,g.x=1040,g.y=40,g.color="0x500724ff",t[11].nodeId||t[11].populate(g),t},effects:[function(o,e,s){e[1].set("effects",[o.shader("radius",{radius:44})])},function(o,e,s){e[2].set("effects",[o.shader("radius",{radius:25})])},function(o,e,s){e[3].set("effects",[o.shader("radius",{radius:80})])},function(o,e,s){e[4].set("effects",[o.shader("radius",{radius:10})])},function(o,e,s){e[5].set("effects",[o.shader("radius",{radius:o.radius})])},function(o,e,s){e[6].set("effects",[o.shader("radius",{radius:30})])},function(o,e,s){e[7].set("effects",[o.shader("radius",{radius:40})])},function(o,e,s){e[8].set("effects",[o.shader("radius",{radius:50})])},function(o,e,s){e[9].set("effects",[o.shader("radius",{radius:20})])},function(o,e,s){e[10].set("effects",[o.shader("radius",{radius:10}),o.shader("border",{width:20,color:"0x60a5faff"})])},function(o,e,s){e[11].set("effects",o.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]}},hooks:{ready(){this.$setInterval(()=>{const o=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(o,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let n=0;this.$setInterval(()=>{n++,n%2?this.effects=[this.shader("borderLeft",{width:20,color:"#be123c"}),this.shader("borderRight",{width:20,color:"#f43f5e"})]:this.effects=[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]},2e3)}}}),hl=H.Component("ShowIf",{components:{Square:et},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=40,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.x=50,i.w=200,i.h=300,i.color="0xbef264ff",i.show=!0,t[2].nodeId||t[2].populate(i),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.x=350,f.w=200,f.h=300,f.color="0xff0000ff",f.show=!1,t[3].nodeId||t[3].populate(f),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.x=650,c.w=200,c.h=300,c.color="0x84cc16ff",c.show=1,t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.x=950,a.w=200,a.h=300,a.color="0xff0000ff",a.show=0,t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const d={};d.y=380,t[6].nodeId||t[6].populate(d),o=t[6],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};m.x=50,m.w=200,m.h=300,m.color="0xfde047ff",m.show=e.showNr,t[7].nodeId||t[7].populate(m),o=t[6],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.x=350,p.w=200,p.h=300,p.color="0x0000ffff",p.show=e.hideNr,t[8].nodeId||t[8].populate(p),o=t[6],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.x=650,h.w=200,h.h=300,h.color="0x84cc16ff",h.show=e.showBool,t[9].nodeId||t[9].populate(h),o=t[6],t[10]||(t[10]=this.element({parent:o||"root"},e));const y={};y.x=950,y.w=200,y.h=300,y.color="0xff0000ff",y.show=e.hideBool,t[10].nodeId||t[10].populate(y),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const g={};g.y=720,t[11].nodeId||t[11].populate(g),o=t[11],t[12]||(t[12]=this.element({parent:o||"root"},e));const x={};x.x=50,x.w=200,x.h=300,x.color="0x5eead4ff",t[12].nodeId||t[12].populate(x),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const _={};_.y=40,_.x=1e3,t[13].nodeId||t[13].populate(_);const S=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[13],t[14]||(t[14]=this.element({parent:o||"root"},e));const I={};if(I.show=!0,typeof S<"u")for(let N in S.config.props)delete I[S.config.props[N]];t[14].nodeId||t[14].populate(I),o=t[14];const v={};if(v.show=!0,!t[15]){const N=v.is||"Square";t[15]=(s.components&&s.components[N]||e[Symbol.for("components")][N]||(()=>{console.error("component Square not found")})).call(null,{props:v},t[14],e),t[15][Symbol.for("slots")][0]?(o=t[15][Symbol.for("slots")][0],e=t[15]):o=t[15][Symbol.for("children")][0]}const P=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[13],t[16]||(t[16]=this.element({parent:o||"root"},e));const b={};if(b.y=100,b.show=!1,typeof P<"u")for(let N in P.config.props)delete b[P.config.props[N]];t[16].nodeId||t[16].populate(b),o=t[16];const k={};if(k.y=100,k.show=!1,!t[17]){const N=k.is||"Square";t[17]=(s.components&&s.components[N]||e[Symbol.for("components")][N]||(()=>{console.error("component Square not found")})).call(null,{props:k},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]}const L=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[13],t[18]||(t[18]=this.element({parent:o||"root"},e));const F={};if(F.y=200,typeof L<"u")for(let N in L.config.props)delete F[L.config.props[N]];t[18].nodeId||t[18].populate(F),o=t[18];const R={};if(R.y=200,R.show=e.showHideToggle,!t[19]){const N=R.is||"Square";t[19]=(s.components&&s.components[N]||e[Symbol.for("components")][N]||(()=>{console.error("component Square not found")})).call(null,{props:R},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[12].set("show",o.showHideToggle)},function(o,e,s){e[18].set("show",o.showHideToggle)},function(o,e,s){e[19][Symbol.for("props")].show=o.showHideToggle}],context:{}},state(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),pl=H.Component("Events",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.x=400,l.y=360,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=280,r.h=280,r.color="0xe5e7ebff",r.y=-5,t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};i.w=250,i.h=250,i.x=10,i.y=10,i.color=e.colors[0],t[2].nodeId||t[2].populate(i),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=250,f.h=250,f.x=290,f.y=10,f.color=e.colors[1],t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=250,c.h=250,c.x=570,c.y=10,c.color=e.colors[2],t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};return a.w=250,a.h=250,a.x=850,a.y=10,a.color=e.colors[3],t[5].nodeId||t[5].populate(a),t},effects:[function(o,e,s){e[1].set("x",o.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(n){const o=this.count-1;o===-1?this.parent.focus(n):this.count=Math.max(o,0)},right(n){const o=this.count+1;o===4?this.parent.focus(n):this.count=Math.min(o,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),ml=H.Component("SlotCard",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=300,l.h=500,l.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r[Symbol.for("isSlot")]=!0,r.x=20,r.y=20,t[1].nodeId||t[1].populate(r);const i=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.content=e.label,f.wordwrap=260,f.x=20,f.y=400,f.align="center",typeof i<"u")for(let a in i.config.props)delete f[i.config.props[a]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};if(c.content=e.label,c.wordwrap=260,c.x=20,c.y=400,c.align="center",!t[3]){const a=c.is||"Text";t[3]=(s.components&&s.components[a]||e[Symbol.for("components")][a]||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:20}),o.shader("border",{width:6,color:"0xe2e8f0ff"})])}],context:{}},props:[{key:"label"}]}),yl=H.Component("NamedSlotCard",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=700,l.h=300,l.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=20,r.y=20,t[1].nodeId||t[1].populate(r);const i=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.content="First slot",typeof i<"u")for(let v in i.config.props)delete f[i.config.props[v]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};if(c.content="First slot",!t[3]){const v=c.is||"Text";t[3]=(s.components&&s.components[v]||e[Symbol.for("components")][v]||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]}o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};a[Symbol.for("isSlot")]=!0,a.y=40,a.ref="first",t[4].nodeId||t[4].populate(a),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const d={};d.x=200,d.y=20,t[5].nodeId||t[5].populate(d);const m=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const p={};if(p.content="Second slot",typeof m<"u")for(let v in m.config.props)delete p[m.config.props[v]];t[6].nodeId||t[6].populate(p),o=t[6];const h={};if(h.content="Second slot",!t[7]){const v=h.is||"Text";t[7]=(s.components&&s.components[v]||e[Symbol.for("components")][v]||(()=>{console.error("component Text not found")})).call(null,{props:h},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]}o=t[5],t[8]||(t[8]=this.element({parent:o||"root"},e));const y={};y[Symbol.for("isSlot")]=!0,y.y=40,y.ref="second",t[8].nodeId||t[8].populate(y),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const g={};g.x=480,g.y=20,t[9].nodeId||t[9].populate(g);const x=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[9],t[10]||(t[10]=this.element({parent:o||"root"},e));const _={};if(_.content="Third slot",typeof x<"u")for(let v in x.config.props)delete _[x.config.props[v]];t[10].nodeId||t[10].populate(_),o=t[10];const S={};if(S.content="Third slot",!t[11]){const v=S.is||"Text";t[11]=(s.components&&s.components[v]||e[Symbol.for("components")][v]||(()=>{console.error("component Text not found")})).call(null,{props:S},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]}o=t[9],t[12]||(t[12]=this.element({parent:o||"root"},e));const I={};return I[Symbol.for("isSlot")]=!0,I.y=40,I.ref="third",t[12].nodeId||t[12].populate(I),t},effects:[function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:20}),o.shader("border",{width:6,color:"0xe2e8f0ff"})])}],context:{}}}),st=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],gl=H.Component("Components",{components:{SlotCard:ml,NamedSlotCard:yl,Card:Ws,Square:et},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.x=400,i.y=100,i.label="Element",typeof r<"u")for(let U in r.config.props)delete i[r.config.props[U]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.x=400,f.y=100,f.label="Element",!t[2]){const U=f.is||"SlotCard";t[2]=(s.components&&s.components[U]||e[Symbol.for("components")][U]||(()=>{console.error("component SlotCard not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};t[3].nodeId||t[3].populate(c),o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};a.w=100,a.h=100,t[4].nodeId||t[4].populate(a);const d=s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const m={};if(m.x=800,m.y=100,m.label="Component",typeof d<"u")for(let U in d.config.props)delete m[d.config.props[U]];t[5].nodeId||t[5].populate(m),o=t[5];const p={};if(p.x=800,p.y=100,p.label="Component",!t[6]){const U=p.is||"SlotCard";t[6]=(s.components&&s.components[U]||e[Symbol.for("components")][U]||(()=>{console.error("component SlotCard not found")})).call(null,{props:p},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]}t[7]||(t[7]=this.element({parent:o||"root"},e));const h={};t[7].nodeId||t[7].populate(h);const y=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const g={};if(g.size=200,g.y=50,typeof y<"u")for(let U in y.config.props)delete g[y.config.props[U]];t[8].nodeId||t[8].populate(g),o=t[8];const x={};if(x.size=200,x.y=50,!t[9]){const U=x.is||"Square";t[9]=(s.components&&s.components[U]||e[Symbol.for("components")][U]||(()=>{console.error("component Square not found")})).call(null,{props:x},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]}const _=s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard;o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const S={};if(S.x=1200,S.y=100,S.label="Element & Component",typeof _<"u")for(let U in _.config.props)delete S[_.config.props[U]];t[10].nodeId||t[10].populate(S),o=t[10];const I={};if(I.x=1200,I.y=100,I.label="Element & Component",!t[11]){const U=I.is||"SlotCard";t[11]=(s.components&&s.components[U]||e[Symbol.for("components")][U]||(()=>{console.error("component SlotCard not found")})).call(null,{props:I},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]}t[12]||(t[12]=this.element({parent:o||"root"},e));const v={};t[12].nodeId||t[12].populate(v),o=t[12],t[13]||(t[13]=this.element({parent:o||"root"},e));const P={};P.w=100,P.h=100,t[13].nodeId||t[13].populate(P);const b=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[12],t[14]||(t[14]=this.element({parent:o||"root"},e));const k={};if(k.size=200,k.y=150,typeof b<"u")for(let U in b.config.props)delete k[b.config.props[U]];t[14].nodeId||t[14].populate(k),o=t[14];const L={};if(L.size=200,L.y=150,!t[15]){const U=L.is||"Square";t[15]=(s.components&&s.components[U]||e[Symbol.for("components")][U]||(()=>{console.error("component Square not found")})).call(null,{props:L},t[14],e),t[15][Symbol.for("slots")][0]?(o=t[15][Symbol.for("slots")][0],e=t[15]):o=t[15][Symbol.for("children")][0]}const F=s.components&&s.components.Card||e[Symbol.for("components")].Card;o=t[0],t[16]||(t[16]=this.element({parent:o||"root"},e));const R={};if(R.x=400,R.y=700,R.size="small",typeof F<"u")for(let U in F.config.props)delete R[F.config.props[U]];t[16].nodeId||t[16].populate(R),o=t[16];const N={};if(N.x=400,N.y=700,N.size="small",!t[17]){const U=N.is||"Card";t[17]=(s.components&&s.components[U]||e[Symbol.for("components")][U]||(()=>{console.error("component Card not found")})).call(null,{props:N},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]}t[18]||(t[18]=this.element({parent:o||"root"},e));const O={};t[18].nodeId||t[18].populate(O),o=t[18],t[19]||(t[19]=this.element({parent:o||"root"},e));const $={};$.w=100,$.h=100,t[19].nodeId||t[19].populate($);const B=s.components&&s.components.NamedSlotCard||e[Symbol.for("components")].NamedSlotCard;o=t[0],t[20]||(t[20]=this.element({parent:o||"root"},e));const T={};if(T.x=800,T.y=700,typeof B<"u")for(let U in B.config.props)delete T[B.config.props[U]];t[20].nodeId||t[20].populate(T),o=t[20];const w={};if(w.x=800,w.y=700,!t[21]){const U=w.is||"NamedSlotCard";t[21]=(s.components&&s.components[U]||e[Symbol.for("components")][U]||(()=>{console.error("component NamedSlotCard not found")})).call(null,{props:w},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]}t[22]||(t[22]=this.element({parent:o||"root"},e));const A={};t[22].nodeId||t[22].populate(A),o=t[22],t[23]||(t[23]=this.element({parent:o||"root"},e));const z={};z.color="0x0891b2ff",z.x=10,z.y=140,z.w=80,z.h=60,z.parent=e[Symbol.for("slots")].filter(U=>U.ref==="second").shift()||e[Symbol.for("slots")][0]||o,z.slot="second",t[23].nodeId||t[23].populate(z),o=t[22],t[24]||(t[24]=this.element({parent:o||"root"},e));const M={};M.w=100,M.h=100,M.parent=e[Symbol.for("slots")].filter(U=>U.ref==="third").shift()||e[Symbol.for("slots")][0]||o,M.slot="third",t[24].nodeId||t[24].populate(M);const E=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[22],t[25]||(t[25]=this.element({parent:o||"root"},e));const Y={};if(Y.size=100,Y.parent=e[Symbol.for("slots")].filter(U=>U.ref==="first").shift()||e[Symbol.for("slots")][0]||o,Y.slot="first",typeof E<"u")for(let U in E.config.props)delete Y[E.config.props[U]];t[25].nodeId||t[25].populate(Y),o=t[25];const D={};if(D.size=100,D.slot="first",!t[26]){const U=D.is||"Square";t[26]=(s.components&&s.components[U]||e[Symbol.for("components")][U]||(()=>{console.error("component Square not found")})).call(null,{props:D},t[25],e),t[26][Symbol.for("slots")][0]?(o=t[26][Symbol.for("slots")][0],e=t[26]):o=t[26][Symbol.for("children")][0]}o=t[22],t[27]||(t[27]=this.element({parent:o||"root"},e));const q={};return q.color="0x4d7c0fff",q.x=40,q.y=40,q.w=40,q.h=60,q.parent=e[Symbol.for("slots")].filter(U=>U.ref==="second").shift()||e[Symbol.for("slots")][0]||o,q.slot="second",t[27].nodeId||t[27].populate(q),t},effects:[function(o,e,s){e[4].set("color",o.color)},function(o,e,s){e[13].set("color",o.color)},function(o,e,s){e[19].set("color",o.color)},function(o,e,s){e[24].set("color",o.color)}],context:{}},state(){return{color:st[0]}},hooks:{ready(){this.$setInterval(()=>{const n=st.indexOf(this.color)+1;this.color=n<=st.length?st[n]:st[0]},600)}}}),xl=H.Component("MemoryCard",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=320,l.h=200,l.x=e.col*360,l.y=e.row*250,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=320,r.y=125,r.mount="{y: 0.5}",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const i={};return i.w=320,i.y=125,i.mount="{y: 0.5}",t[2].nodeId||t[2].populate(i),t},effects:[function(o,e,s){e[0].set("scale",{transition:o.scale})},function(o,e,s){e[0].set("rotation",{transition:o.disabled?-2:0})},function(o,e,s){e[1].set("h",{transition:o.h})},function(o,e,s){e[1].set("color",{transition:o.disabled?"#ccc":"#fff"})},function(o,e,s){e[1].set("src",o.image+"&w=320&h=200")},function(o,e,s){e[1].set("effects",[o.shader("radius",{radius:6})])},function(o,e,s){e[1].set("show",o.open)},function(o,e,s){e[2].set("h",{transition:o.h})},function(o,e,s){e[2].set("color",o.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(o,e,s){e[2].set("effects",[o.shader("radius",{radius:6})])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1}},hooks:{init(){this.$listen("closeMemoryCard",n=>{n===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",n=>{n===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(n){this.scale=1.08;const o="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.$announcer.speak(o)},unfocus(){this.scale=1}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),os=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],bl=H.Component("Announcer",{components:{MemoryCard:xl},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(i.font="raleway",i.size=80,i.color="0xffffffff",i.content="Let's play memory!",i.x=580,i.y=60,typeof r<"u")for(let p in r.config.props)delete i[r.config.props[p]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(f.font="raleway",f.size=80,f.color="0xffffffff",f.content="Let's play memory!",f.x=580,f.y=60,!t[2]){const p=f.is||"Text";t[2]=(s.components&&s.components[p]||e[Symbol.for("components")][p]||(()=>{console.error("component Text not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}const c=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.font="kalam",a.size=40,a.color="0xb91c1cff",a.content="the Accessible edition :)",a.x=1200,a.y=170,a.rotation=-6,typeof c<"u")for(let p in c.config.props)delete a[c.config.props[p]];t[3].nodeId||t[3].populate(a),o=t[3];const d={};if(d.font="kalam",d.size=40,d.color="0xb91c1cff",d.content="the Accessible edition :)",d.x=1200,d.y=170,d.rotation=-6,!t[4]){const p=d.is||"Text";t[4]=(s.components&&s.components[p]||e[Symbol.for("components")][p]||(()=>{console.error("component Text not found")})).call(null,{props:d},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const m={};return m.x=260,m.y=260,t[5].nodeId||t[5].populate(m),t},effects:[function(o,e,s){parent=e[5];const t=o.cards||[],l=[];for(let r=0;r<t.length;r++){parent=e[5],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,card:t[r]});l.push(i.key.toString());const f=s.components&&s.components.MemoryCard||o[Symbol.for("components")].MemoryCard;e[6]=e[6]||{},e[6][i.key]||(e[6][i.key]=this.element({parent:parent||"root"},o));const c={};if(c.image=i.card.image,c.description=i.card.description,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[6][i.key].nodeId||e[6][i.key].populate(c),e[7]=e[7]||{},parent=e[6][i.key];const a={};if(a.col=i.index%4,a.row=Math.floor(i.index/4)%3,a.key=i.card.image,a.image=i.card.image,a.description=i.card.description,a.ref="card"+i.index,a.index=i.index,!e[7][i.key]){const d=a.is||"MemoryCard";e[7][i.key]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component MemoryCard not found")})).call(null,{props:a},e[6][i.key],o),e[7][i.key][Symbol.for("slots")][0]?(parent=e[7][i.key][Symbol.for("slots")][0],o=e[7][i.key]):parent=e[7][i.key][Symbol.for("children")][0]}e[6][i.key].set("col",i.index%4),e[6][i.key].set("row",Math.floor(i.index/4)%3),e[6][i.key].set("key",i.card.image),e[6][i.key].set("ref","card"+i.index),e[6][i.key].set("index",i.index),e[7][i.key][Symbol.for("props")].col=i.index%4,e[7][i.key][Symbol.for("props")].row=Math.floor(i.index/4)%3,e[7][i.key][Symbol.for("props")].key=i.card.image,e[7][i.key][Symbol.for("props")].ref="card"+i.index,e[7][i.key][Symbol.for("props")].index=i.index}e[6]&&Object.keys(e[6]).forEach(r=>{l.indexOf(r)===-1&&(e[6][r].destroy&&e[6][r].destroy(),delete e[1][r])})}],context:{}},state(){return{cards:os.concat(os),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",n=>{this.openCards.length<2&&this.openCards.push(n),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(n){if(this.focusedRow===-1){this.focusedRow=0;return}n=n+this.focusedRow*4,this.select("card"+n).focus()},focusedRow(n){if(this.focusedCol===-1){this.focusedCol=0;return}n=this.focusedCol+n*4,this.select("card"+n).focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){this.focusedCol===0&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){this.focusedRow===2&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),nt=(n,o)=>Math.floor(Math.random()*(o-n+1)+n),Sl=H.Component("Item",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.src="assets/blits-b-small.png",l.w=96,l.h=168,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("x",{transition:{value:o.x,duration:2900}})},function(o,e,s){e[0].set("y",{transition:{value:o.y,duration:2900}})},function(o,e,s){e[0].set("rotation",{transition:{value:o.rotation,duration:2900}})},function(o,e,s){e[0].set("scale",{transition:{value:o.scale,duration:1e3}})}],context:{}},state(){return{x:nt(20,1560),y:nt(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=nt(20,1740),this.y=nt(20,900),this.rotation=nt(10,360)},3e3)}}}),wl=H.Component("Exponential",{components:{Item:Sl},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){parent=e[0];const t=o.items||[],l=[];for(let r=0;r<t.length;r++){parent=e[0],o.key||(l.length=0);const i=Object.assign(o,{key:Math.random().toString(),index:r,item:t[r]});l.push(i.item.toString());const f=s.components&&s.components.Item||o[Symbol.for("components")].Item;e[1]=e[1]||{},e[1][i.item]||(e[1][i.item]=this.element({parent:parent||"root"},o));const c={};if(c.key=i.item,typeof f<"u")for(let d in f.config.props)delete c[f.config.props[d]];e[1][i.item].nodeId||e[1][i.item].populate(c),e[2]=e[2]||{},parent=e[1][i.item];const a={};if(a.key=i.item,!e[2][i.item]){const d=a.is||"Item";e[2][i.item]=(s.components&&s.components[d]||o[Symbol.for("components")][d]||(()=>{console.error("component Item not found")})).call(null,{props:a},e[1][i.item],o),e[2][i.item][Symbol.for("slots")][0]?(parent=e[2][i.item][Symbol.for("slots")][0],o=e[2][i.item]):parent=e[2][i.item][Symbol.for("children")][0]}}e[1]&&Object.keys(e[1]).forEach(r=>{l.indexOf(r)===-1&&(e[1][r].destroy&&e[1][r].destroy(),delete e[1][r])})}],context:{}},state(){return{items:[]}},hooks:{ready(){const n=this.$setInterval(()=>{for(let o=0;o<=Math.floor(this.items.length/10);o++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>1&&clearInterval(n)},2e3)}}}),Tl=H.Application({code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.RouterView||e[Symbol.for("components")].RouterView;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const i={};if(typeof r<"u")for(let m in r.config.props)delete i[r.config.props[m]];t[1].nodeId||t[1].populate(i),o=t[1];const f={};if(!t[2]){const m=f.is||"RouterView";t[2]=(s.components&&s.components[m]||e[Symbol.for("components")][m]||(()=>{console.error("component RouterView not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]}const c=s.components&&s.components.FPScounter||e[Symbol.for("components")].FPScounter;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.x=1610,typeof c<"u")for(let m in c.config.props)delete a[c.config.props[m]];t[3].nodeId||t[3].populate(a),o=t[3];const d={};if(d.x=1610,d.show=e.showFPS,!t[4]){const m=d.is||"FPScounter";t[4]=(s.components&&s.components[m]||e[Symbol.for("components")][m]||(()=>{console.error("component FPScounter not found")})).call(null,{props:d},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]}return t},effects:[function(o,e,s){e[0].set("color",o.backgroundColor)},function(o,e,s){e[3].set("show",o.showFPS)},function(o,e,s){e[4][Symbol.for("props")].show=o.showFPS}],context:{}},state(){return{backgroundColor:"#1e293b",showFPS:!0}},routes:[{path:"/",component:Ir,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>as(()=>import("./Loading-15b0fac5.js"),[])},{path:"/demos/intro",component:()=>new Promise(n=>{n(kr)})},{path:"/demos/theming",component:Lr},{path:"/demos/tmdb",component:Yr},{path:"/demos/sprites",component:Hr},{path:"/demos/focushandling",component:qr},{path:"/demos/memory-game",component:bl,announce:"Let's play Memory"},{path:"/examples/positioning",component:jr},{path:"/examples/colors",component:Kr},{path:"/examples/gradients",component:Zr},{path:"/examples/transitions",component:Qr},{path:"/examples/alpha",component:Jr},{path:"/examples/scaling",component:el},{path:"/examples/rotation",component:tl},{path:"/examples/keyinput",component:ol},{path:"/examples/texts",component:sl},{path:"/examples/images",component:nl},{path:"/examples/components",component:il},{path:"/examples/forloop",component:rl},{path:"/examples/forloop-advanced",component:dl},{path:"/examples/effects",component:ul},{path:"/examples/showif",component:hl},{path:"/examples/events",component:pl},{path:"/examples/slots",component:gl},{path:"/benchmarks/exponential",component:wl}],hooks:{ready(){this.$listen("changeBackground",n=>{this.backgroundColor=n?n+80:"#1e293b"})}},input:{escape(){this.quit()},back(){this.$router.to("/")}}});H.Launch(Tl,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",keymap:cr(),fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"}]});export{H as B,et as S};
