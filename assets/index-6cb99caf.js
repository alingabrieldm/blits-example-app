var hs=Object.defineProperty;var ps=(i,o,e)=>o in i?hs(i,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[o]=e;var d=(i,o,e)=>(ps(i,typeof o!="symbol"?o+"":o,e),e);import{s as C,E as ke,S as ms,W as gs,C as ys,a as Ve}from"./settings-f05e2292.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(t){if(t.ep)return;t.ep=!0;const l=e(t);fetch(t.href,l)}})();const xs=(i="",o,e,s=null)=>{let t=0,l=0,r=[],n=null,f=0;const c=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,a=/^\s*(\/?>)\s*/,u=/^([A-Za-z0-9:.\-_@]+)=\s*(["'])/,g=/^<>\s*/,p=/^\s*(<\/>)\s*/,h=()=>{i=y(i);try{return m(I),T(r)}catch(S){throw(S.name=="TemplateParseError"||S.name=="TemplateStructureError")&&(S.message=`${S.message}
${S.context}`),S}},m=S=>{t>=i.length||S()},y=S=>S.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),b=S=>{const v=i.slice(t).match(S);return v&&(l=t,t+=v[0].length),v},I=()=>{b(g)?(r.push({type:null,[C.type]:"opening",[C.level]:f,[C.cursorTagStart]:l}),f++,m(I)):m(w)},w=()=>{b(p)?(f--,r.push({type:null,[C.type]:"closing",[C.level]:f}),m(I)):m(_)},_=()=>{const S=b(c);if(S)n={type:S[1],[C.level]:f,[C.cursorTagStart]:l},S[0].startsWith("</")?(f--,n[C.type]="closing",n[C.level]=f):(n[C.type]="opening",f++),m(R);else throw E("InvalidTag")},R=()=>{const S=b(a);if(S){if(S[1]==="/>"){if(n[C.type]==="closing")throw E("InvalidClosingTag");n[C.type]="self-closing",f--}if(n[C.type]==="opening"){const v=i.slice(t,i.indexOf("<",t));v&&(n.content=v,t+=v.length)}r.push(n),m(I)}else m(k)},k=()=>{const S=b(u);if(S){if(n[C.type]==="closing")throw E("AttributesInClosingTag");const v=S[2],M=new RegExp(`^(.*?)${v}\\s*`),D=b(M);if(D){const P=x(S[1],D[1]);n[P.name]=P.value,m(R)}else throw E("MissingOrInvalidAttributeValue")}else throw E("InvalidAttribute")},x=(S,v)=>{if(S.includes(".")){const[M,D]=S.split(".");return{name:M,value:`{${D}: ${v}}`}}return{name:S,value:v}},T=S=>{let v=[],M=!1,D={children:[]},P=D;for(let z=0;z<S.length;z++){let N=S[z];if(N[C.level]===0&&N[C.type]!=="closing"){if(M)throw L("MultipleTopLevelTags",N);M=!0}if(N[C.type]==="opening")v.push({[C.level]:N[C.level],[C.type]:N[C.type],[C.cursorTagStart]:N[C.cursorTagStart],type:N.type,parent:P});else if(N[C.type]==="closing"){const Y=v.length===0;let H=!1,X=!1;if(Y||(H=v[v.length-1][C.level]!==N[C.level],X=v[v.length-1].type!==N.type),Y||H||X)throw L("MismatchedClosingTag",N);P=v.pop().parent}const $={...N};delete $[C.type],delete $[C.level],delete $[C.cursorTagStart],N[C.type]==="opening"?(z+1<S.length&&S[z+1][C.type]!=="closing"&&($.children=[]),P.children.push($),P=$):N[C.type]==="self-closing"&&P.children.push($)}if(v.length>0)throw L("UnclosedTags",v);return D},A=10,B=50,E=(S,v)=>{const M=U();S=`${S} in ${M}`;const D=new Error(S);if(D.name="TemplateParseError",v)D.context=v;else{const P=Math.max(0,l-A),z=Math.min(i.length,t+B),N=i.slice(P,z),$=t-P;D.context=F($,N)}return D},L=(S,v)=>{const M=U();S=`${S} in ${M}`;const D=new Error(S);D.name="TemplateStructureError",Array.isArray(v)?D.context=v.map(z=>P(z)).join(`
`):D.context=P(v);function P(z){const N=Math.max(0,z[C.cursorTagStart]-A),$=i.slice(N,N+B);return F(A,$)}return D},F=(S,v)=>{const M=" ".repeat(S)+"^";return`
${v}
${M}
`},U=()=>{if(e){let S=o||"",v=e;for(;v;)S=`${v.type}/${S}`,v=v.parent;return S}return s||"Blits.Application"};return h()};let q;function bs(i={children:[]}){const o={renderCode:["const elms = []"],effectsCode:[],context:{props:[],components:this.components}};return q=-1,No.call(o,i),o.renderCode.push("return elms"),{render:new Function("parent","component","context",o.renderCode.join(`
`)),effects:o.effectsCode.map(e=>new Function("component","elms","context",e)),context:o.context}}const wt=function(i,o=!1,e={key:!1,component:"component.",forceEffect:!1}){const s=e.forceEffect?this.effectsCode:this.renderCode;o&&s.push(`parent = ${o}`),"key"in i&&(e.key=qe(i.key,e.component));const t=e.key?`elms[${q}][${e.key}]`:`elms[${q}]`;e.key&&s.push(`
      elms[${q}] = elms[${q}] || {}
    `),s.push(`
    if(!${t}) {
      ${t} = this.element({parent: parent || 'root'}, component)
    }
    const elementConfig${q} = {}
  `);const l=i.children;delete i.children,Object.keys(i).forEach(r=>{if(r==="type"){i[r]==="Slot"&&s.push(`elementConfig${q}[Symbol.for('isSlot')] = true`);return}r==="slot"&&s.push(`
        elementConfig${q}['parent'] = component[Symbol.for('slots')].filter(slot => slot.ref === '${i.slot}').shift() || component[Symbol.for('slots')][0] || parent
      `),Po(r)?this.effectsCode.push(`${t}.set('${r.substring(1)}', ${qe(i[r],e.component)})`):s.push(`elementConfig${q}['${r}'] = ${to(i[r],r,e.component)}`)}),e.holder===!0&&s.push(`
    if(typeof cmp${q} !== 'undefined') {
      for(let key in cmp${q}.config.props) {
        delete  elementConfig${q}[cmp${q}.config.props[key]]
      }
    }
    `),s.push(`
    if(!${t}.nodeId) {
      ${t}.populate(elementConfig${q})
    }
  `),l&&No.call(this,{children:l},`${t}`,e)},Lo=function(i,o=!1,e={key:!1,component:"component.",forceEffect:!1,holder:!1}){const s=e.forceEffect?this.effectsCode:this.renderCode;s.push(`
    const cmp${q} =
      (context.components && context.components['${i.type}']) ||
      component[Symbol.for('components')]['${i.type}']
  `),"key"in i&&(e.key=qe(i.key,e.component));const t=i.children;delete i.children,wt.call(this,i,o,{...e,holder:!0}),o=e.key?`elms[${q}][${e.key}]`:`elms[${q}]`,q++;const l=e.key?`elms[${q}][${e.key}]`:`elms[${q}]`;e.key&&s.push(`
      elms[${q}] = elms[${q}] || {}
    `),o&&s.push(`parent = ${o}`),s.push(`const props${q} = {}`),Object.keys(i).forEach(r=>{r!=="type"&&(Po(r)?(this.effectsCode.push(`
        ${l}[Symbol.for('props')]['${r.substring(1)}'] = ${qe(i[r],e.component)}`),s.push(`props${q}['${r.substring(1)}'] = ${qe(i[r],e.component)}`)):s.push(`props${q}['${r}'] = ${to(i[r],r,e.component)}`))}),s.push(`
    if(!${l}) {
      ${l} = (context.components && context.components['${i.type}'] || component[Symbol.for('components')]['${i.type}'] || (() => { console.error('component ${i.type} not found')})).call(null, {props: props${q}}, ${o}, component)
      if (${l}[Symbol.for('slots')][0]) {
        parent = ${l}[Symbol.for('slots')][0]
        component = ${l}
      } else {
        parent = ${l}[Symbol.for('children')][0]
      }
    }
  `),t&&(q++,wt.call(this,{children:t},!1,{...e}))},Ss=function(i,o){const e=i[":for"];delete i[":for"];const t=/(.+)\s+in\s+(.+)/gi.exec(e),[l,r="index"]=t[1].replace("(","").replace(")","").split(/\s*,\s*/),n={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};o&&n.renderCode.push(`parent = ${o}`),n.renderCode.push(`
    const collection = ${to(t[2],":for")}
    const keys = []
    for(let __index = 0; __index < collection.length; __index++) {
      parent = ${o}
      if(!component.key) keys.length = 0
      const scope = Object.assign(component, {
        key: Math.random(),
        ${r}: __index,
        ${l}: collection[__index],
    `),"ref"in i&&i.ref.indexOf("$")===-1&&(n.renderCode.push(`
      __ref: '${i.ref}' + __index
    `),i.ref="$__ref"),n.renderCode.push(`
      })
  `),"key"in i?n.renderCode.push(`
      keys.push(${qe(i.key,"scope.")})
    `):n.renderCode.push(`
      keys.push(scope.key.toString())
    `),i.type==="Element"||i.type==="Slot"?wt.call(n,i,o,{key:"scope.key",component:"scope.",forceEffect:!1}):Lo.call(n,i,!1,{key:"scope.key",component:"scope.",forceEffect:!1}),n.renderCode=n.renderCode.concat(n.effectsCode),n.renderCode.push("}"),n.renderCode.push(`
    if(elms[${q}]) {
      Object.keys(elms[${q}]).forEach(key => {
        if(keys.indexOf(key) === -1) {
          elms[${q}][key].delete && elms[${q}][key].delete()
          elms[${q}][key].destroy && elms[${q}][key].destroy()
          delete elms[${q}][key]
        }
      })
    }
  `),this.effectsCode.push(n.renderCode.join(`
`))},No=function(i,o=!1,e={}){i.children&&i.children.forEach(s=>{q++,Object.keys(s).indexOf(":for")>-1?Ss.call(this,s,o):s.type==="Element"||s.type==="Slot"?wt.call(this,s,o,e):Lo.call(this,s,o,e)})},qe=(i,o="component.")=>{const e=/('.*?')+/gi,s=/\$/gi,t=i.matchAll(e),l=[];let r=0;for(const n of t)l.push(n[0]),i=i.replace(n[0],`[@@REPLACEMENT${r}@@]`),r++;return i=i.replace(s,o),l.forEach((n,f)=>{i=i.replace(`[@@REPLACEMENT${f}@@]`,n)}),i},to=(i="",o=!1,e="component.")=>{let s;if(o==="content")if(i.startsWith("$"))s=`${e}${i.replace("$","")}`;else{const t=i.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");s=`'${ws(t,e)}'`}else if(o!=="color"&&!isNaN(parseFloat(i))){if(s=parseFloat(i),i.endsWith("%")){const l={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[o];l&&(s=`parent.node.${l} * (${s} / 100)`)}}else if(i.toLowerCase()==="true")s=!0;else if(i.toLowerCase()==="false")s=!1;else if(o.startsWith("@")&&i){const t=e.slice(0,-1);s=`${t}['${i.replace("$","")}'] && ${t}['${i.replace("$","")}'].bind(${t})`}else i.startsWith("$")?s=`${e}${i.replace("$","")}`:s=`"${i}"`;return s},Po=i=>i.startsWith(":"),ws=(i,o)=>{const e=/\{\{\s*(\$\S+)\s*\}\}/g,s=[...i.matchAll(e)];if(s.length)for(let[t,l]of s)i=i.replace(t,`${l.replace("$",`'+${o}`)}+'`);return i};function Cs(i,o){const e={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},s=i.getContext("webgl",e)||i.getContext("experimental-webgl",e);if(!s)throw new Error("Unable to create WebGL context");return o?new Proxy(s,{get(t,l){const r=t[l];return typeof r=="function"?(o.increment(String(l)),r.bind(t)):r}}):s}function ao(i,o,e){const s=Math.trunc(i>>>24),t=Math.trunc(i>>>16&255),l=Math.trunc(i>>>8&255),r=Math.trunc(i&255),n=Math.trunc(o>>>24),f=Math.trunc(o>>>16&255),c=Math.trunc(o>>>8&255),a=Math.trunc(o&255),u=Math.round(n*e+s*(1-e)),g=Math.round(f*e+t*(1-e)),p=Math.round(c*e+l*(1-e)),h=Math.round(a*e+r*(1-e));return(u<<24|g<<16|p<<8|h)>>>0}function Ts(i,o){const e=i>>>24,s=i>>>16&255,t=i>>>8&255,l=Math.trunc((i&255)*o);return(e<<24|s<<16|t<<8|l)>>>0}function Je(i,o,e=!1){const s=(i&255)/255*o,t=Math.trunc((i>>>24)*s),l=Math.trunc((i>>>16&255)*s),r=Math.trunc((i>>>8&255)*s),n=Math.trunc(s*255);return e?(n<<24|r<<16|l<<8|t)>>>0:(t<<24|l<<16|r<<8|n)>>>0}function Xt(i,o){return Object.prototype.hasOwnProperty.call(i,o)}class zo{constructor(o){d(this,"releaseCallback");this.releaseCallback=o}}class vs extends zo{constructor(e,s){super(e);d(this,"textureMap",new Map);d(this,"zeroReferenceTextureSet",new Set);d(this,"options");this.options={textureCleanupIntervalMs:s.textureCleanupIntervalMs??1e4,textureCleanupAgeThreadholdMs:s.textureCleanupAgeThreadholdMs??6e4},setInterval(()=>{const t=Date.now(),l=this.options.textureCleanupAgeThreadholdMs;for(const r of this.zeroReferenceTextureSet)t-r.lastUpdate>l&&(this.releaseCallback(r.id),this.textureMap.delete(r.id),this.zeroReferenceTextureSet.delete(r))},this.options.textureCleanupIntervalMs)}registerTexture(e){var t;const s=(t=e.options)==null?void 0:t.id;if(!this.textureMap.has(s)){const l={id:s,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(s,l),this.zeroReferenceTextureSet.add(l)}}incrementTextureRefCount(e){var l;const s=(l=e.options)==null?void 0:l.id;let t=this.textureMap.get(s);t||(this.registerTexture(e),t=this.textureMap.get(s)),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),t.nodeRefCount++,t.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(t)&&this.zeroReferenceTextureSet.delete(t)}decrementTextureRefCount(e){var l;const s=(l=e.options)==null?void 0:l.id,t=this.textureMap.get(s);t.nodeRefCount--,t.lastUpdate=Date.now(),t.nodeRefCount===0&&this.zeroReferenceTextureSet.add(t),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class Is extends zo{constructor(e){super(e);d(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var s,t;(s=e.options)==null||s.id,this.registry.register(e,(t=e.options)==null?void 0:t.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}class _s extends ke{constructor(e,s,t){super();d(this,"root",null);d(this,"driver");d(this,"canvas");d(this,"settings");d(this,"nodes",new Map);d(this,"nextTextureId",1);d(this,"textureTracker");const l={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:e.clearColor??0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:e.experimental_FinalizationRegistryTextureUsageTracker??!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:e.enableContextSpy??!1};this.settings=l;const{appWidth:r,appHeight:n,deviceLogicalPixelRatio:f,devicePhysicalPixelRatio:c}=l,a=y=>{this.driver.releaseTexture(y)},u=l.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=u?new Is(a):new vs(a,this.settings.textureCleanupOptions);const g=r*f,p=n*f;this.driver=t;const h=document.createElement("canvas");this.canvas=h,h.width=g*c,h.height=p*c,h.style.width=`${g}px`,h.style.height=`${p}px`;let m;if(typeof s=="string"?m=document.getElementById(s):m=s,!m)throw new Error("Could not find target element");t.onCreateNode=y=>{this.nodes.set(y.id,y)},t.onBeforeDestroyNode=y=>{this.nodes.delete(y.id)},t.onFpsUpdate=y=>{this.emit("fpsUpdate",y)},m.appendChild(h)}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){const s=e.fontSize??16,t={...this.resolveNodeDefaults(e),text:e.text??"",textRendererOverride:e.textRendererOverride??null,fontSize:s,fontFamily:e.fontFamily??"sans-serif",fontStyle:e.fontStyle??"normal",fontWeight:e.fontWeight??"normal",fontStretch:e.fontStretch??"normal",textAlign:e.textAlign??"left",contain:e.contain??"none",scrollable:e.scrollable??!1,scrollY:e.scrollY??0,offsetY:e.offsetY??0,letterSpacing:e.letterSpacing??0,lineHeight:e.lineHeight??s,maxLines:e.maxLines??0,textBaseline:e.textBaseline??"alphabetic",verticalAlign:e.verticalAlign??"top",overflowSuffix:e.overflowSuffix??"...",debug:e.debug??{}};return this.driver.createTextNode(t)}resolveNodeDefaults(e){const s=e.color??4294967295,t=e.colorTl??e.colorTop??e.colorLeft??s,l=e.colorTr??e.colorTop??e.colorRight??s,r=e.colorBl??e.colorBottom??e.colorLeft??s,n=e.colorBr??e.colorBottom??e.colorRight??s;return{x:e.x??0,y:e.y??0,width:e.width??0,height:e.height??0,alpha:e.alpha??1,clipping:e.clipping??!1,color:s,colorTop:e.colorTop??s,colorBottom:e.colorBottom??s,colorLeft:e.colorLeft??s,colorRight:e.colorRight??s,colorBl:r,colorBr:n,colorTl:t,colorTr:l,zIndex:e.zIndex??0,zIndexLocked:e.zIndexLocked??0,parent:e.parent??null,texture:e.texture??null,shader:e.shader??null,src:e.src??"",scale:e.scale??null,scaleX:e.scaleX??e.scale??1,scaleY:e.scaleY??e.scale??1,mount:e.mount??0,mountX:e.mountX??e.mount??0,mountY:e.mountY??e.mount??0,pivot:e.pivot??.5,pivotX:e.pivotX??e.pivot??.5,pivotY:e.pivotY??e.pivot??.5,rotation:e.rotation??0}}destroyNode(e){return this.driver.destroyNode(e)}createTexture(e,s,t){const l=this.nextTextureId++,r={descType:"texture",txType:e,props:s,options:{...t,id:l}};return this.textureTracker.registerTexture(r),r}createShader(e,s){return{descType:"shader",shType:e,props:s}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}function Fo(i,o){var e=0,s,t;o=o||{};function l(){var r=s,n=arguments.length,f,c;e:for(;r;){if(r.args.length!==arguments.length){r=r.next;continue}for(c=0;c<n;c++)if(r.args[c]!==arguments[c]){r=r.next;continue e}return r!==s&&(r===t&&(t=r.prev),r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.next=s,r.prev=null,s.prev=r,s=r),r.val}for(f=new Array(n),c=0;c<n;c++)f[c]=arguments[c];return r={args:f,val:i.apply(null,f)},s?(s.prev=r,r.next=s):t=r,e===o.maxSize?(t=t.prev,t.next=null):e++,s=r,r.val}return l.clear=function(){s=null,t=null,e=0},l}const co=i=>i&&!(i&i-1),re=(i,o,e,s)=>{const t=3*i,l=3*(e-i)-t,r=1-t-l,n=3*o,f=3*(s-o)-n,c=1-n-f;return function(a){if(a>=1)return 1;if(a<=0)return 0;let u=.5,g,p,h;for(let b=0;b<20;b++){if(g=u*(u*(u*r+l)+t),h=a-g,h>-1e-8&&h<1e-8)return u*(u*(u*c+f)+n);if(p=u*(u*(3*r)+2*l)+t,p>1e-10&&p<1e-10)break;u+=h/p}let m=0,y=1;for(let b=0;b<20;b++){if(u=.5*(m+y),g=u*(u*(u*r+l)+t),h=a-g,h>-1e-8&&h<1e-8)return u*(u*(u*c+f)+n);h<0?y=u:m=u}}},Rs=Fo(i=>{switch(i){case"linear":return function(e){return e};case"ease":return re(.25,.1,.25,1);case"ease-in":return re(.42,0,1,1);case"ease-out":return re(0,0,.58,1);case"ease-in-out":return re(.42,0,.58,1);case"ease-in-sine":return re(.12,0,.39,0);case"ease-out-sine":return re(.12,0,.39,0);case"ease-in-out-sine":return re(.37,0,.63,1);case"ease-in-cubic":return re(.32,0,.67,0);case"ease-out-cubic":return re(.33,1,.68,1);case"ease-in-out-cubic":return re(.65,0,.35,1);case"ease-in-circ":return re(.55,0,1,.45);case"ease-out-circ":return re(0,.55,.45,1);case"ease-in-out-circ":return re(.85,0,.15,1);case"ease-in-back":return re(.36,0,.66,-.56);case"ease-out-back":return re(.34,1.56,.64,1);case"ease-in-out-back":return re(.68,-.6,.32,1.6);case"step-start":return function(){return 1};case"step-end":return function(e){return e===1?1:0};default:const o="cubic-bezier(";if(i&&i.indexOf(o)===0){const e=i.substr(o.length,i.length-o.length-1).split(",");if(e.length!==4)return console.warn("Unknown timing function: "+i),function(n){return n};const s=parseFloat(e[0]||"0.42"),t=parseFloat(e[1]||"0"),l=parseFloat(e[2]||"1"),r=parseFloat(e[3]||"1");return isNaN(s)||isNaN(t)||isNaN(l)||isNaN(r)?(console.warn(" Unknown timing function: "+i),function(n){return n}):re(s,t,l,r)}else return console.warn("Unknown timing function: "+i),function(e){return e}}});Math.hypot||(Math.hypot=(...i)=>{let o=0,e=i.length;for(;e--;)o+=i[e]*i[e];return Math.sqrt(o)});class Es extends ke{constructor(e,s,t){super();d(this,"node");d(this,"props");d(this,"settings");d(this,"propStartValues",{});d(this,"restoreValues",{});d(this,"progress",0);d(this,"delayFor",0);d(this,"timingFunction");d(this,"propsList");this.node=e,this.props=s,this.settings=t,this.propStartValues={},this.propsList=Object.keys(s),this.propsList.forEach(l=>{this.propStartValues[l]=e[l]}),this.timingFunction=l=>l,t.easing&&typeof t.easing=="string"&&(this.timingFunction=Rs(t.easing)),this.delayFor=t.delay||0}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const s=this.props[e],t=this.propStartValues[e];this.props[e]=t,this.propStartValues[e]=s}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,s,t){return(this.timingFunction(e)||e)*(t-s)+s}update(e){const{duration:s,loop:t,easing:l,stopMethod:r}=this.settings;if(!s){this.emit("finished",{});return}if(this.delayFor>0){this.delayFor-=e;return}if(this.progress+=e/s,this.progress>1&&(this.progress=t?0:1,r)){this.emit("finished",{});return}for(let n=0;n<this.propsList.length;n++){const f=this.propsList[n],c=this.props[f],a=this.propStartValues[f],u=c;if(f.indexOf("color")!==-1){if(a===u){this.node[f]=a;continue}if(l){const g=this.timingFunction(this.progress)||this.progress,p=ao(a,u,g);this.node[f]=p;continue}this.node[f]=ao(a,u,this.progress);continue}if(l){this.node[f]=this.applyEasing(this.progress,a,u);continue}this.node[f]=a+(u-a)*this.progress}this.progress===1&&this.emit("finished",{})}}class ks{constructor(o,e){d(this,"manager");d(this,"animation");d(this,"stoppedPromise",null);d(this,"stoppedResolve",null);d(this,"state");this.manager=o,this.animation=e,this.state="stopped"}start(){return this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.makeStoppedPromise(),this.stoppedPromise}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(o=>{this.stoppedResolve=o}))}finished(){this.stoppedResolve;const{loop:o,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!o&&this.manager.unregisterAnimation(this.animation)}}const be=i=>{const o=i>>>24,e=i>>>16&255,s=i>>>8&255,t=i&255;return[o/255,e/255,s/255,t/255]};function As(i){return(i&255)/255}function Mt(i){const o=Math.floor(i[0]*255),e=Math.floor(i[1]*255),s=Math.floor(i[2]*255),t=Math.floor(i[3]*255);return`rgba(${o},${e},${s},${t.toFixed(4)})`}function Ct(i,o,e,s,t){return t?(t.x1=i,t.y1=o,t.x2=e,t.y2=s,t):{x1:i,y1:o,x2:e,y2:s}}function Ms(i,o,e){const s=Ct(Math.max(i.x1,o.x1),Math.max(i.y1,o.y1),Math.min(i.x2,o.x2),Math.min(i.y2,o.y2),e);return s.x1<s.x2&&s.y1<s.y2?s:Ct(0,0,0,0,s)}function Bt(i,o){return i.x1<o.x2&&i.x2>o.x1&&i.y1<o.y2&&i.y2>o.y1}function Bs(i,o){return o?(o.x=i.x1,o.y=i.y1,o.width=i.x2-i.x1,o.height=i.y2-i.y1,o):{x:i.x1,y:i.y1,width:i.x2-i.x1,height:i.y2-i.y1}}function oo(i,o,e){const s=Math.max(i.x,o.x),t=Math.max(i.y,o.y),l=Math.min(i.x+i.width,o.x+o.width)-s,r=Math.min(i.y+i.height,o.y+o.height)-t;return l>0&&r>0?e?(e.x=s,e.y=t,e.width=l,e.height=r,e):{x:s,y:t,width:l,height:r}:e?(e.x=0,e.y=0,e.width=0,e.height=0,e):{x:0,y:0,width:0,height:0}}function Uo(i,o){return o?(o.x=i.x,o.y=i.y,o.width=i.width,o.height=i.height,o):{x:i.x,y:i.y,width:i.width,height:i.height}}function Ls(i,o){return i===o?!0:i===null||o===null?!1:i.x===o.x&&i.y===o.y&&i.width===o.width&&i.height===o.height}function Ns(i){return i.x1<i.x2&&i.y1<i.y2}const oe=0,se=3,fe=6,te=1,ie=4,ce=7,pe=2,me=5,ge=8;class ye{constructor(o){d(this,"data");o?(this.data=new Float32Array(9),this.data[oe]=o[0],this.data[se]=o[3],this.data[fe]=o[6],this.data[te]=o[1],this.data[ie]=o[4],this.data[ce]=o[7],this.data[pe]=o[2],this.data[me]=o[5],this.data[ge]=o[8]):this.data=new Float32Array(9)}static get temp(){return Ps}static multiply(o,e,s){const t=o.data[oe]*e.data[oe]+o.data[se]*e.data[te]+o.data[fe]*e.data[pe],l=o.data[oe]*e.data[se]+o.data[se]*e.data[ie]+o.data[fe]*e.data[me],r=o.data[oe]*e.data[fe]+o.data[se]*e.data[ce]+o.data[fe]*e.data[ge],n=o.data[te]*e.data[oe]+o.data[ie]*e.data[te]+o.data[ce]*e.data[pe],f=o.data[te]*e.data[se]+o.data[ie]*e.data[ie]+o.data[ce]*e.data[me],c=o.data[te]*e.data[fe]+o.data[ie]*e.data[ce]+o.data[ce]*e.data[ge],a=o.data[pe]*e.data[oe]+o.data[me]*e.data[te]+o.data[ge]*e.data[pe],u=o.data[pe]*e.data[se]+o.data[me]*e.data[ie]+o.data[ge]*e.data[me],g=o.data[pe]*e.data[fe]+o.data[me]*e.data[ce]+o.data[ge]*e.data[ge];return s||(s=new ye),s.data[oe]=t,s.data[se]=l,s.data[fe]=r,s.data[te]=n,s.data[ie]=f,s.data[ce]=c,s.data[pe]=a,s.data[me]=u,s.data[ge]=g,s}static identity(o){return o||(o=new ye),o.data[oe]=1,o.data[se]=0,o.data[fe]=0,o.data[te]=0,o.data[ie]=1,o.data[ce]=0,o.data[pe]=0,o.data[me]=0,o.data[ge]=1,o}static translate(o,e,s){return s||(s=new ye),s.data[oe]=1,s.data[se]=0,s.data[fe]=o,s.data[te]=0,s.data[ie]=1,s.data[ce]=e,s.data[pe]=0,s.data[me]=0,s.data[ge]=1,s}static scale(o,e,s){return s||(s=new ye),s.data[oe]=o,s.data[se]=0,s.data[fe]=0,s.data[te]=0,s.data[ie]=e,s.data[ce]=0,s.data[pe]=0,s.data[me]=0,s.data[ge]=1,s}static rotate(o,e){const s=Math.cos(o),t=Math.sin(o);return e||(e=new ye),e.data[oe]=s,e.data[se]=-t,e.data[fe]=0,e.data[te]=t,e.data[ie]=s,e.data[ce]=0,e.data[pe]=0,e.data[me]=0,e.data[ge]=1,e}static copy(o,e,s){return e||(e=new ye),e.data[0]=o.data[0],e.data[1]=o.data[1],e.data[2]=o.data[2],e.data[3]=o.data[3],e.data[4]=o.data[4],e.data[5]=o.data[5],e.data[6]=o.data[6],e.data[7]=o.data[7],e.data[8]=o.data[8],e}translate(o,e){return this.data[fe]=this.data[oe]*o+this.data[se]*e+this.data[fe],this.data[ce]=this.data[te]*o+this.data[ie]*e+this.data[ce],this}scale(o,e){return this.data[oe]=this.data[oe]*o,this.data[se]=this.data[se]*e,this.data[te]=this.data[te]*o,this.data[ie]=this.data[ie]*e,this}rotate(o){if(o===0||!(o%Math.PI*2))return this;const e=Math.cos(o),s=Math.sin(o),t=this.data[oe]*e+this.data[se]*s,l=this.data[se]*e-this.data[oe]*s,r=this.data[te]*e+this.data[ie]*s,n=this.data[ie]*e-this.data[te]*s;return this.data[oe]=t,this.data[se]=l,this.data[te]=r,this.data[ie]=n,this}multiply(o){return ye.multiply(this,o,this)}get tx(){return this.data[fe]}get ty(){return this.data[ce]}get ta(){return this.data[oe]}get tb(){return this.data[se]}get tc(){return this.data[te]}get td(){return this.data[ie]}transformPoint(o,e){return[this.data[oe]*o+this.data[se]*e+this.data[fe],this.data[te]*o+this.data[ie]*e+this.data[te]]}}const Ps=new ye;var O;(function(i){i[i.Children=1]="Children",i[i.ScaleRotate=2]="ScaleRotate",i[i.Local=4]="Local",i[i.Global=8]="Global",i[i.Clipping=16]="Clipping",i[i.CalculatedZIndex=32]="CalculatedZIndex",i[i.ZIndexSortedChildren=64]="ZIndexSortedChildren",i[i.PremultipliedColors=128]="PremultipliedColors",i[i.WorldAlpha=256]="WorldAlpha",i[i.None=0]="None",i[i.All=511]="All"})(O||(O={}));class so extends ke{constructor(e,s){super();d(this,"stage");d(this,"children",[]);d(this,"props");d(this,"updateType",O.All);d(this,"globalTransform");d(this,"scaleRotateTransform");d(this,"localTransform");d(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});d(this,"isRenderable",!1);d(this,"worldAlpha",1);d(this,"premultipliedColorTl",0);d(this,"premultipliedColorTr",0);d(this,"premultipliedColorBl",0);d(this,"premultipliedColorBr",0);d(this,"calcZIndex",0);d(this,"isComplex",!1);d(this,"onTextureLoaded",(e,s)=>{this.stage.requestRender(),this.emit("loaded",{type:"texture",dimensions:s})});d(this,"onTextureFailed",(e,s)=>{this.emit("failed",{type:"texture",error:s})});this.stage=e,this.props={...s,parent:null},this.parent=s.parent,this.updateScaleRotateTransform()}loadTexture(e,s,t=null){this.props.texture&&this.unloadTexture();const{txManager:l}=this.stage,r=l.loadTexture(e,s,t);this.props.texture=r,this.props.textureOptions=t,this.checkIsRenderable(),queueMicrotask(()=>{r.state==="loaded"?this.onTextureLoaded(r,r.dimensions):r.state==="failed"&&this.onTextureFailed(r,r.error),r.on("loaded",this.onTextureLoaded),r.on("failed",this.onTextureFailed)})}unloadTexture(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null,this.checkIsRenderable()}loadShader(e,s){const t=this.stage.renderer.getShaderManager(),{shader:l,props:r}=t.loadShader(e,s);this.props.shader=l,this.props.shaderProps=r,this.checkIsRenderable()}setUpdateType(e){this.updateType|=e;const s=this.props.parent;s&&!(s.updateType&O.Children)&&s.setUpdateType(O.Children)}sortChildren(){this.children.sort((e,s)=>e.calcZIndex-s.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=ye.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){this.scaleRotateTransform;const e=this.props.pivotX*this.props.width,s=this.props.pivotY*this.props.height,t=this.props.mountX*this.props.width,l=this.props.mountY*this.props.height;this.localTransform=ye.translate(e-t+this.props.x,s-l+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-s),this.setUpdateType(O.Global)}update(e,s){this.updateType&O.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(O.Local)),this.updateType&O.Local&&(this.updateLocalTransform(),this.setUpdateType(O.Global));const t=this.props.parent;let l=O.None;this.updateType&O.Global&&(this.localTransform,this.globalTransform=ye.copy((t==null?void 0:t.globalTransform)||this.localTransform,this.globalTransform),t&&this.globalTransform.multiply(this.localTransform),this.setUpdateType(O.Clipping|O.Children),l|=O.Global),this.updateType&O.Clipping&&(this.calculateClippingRect(s),this.checkIsRenderable(),this.setUpdateType(O.Children),l|=O.Clipping),this.updateType&O.WorldAlpha&&(t?this.worldAlpha=t.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(O.Children|O.PremultipliedColors),l|=O.WorldAlpha),this.updateType&O.PremultipliedColors&&(this.premultipliedColorTl=Je(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=Je(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=Je(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=Je(this.props.colorBr,this.worldAlpha,!0)),this.checkIsRenderable(),this.setUpdateType(O.Children),l|=O.PremultipliedColors),t&&this.updateType&O.CalculatedZIndex&&(this.calculateZIndex(),t.setUpdateType(O.ZIndexSortedChildren)),this.updateType&O.Children&&this.children.length&&this.children.forEach(r=>{r.setUpdateType(l),r.updateType!==0&&r.update(e,this.clippingRect)}),this.updateType&O.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkIsRenderable(){return this.props.texture?this.isRenderable=!0:!this.props.width||!this.props.height?this.isRenderable=!1:this.props.shader?this.isRenderable=!0:this.props.clipping?this.isRenderable=!0:this.props.color!==0?this.isRenderable=!0:this.props.colorTop!==0?this.isRenderable=!0:this.props.colorBottom!==0?this.isRenderable=!0:this.props.colorLeft!==0?this.isRenderable=!0:this.props.colorRight!==0?this.isRenderable=!0:this.props.colorTl!==0?this.isRenderable=!0:this.props.colorTr!==0?this.isRenderable=!0:this.props.colorBl!==0?this.isRenderable=!0:this.props.colorBr!==0?this.isRenderable=!0:this.isRenderable=!1}calculateClippingRect(e){this.globalTransform;const{clippingRect:s,props:t,globalTransform:l}=this,{clipping:r}=t,n=l.tb!==0||l.tc!==0;r&&!n?(s.x=l.tx,s.y=l.ty,s.width=this.width*l.ta,s.height=this.height*l.td,s.valid=!0):s.valid=!1,e.valid&&s.valid?oo(e,s,s):e.valid&&(Uo(e,s),s.valid=!0)}calculateZIndex(){var r,n;const e=this.props,s=e.zIndex||0,t=((r=e.parent)==null?void 0:r.zIndex)||0;let l=s;(n=e.parent)!=null&&n.zIndexLocked&&(l=s<t?s:t),this.calcZIndex=l}renderQuads(e){const{width:s,height:t,texture:l,textureOptions:r,shader:n,shaderProps:f}=this.props,{premultipliedColorTl:c,premultipliedColorTr:a,premultipliedColorBl:u,premultipliedColorBr:g}=this,{zIndex:p,worldAlpha:h,globalTransform:m,clippingRect:y}=this;e.addQuad({width:s,height:t,colorTl:c,colorTr:a,colorBl:u,colorBr:g,texture:l,textureOptions:r,zIndex:p,shader:n,shaderProps:f,alpha:h,clippingRect:y,tx:m.tx,ty:m.ty,ta:m.ta,tb:m.tb,tc:m.tc,td:m.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(O.Local))}get absX(){var e,s,t;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((t=(s=this.props.parent)==null?void 0:s.globalTransform)==null?void 0:t.tx)||0)}get absY(){var e;return this.props.y+(((e=this.props.parent)==null?void 0:e.absY)??0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(O.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(O.Local))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(O.Local))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(O.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(O.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(O.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(O.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(O.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(O.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(O.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(O.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(O.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(O.PremultipliedColors|O.WorldAlpha)}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(O.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(O.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(O.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(O.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(O.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(O.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(O.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(O.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(O.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(O.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(O.CalculatedZIndex|O.Children),this.children.forEach(s=>{s.setUpdateType(O.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(O.CalculatedZIndex|O.Children),this.children.forEach(s=>{s.setUpdateType(O.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const s=this.props.parent;if(s!==e){if(this.props.parent=e,s){const t=s.children.indexOf(this);s.children.splice(t,1)}e&&(e.children.push(this),this.setUpdateType(O.All),e.setUpdateType(O.Children|O.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}let zs=1;function io(){return zs++}class Yt extends ke{constructor(e,s,t,l){super();d(this,"rendererMain");d(this,"stage");d(this,"id");d(this,"coreNode");d(this,"_children",[]);d(this,"_src","");d(this,"_parent",null);d(this,"_texture",null);d(this,"_shader",null);d(this,"onTextureLoaded",(e,s)=>{this.emit("loaded",s)});d(this,"onTextureFailed",(e,s)=>{this.emit("failed",s)});this.rendererMain=s,this.stage=t,this.id=(l==null?void 0:l.id)??io(),this.coreNode=l||new so(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){const s=this._parent;if(this._parent=e,this.coreNode.parent=(e==null?void 0:e.coreNode)??null,s){const t=s.children.indexOf(this);s.children.splice(t,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}destroy(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,s){const t=new Es(this.coreNode,e,s);return new ks(this.stage.animationManager,t)}}const Fs=i=>{const o=()=>{if(i.updateAnimations(),!i.hasSceneUpdates()){setTimeout(o,16.666666666666668);return}i.drawFrame(),requestAnimationFrame(o)};requestAnimationFrame(o)},Us=()=>performance?performance.now():Date.now();class Ds{constructor(o){d(this,"textureSource");this.textureSource=o}}class Os{constructor(o){d(this,"stage");this.stage=o}}class $s{}class Xs{static makeCacheKey(o){return!1}static resolveDefaults(o){return{}}}function uo(i,o,e){const s=i.createShader(o);if(!s)throw new Error;if(i.shaderSource(s,e),i.compileShader(s),i.getShaderParameter(s,i.COMPILE_STATUS))return s;console.log(i.getShaderInfoLog(s)),i.deleteShader(s)}function Ys(i,o,e){const s=i.createProgram();if(!s)throw new Error;if(i.attachShader(s,o),i.attachShader(s,e),i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS))return s;console.log(i.getProgramInfoLog(s)),i.deleteProgram(s)}function Ws(i){return self.WebGL2RenderingContext&&i instanceof self.WebGL2RenderingContext}class je extends Xs{constructor(e){super();d(this,"boundBufferCollection",null);d(this,"buffersBound",!1);d(this,"program");d(this,"vao");d(this,"renderer");d(this,"glw");d(this,"attributeBuffers");d(this,"attributeLocations");d(this,"attributeNames");d(this,"uniformLocations");d(this,"uniformTypes");d(this,"supportsIndexedTextures");const s=this.renderer=e.renderer,t=this.glw=this.renderer.glw;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;const l=t.isWebGl2(),r=l&&e.webgl2Extensions||!l&&e.webgl1Extensions||[],n=l?"2.0":"1.0";r.forEach(m=>{if(!t.getExtension(m))throw new Error(`Shader "${this.constructor.name}" requires extension "${m}" for WebGL ${n} but wasn't found`)});const f=e.shaderSources||this.constructor.shaderSources;if(f)l&&(f!=null&&f.webGl2)&&(f.fragment=f.webGl2.fragment,f.vertex=f.webGl2.vertex,delete f.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const c=s.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,a=f.vertex instanceof Function?f.vertex(c):f.vertex,u=f.fragment instanceof Function?f.fragment(c):f.fragment,g=uo(t,t.VERTEX_SHADER,a),p=uo(t,t.FRAGMENT_SHADER,u);if(!g||!p)throw new Error;const h=Ys(t,g,p);if(!h)throw new Error;if(this.program=h,l){const m=t.createVertexArray();if(!m)throw new Error;this.vao=m,t.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach(m=>{const y=t.getAttribLocation(this.program,m);if(y<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${m}"!`);const b=t.createBuffer();if(!b)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${m}"`);this.attributeLocations[m]=y,this.attributeBuffers[m]=b,this.attributeNames.push(m)}),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach(m=>{const y=t.getUniformLocation(this.program,m.name);if(this.uniformTypes[m.name]=m.uniform,!y){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${m.name}"`);return}this.uniformLocations[m.name]=y})}bindBufferAttribute(e,s,t){const{glw:l}=this;l.enableVertexAttribArray(e),l.vertexAttribPointer(s,e,t.size,t.type,t.normalized,t.stride,t.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,s){return!1}bindRenderOp(e,s){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);const{glw:t}=e;if(this.setUniform("u_resolution",[t.canvas.width,t.canvas.height]),this.setUniform("u_pixelRatio",e.options.pixelRatio),s){if(Xt(s,"$dimensions")){let l=s.$dimensions;l||(l=e.dimensions),this.setUniform("u_dimensions",[l.width,l.height])}if(Xt(s,"$alpha")){let l=s.$alpha;l||(l=e.alpha),this.setUniform("u_alpha",l)}this.bindProps(s)}}setUniform(e,...s){this.glw.setUniform(this.uniformTypes[e],this.uniformLocations[e],...s)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const s in this.attributeLocations){const t=e.getBuffer(s),l=e.getAttributeInfo(s);this.bindBufferAttribute(this.attributeLocations[s],t,l)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}d(je,"shaderSources");class Do extends $s{constructor(e,s,t,l,r,n,f,c,a,u){super();d(this,"glw");d(this,"options");d(this,"buffers");d(this,"shader");d(this,"shaderProps");d(this,"alpha");d(this,"clippingRect");d(this,"dimensions");d(this,"bufferIdx");d(this,"zIndex");d(this,"length",0);d(this,"numQuads",0);d(this,"textures",[]);d(this,"maxTextures");this.glw=e,this.options=s,this.buffers=t,this.shader=l,this.shaderProps=r,this.alpha=n,this.clippingRect=f,this.dimensions=c,this.bufferIdx=a,this.zIndex=u,this.maxTextures=l.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:s,maxTextures:t}=this,l=s.findIndex(n=>n===e);if(l!==-1)return l;const r=s.length;return r>=t?4294967295:(this.textures.push(e),r)}draw(){const{glw:e,shader:s,shaderProps:t,options:l}=this,{shManager:r}=l;r.useShader(s),s.bindRenderOp(this,t);const n=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:f,y:c,width:a,height:u}=this.clippingRect,g=l.pixelRatio,p=l.canvas.height,h=Math.round(f*g),m=Math.round(a*g),y=Math.round(u*g),b=Math.round(p-y-c*g);e.setScissorTest(!0),e.scissor(h,b,m,y)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,n)}}function Gs(i){const o={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(o).forEach(s=>{o[s]=i.getParameter(i[s])}),o}function qs(i){const o={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(o).forEach(s=>{o[s]=i.getExtension(s)}),o}function Hs(i,o){const e=~~(o/80),s=new Uint16Array(e*6);for(let l=0,r=0;l<e;l+=6,r+=4)s[l]=r,s[l+1]=r+1,s[l+2]=r+2,s[l+3]=r+2,s[l+4]=r+1,s[l+5]=r+3;const t=i.createBuffer();i.elementArrayBufferData(t,s,i.STATIC_DRAW)}const ho=new Uint8Array([0,0,0,0]);class Oo extends Ds{constructor(e,s){super(s);d(this,"glw");d(this,"_nativeCtxTexture",null);d(this,"_state","freed");d(this,"_w",0);d(this,"_h",0);this.glw=e}get ctxTexture(){return this._state==="freed"&&this.load(),this._nativeCtxTexture,this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){this._state==="loading"||this._state==="loaded"||(this._state="loading",this.textureSource.setState("loading"),this.onLoadRequest().then(({width:e,height:s})=>{this._state="loaded",this._w=e,this._h=s,this.textureSource.setState("loaded",{width:e,height:s})}).catch(e=>{this._state="failed",this.textureSource.setState("failed",e),console.error(e)}))}async onLoadRequest(){var r;this._nativeCtxTexture=this.createNativeCtxTexture();const{glw:e}=this;e.activeTexture(0),e.bindTexture(this._nativeCtxTexture),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,ho);const s=await((r=this.textureSource)==null?void 0:r.getTextureData());let t=0,l=0;if(this._nativeCtxTexture,e.activeTexture(0),s.data instanceof ImageBitmap||s.data instanceof ImageData){const n=s.data;t=n.width,l=n.height,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!s.premultiplyAlpha),e.texImage2D(0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),(e.isWebGl2()||co(t)&&co(l))&&e.generateMipmap()}else s.data===null?(t=0,l=0,e.bindTexture(this._nativeCtxTexture),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,ho)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",s);return{width:t,height:l}}free(){if(this._state==="freed"||(this._state="freed",this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:e}=this;e.deleteTexture(this._nativeCtxTexture),this._nativeCtxTexture=null}createNativeCtxTexture(){const{glw:e}=this,s=e.createTexture();if(!s)throw new Error("Could not create WebGL Texture");return s}}class Et extends ke{constructor(e){super();d(this,"txManager");d(this,"dimensions",null);d(this,"error",null);d(this,"state","loading");this.txManager=e}setState(e,...s){if(this.state!==e){if(this.state=e,e==="loaded"){const t=s;this.dimensions=t[0]}else if(e==="failed"){const t=s;this.error=t[0]}this.emit(e,...s)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}const nt=class nt extends Et{constructor(e,s){super(e);d(this,"props");this.props=nt.resolveDefaults(s||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureData(){const e=new Uint32Array([this.color]),s=new Uint8ClampedArray(e.buffer);return{data:new ImageData(s,1,1),premultiplyAlpha:!0}}static makeCacheKey(e){return`ColorTexture,${nt.resolveDefaults(e).color}`}static resolveDefaults(e){return{color:e.color||4294967295}}};d(nt,"z$__type__Props");let Tt=nt;const _t=class _t extends Et{constructor(e,s){super(e);d(this,"props");d(this,"parentTexture");d(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});d(this,"onParentTxFailed",(e,s)=>{this.setState("failed",s)});this.parentTexture=this.txManager.loadTexture(s.texture.txType,s.texture.props,s.texture.options),this.props=_t.resolveDefaults(s||{}),queueMicrotask(()=>{const t=this.parentTexture;t.state==="loaded"?this.onParentTxLoaded(t,t.dimensions):t.state==="failed"&&this.onParentTxFailed(t,t.error),t.on("loaded",this.onParentTxLoaded),t.on("failed",this.onParentTxFailed)})}async getTextureData(){return{data:this.props}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}};d(_t,"z$__type__Props");let ft=_t;class Vs extends Oo{constructor(o,e){super(o,e)}async onLoadRequest(){var e,s;const o=await this.textureSource.getTextureData();return{width:((e=o.data)==null?void 0:e.width)||0,height:((s=o.data)==null?void 0:s.height)||0}}}class $o extends je{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(o){const{glw:e}=this;e.activeTexture(0),e.bindTexture(o[0].ctxTexture)}}d($o,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class Xo extends je{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});d(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:s,glw:t}=this;if(e.length>s.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${s.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach((r,n)=>{t.activeTexture(n),t.bindTexture(r.ctxTexture)});const l=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",l)}}d(Xo,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:e=>`
      #define txUnits ${e}
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {
        ${Array.from(Array(e).keys()).map(s=>`
          ${s!==0?"else ":""}if (idx == ${s}) {
            return texture2D(textures[${s}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class le{constructor(o){d(this,"priority",1);d(this,"name","");d(this,"ref");d(this,"target");d(this,"passParameters","");d(this,"declaredUniforms","");d(this,"uniformInfo",{});const{ref:e,target:s,props:t={}}=o;this.ref=e,this.target=s;const l={},r=[];let n="";const f=this.constructor.uniforms||{};for(const c in f){const a=f[c],u=a.type,g=`${e}_${c}`;let p="";a.size&&(p=`[${a.size(t)}]`),r.push(g),n+=`uniform ${u} ${g}${p};`,l[c]={name:g,uniform:f[c].method}}this.passParameters=r.join(","),this.declaredUniforms=n,this.uniformInfo=l}static getEffectKey(o){return""}static getMethodParameters(o,e){const s=[];for(const t in o){const l=o[t];let r="";l.size&&(r=`[${l.size(e)}]`),s.push(`${l.type} ${t}${r}`)}return s.join(",")}static resolveDefaults(o){return{}}static makeEffectKey(o){return!1}}d(le,"uniforms",{}),d(le,"methods"),d(le,"onShaderMask"),d(le,"onColorize"),d(le,"onEffectMask");const Lt=new Map,js=(i,o)=>{const e=JSON.stringify(i);if(Lt.has(e))return Lt.get(e);const s=(i??[]).map(t=>({type:t.type,props:o[t.type].resolveDefaults(t.props||{})}));return Lt.set(e,s),s},Te=class Te extends je{constructor(e,s,t){const l=Te.createShader(s,t);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...l.uniforms],shaderSources:{vertex:l.vertex,fragment:l.fragment}});d(this,"effects",[]);this.effects=l.effects,this.calculateProps=Fo(this.calculateProps.bind(this))}bindTextures(e){const{glw:s}=this;s.activeTexture(0),s.bindTexture(e[0].ctxTexture)}calculateProps(e){const s=this.renderer.shManager.getRegisteredEffects(),t=[];return e==null||e.forEach((l,r)=>{const n=this.effects[r],f=s[n.name],c=l.props??{},a=n.uniformInfo;Object.keys(c).forEach(u=>{const g=f.uniforms[u],p=a[u];let h=g.validator?g.validator(c[u],c):c[u];Array.isArray(h)&&(h=new Float32Array(h)),t.push({name:p.name,value:h})})}),t}bindProps(e){this.calculateProps(e.effects).forEach(t=>{this.setUniform(t.name,t.value)})}static createShader(e,s){const t={},l={};let r="";const n=[],f=[],c=e.effects.map(h=>{const m=s[h.type],y=m.getEffectKey(h.props||{});t[y]=t[y]?++t[y]:1;const b=t[y];b===1&&f.push({key:y,type:h.type,props:h.props});const I=new m({ref:`${y}${b===1?"":b}`,target:y,props:h.props});return r+=I.declaredUniforms,n.push(...Object.values(I.uniformInfo)),I});let a="";f==null||f.forEach(h=>{const m=s[h.type],y=m.resolveDefaults(h.props??{}),b=[];for(const x in m.methods){let T=x;const A=m.methods[x];l[x]&&l[x]!==A&&(T=Te.resolveMethodDuplicate(x,A,l)),l[T]=A.replace("function",T),b.push({m:x,cm:T})}let I=m.onShaderMask instanceof Function?m.onShaderMask(y):m.onShaderMask,w=m.onColorize instanceof Function?m.onColorize(y):m.onColorize,_=m.onEffectMask instanceof Function?m.onEffectMask(y):m.onEffectMask;b.forEach(x=>{const{m:T,cm:A}=x,B=new RegExp(`\\$${T}`,"g");I&&(I=I.replace(B,A)),w&&(w=w.replace(B,A)),_&&(_=_.replace(B,A))});const R=m.getMethodParameters(m.uniforms,y),k=R.length>0?`, ${R}`:"";I&&(a+=`
        float fx_${h.key}_onShaderMask(float shaderMask ${k}) {
          ${I}
        }
        `),w&&(a+=`
          vec4 fx_${h.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${k}) {
            ${w}
          }
        `),_&&(a+=`
          vec4 fx_${h.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${k}) {
            ${_}
          }
        `)});let u="";for(const h in l)u+=l[h];let g="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",p=`

    `;for(let h=0;h<c.length;h++){const m=c[h],y=m.passParameters.length>0?`, ${m.passParameters}`:"",b=s[m.name];b.onShaderMask&&(p+=`
        shaderMask = fx_${m.target}_onShaderMask(shaderMask ${y});
        `),b.onColorize&&(p+=`
        maskColor = fx_${m.target}_onColorize(shaderMask, maskColor, shaderColor${y});
        `),b.onEffectMask&&(g=`fx_${m.target}_onEffectMask(shaderMask, maskColor, shaderColor${y})`);const I=c[h+1];(I===void 0||s[I.name].onEffectMask)&&(p+=`
          shaderColor = ${g};
        `)}return{effects:c,uniforms:n,fragment:Te.fragment(r,u,a,p),vertex:Te.vertex()}}static resolveMethodDuplicate(e,s,t,l=0){const r=e+(l>0?l:"");return t[r]&&t[r]!==s?this.resolveMethodDuplicate(e,s,t,++l):r}static resolveDefaults(e,s){return{effects:js(e.effects,s),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,s){var l;let t="";return(l=e.effects)==null||l.forEach(r=>{const f=s[r.type].getEffectKey(r.props||{});t+=`,${f}`}),`DynamicShader${t}`}};d(Te,"z$__type__Props"),d(Te,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),d(Te,"fragment",(e,s,t,l)=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${e}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${s}

    ${t}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${l}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let Ge=Te;class Wt extends je{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(o){return{radius:o.radius||10,$dimensions:{width:0,height:0}}}bindTextures(o){const{glw:e}=this;e.activeTexture(0),e.bindTexture(o[0].ctxTexture)}bindProps(o){this.setUniform("u_radius",o.radius)}canBatchShaderProps(o,e){return o.radius===e.radius&&o.$dimensions.width===e.$dimensions.width&&o.$dimensions.height===e.$dimensions.height}}d(Wt,"z$__type__Props"),d(Wt,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const Ks=new Float32Array([1,0,0,0,1,0,0,0,1]),Rt=class Rt extends je{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(o){const{glw:e}=this;e.activeTexture(0),e.bindTexture(o[0].ctxTexture)}bindProps(o){const e=Rt.resolveDefaults(o);for(const s in e)if(s==="transform")this.setUniform("u_transform",!1,e[s]);else if(s==="scrollY")this.setUniform("u_scrollY",e[s]);else if(s==="color"){const t=be(e.color);this.setUniform("u_color",t)}else s==="size"?this.setUniform("u_size",e[s]):s==="distanceRange"?this.setUniform("u_distanceRange",e[s]):s==="debug"&&this.setUniform("u_debug",e[s]?1:0)}static resolveDefaults(o={}){return{transform:o.transform??Ks,scrollY:o.scrollY??0,color:o.color??4294967295,size:o.size??16,distanceRange:o.distanceRange??1,debug:o.debug??!1}}};d(Rt,"shaderSources",{vertex:`
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;
        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);
        v_texcoord = a_textureCoordinate;
      }
    `,fragment:`
      precision highp float;

      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let Gt=Rt;class Fe extends le{constructor(){super(...arguments);d(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){return{radius:e.radius??10}}}d(Fe,"z$__type__Props"),d(Fe,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let s=e;return Array.isArray(s)?s.length===2?s=[s[0],s[1],s[0],s[1]]:s.length===3?s=[s[0],s[1],s[2],s[0]]:s.length!==4&&(s=[s[0],s[0],s[0],s[0]]):typeof s=="number"&&(s=[s,s,s,s]),s}}}),d(Fe,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),d(Fe,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),d(Fe,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class et extends le{constructor(){super(...arguments);d(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}d(et,"z$__type__Props"),d(et,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(et,"onEffectMask",`
  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),d(et,"onColorize",`
    return color;
  `);class Ue extends le{constructor(){super(...arguments);d(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){const s=e.colors??[4278190080,4294967295];let t=e.stops;if(!t){t=[];const l=s.length-1;for(let r=0;r<s.length;r++)t.push(r*(1/l))}return{colors:s,stops:t,angle:e.angle??0}}}d(Ue,"z$__type__Props"),d(Ue,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(t=>be(t)).reduce((t,l)=>t.concat(l),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,s)=>{const t=s.colors??[];let l=e;const r=e;if(l.length===0||l&&l.length!==t.length){for(let n=0;n<t.length;n++)l[n]?(r[n]=l[n],l[n-1]===void 0&&r[n-2]!==void 0&&(r[n-1]=r[n-2]+(l[n]-r[n-2])/2)):r[n]=n*(1/(t.length-1));l=r}return r},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),d(Ue,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),d(Ue,"ColorLoop",e=>{let s="";for(let t=2;t<e;t++)s+=`colorOut = mix(colorOut, colors[${t}], clamp((dist - stops[${t-1}]) / (stops[${t}] - stops[${t-1}]), 0.0, 1.0));`;return s}),d(Ue,"onColorize",e=>`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      for(int i = 1; i < ${e.colors.length||1}-1; i++) {
        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);
        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));
      }
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `);class qt extends le{constructor(){super(...arguments);d(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){return{amount:e.amount??1}}}d(qt,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),d(qt,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class De extends le{constructor(){super(...arguments);d(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}d(De,"z$__type__Props"),d(De,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(De,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),d(De,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),d(De,"onColorize",`
    return color;
  `);class Oe extends le{constructor(){super(...arguments);d(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}d(Oe,"z$__type__Props"),d(Oe,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(Oe,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),d(Oe,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),d(Oe,"onColorize",`
    return color;
  `);class $e extends le{constructor(){super(...arguments);d(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}d($e,"z$__type__Props"),d($e,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d($e,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),d($e,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),d($e,"onColorize",`
    return color;
  `);class Xe extends le{constructor(){super(...arguments);d(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}d(Xe,"z$__type__Props"),d(Xe,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(Xe,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),d(Xe,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),d(Xe,"onColorize",`
    return color;
  `);class tt extends le{constructor(){super(...arguments);d(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){return{amplitude:e.amplitude??.2,narrowness:e.narrowness??4,blockiness:e.blockiness??2,minimizer:e.minimizer??8,time:e.time??Date.now()}}}d(tt,"z$__type__Props"),d(tt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),d(tt,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),d(tt,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class xt extends le{constructor(){super(...arguments);d(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){return{fade:e.fade??10}}}d(xt,"z$__type__Props"),d(xt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let s=e;return Array.isArray(s)?s.length===2?s=[s[0],s[1],s[0],s[1]]:s.length===3?s=[s[0],s[1],s[2],s[0]]:s.length!==4&&(s=[s[0],s[0],s[0],s[0]]):typeof s=="number"&&(s=[s,s,s,s]),s}}}),d(xt,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);class bt extends le{constructor(){super(...arguments);d(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){const s=e.colors??[4278190080,4294967295];let t=e.stops;if(!t){t=[];const l=s.length-1;for(let r=0;r<s.length;r++)t.push(r*(1/l))}return{colors:s,stops:t,width:e.width??0,height:e.height??e.width??0,pivot:e.pivot??[.5,.5]}}}d(bt,"z$__type__Props"),d(bt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(t=>be(t)).reduce((t,l)=>t.concat(l),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,s)=>{const t=s.colors??[];let l=e;const r=e;if(l.length===0||l&&l.length!==t.length){for(let n=0;n<t.length;n++)l[n]?(r[n]=l[n],l[n-1]===void 0&&r[n-2]!==void 0&&(r[n-1]=r[n-2]+(l[n]-r[n-2])/2)):r[n]=n*(1/(t.length-1));l=r}return r},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),d(bt,"onColorize",e=>`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      for(int i = 1; i < ${e.colors.length||1}-1; i++) {
        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);
        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));
      }
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `);class Ye extends le{constructor(){super(...arguments);d(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){return{width:e.width??10,progress:e.progress??.5,offset:e.offset??0,range:e.range??Math.PI*2,rounded:e.rounded??!1,radius:e.radius??1,color:e.color??4294967295}}}d(Ye,"z$__type__Props"),d(Ye,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(Ye,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),d(Ye,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),d(Ye,"onColorize",`
    return color;
  `);class Zs{constructor(){d(this,"shCache",new Map);d(this,"shConstructors",{});d(this,"attachedShader",null);d(this,"effectConstructors",{});d(this,"renderer");this.registerShaderType("DefaultShader",$o),this.registerShaderType("DefaultShaderBatched",Xo),this.registerShaderType("RoundedRectangle",Wt),this.registerShaderType("DynamicShader",Ge),this.registerShaderType("SdfShader",Gt),this.registerEffectType("border",et),this.registerEffectType("borderBottom",$e),this.registerEffectType("borderLeft",Xe),this.registerEffectType("borderRight",De),this.registerEffectType("borderTop",Oe),this.registerEffectType("fadeOut",xt),this.registerEffectType("linearGradient",Ue),this.registerEffectType("radialGradient",bt),this.registerEffectType("grayscale",qt),this.registerEffectType("glitch",tt),this.registerEffectType("radius",Fe),this.registerEffectType("radialProgress",Ye)}registerShaderType(o,e){this.shConstructors[o]=e}registerEffectType(o,e){this.effectConstructors[o]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(o,e){if(!this.renderer)throw new Error("Renderer is not been defined");const s=this.shConstructors[o];if(!s)throw new Error(`Shader type "${o}" is not registered`);if(o==="DynamicShader")return this.loadDynamicShader(e);const t=s.resolveDefaults(e),l=s.makeCacheKey(t)||s.name;if(l&&this.shCache.has(l))return{shader:this.shCache.get(l),props:t};const r=new s(this.renderer,e);return l&&this.shCache.set(l,r),{shader:r,props:t}}loadDynamicShader(o){if(!this.renderer)throw new Error("Renderer is not been defined");const e=Ge.resolveDefaults(o,this.effectConstructors),s=Ge.makeCacheKey(e,this.effectConstructors);if(s&&this.shCache.has(s))return{shader:this.shCache.get(s),props:e};const t=new Ge(this.renderer,o,this.effectConstructors);return s&&this.shCache.set(s,t),{shader:t,props:e}}useShader(o){this.attachedShader!==o&&(this.attachedShader&&this.attachedShader.detach(),o.attach(),this.attachedShader=o)}}class Yo{constructor(o){d(this,"config");this.config=o}getBuffer(o){var e;return(e=this.config.find(s=>s.attributes[o]))==null?void 0:e.buffer}getAttributeInfo(o){var e;return(e=this.config.find(s=>s.attributes[o]))==null?void 0:e.attributes[o]}}class Qs{constructor(){d(this,"data",{})}reset(){this.data={}}increment(o){this.data[o]||(this.data[o]=0),this.data[o]++}getData(){return{...this.data}}}class Js{constructor(o){d(this,"gl");d(this,"activeTextureUnit",0);d(this,"texture2dUnits");d(this,"texture2dParams",new WeakMap);d(this,"scissorEnabled");d(this,"scissorX");d(this,"scissorY");d(this,"scissorWidth");d(this,"scissorHeight");d(this,"blendEnabled");d(this,"blendSrcRgb");d(this,"blendDstRgb");d(this,"blendSrcAlpha");d(this,"blendDstAlpha");d(this,"boundArrayBuffer");d(this,"boundElementArrayBuffer");d(this,"curProgram");d(this,"programUniforms",new WeakMap);d(this,"canvas");d(this,"MAX_RENDERBUFFER_SIZE");d(this,"MAX_TEXTURE_SIZE");d(this,"MAX_VIEWPORT_DIMS");d(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");d(this,"MAX_TEXTURE_IMAGE_UNITS");d(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");d(this,"MAX_VERTEX_ATTRIBS");d(this,"MAX_VARYING_VECTORS");d(this,"MAX_VERTEX_UNIFORM_VECTORS");d(this,"MAX_FRAGMENT_UNIFORM_VECTORS");d(this,"TEXTURE_MAG_FILTER");d(this,"TEXTURE_MIN_FILTER");d(this,"TEXTURE_WRAP_S");d(this,"TEXTURE_WRAP_T");d(this,"LINEAR");d(this,"CLAMP_TO_EDGE");d(this,"RGBA");d(this,"UNSIGNED_BYTE");d(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");d(this,"FLOAT");d(this,"TRIANGLES");d(this,"UNSIGNED_SHORT");d(this,"ONE");d(this,"ONE_MINUS_SRC_ALPHA");d(this,"VERTEX_SHADER");d(this,"FRAGMENT_SHADER");d(this,"STATIC_DRAW");d(this,"COMPILE_STATUS");d(this,"LINK_STATUS");d(this,"DYNAMIC_DRAW");this.gl=o,this.activeTextureUnit=o.getParameter(o.ACTIVE_TEXTURE)-o.TEXTURE0;const e=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(e).fill(void 0).map((t,l)=>(this.activeTexture(l),o.getParameter(o.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=o.isEnabled(o.SCISSOR_TEST);const s=o.getParameter(o.SCISSOR_BOX);this.scissorX=s[0],this.scissorY=s[1],this.scissorWidth=s[2],this.scissorHeight=s[3],this.blendEnabled=o.isEnabled(o.BLEND),this.blendSrcRgb=o.getParameter(o.BLEND_SRC_RGB),this.blendDstRgb=o.getParameter(o.BLEND_DST_RGB),this.blendSrcAlpha=o.getParameter(o.BLEND_SRC_ALPHA),this.blendDstAlpha=o.getParameter(o.BLEND_DST_ALPHA),this.boundArrayBuffer=o.getParameter(o.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=o.getParameter(o.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=o.getParameter(o.CURRENT_PROGRAM),this.canvas=o.canvas,this.MAX_RENDERBUFFER_SIZE=o.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=o.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=o.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=o.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=o.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=o.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=o.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=o.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=o.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=o.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=o.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=o.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=o.TEXTURE_WRAP_T,this.LINEAR=o.LINEAR,this.CLAMP_TO_EDGE=o.CLAMP_TO_EDGE,this.RGBA=o.RGBA,this.UNSIGNED_BYTE=o.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.FLOAT=o.FLOAT,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.ONE=o.ONE,this.ONE_MINUS_SRC_ALPHA=o.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.VERTEX_SHADER=o.VERTEX_SHADER,this.FRAGMENT_SHADER=o.FRAGMENT_SHADER,this.STATIC_DRAW=o.STATIC_DRAW,this.COMPILE_STATUS=o.COMPILE_STATUS,this.LINK_STATUS=o.LINK_STATUS,this.DYNAMIC_DRAW=o.DYNAMIC_DRAW}isWebGl2(){return Ws(this.gl)}activeTexture(o){const{gl:e}=this;this.activeTextureUnit!==o&&(e.activeTexture(o+e.TEXTURE0),this.activeTextureUnit=o)}bindTexture(o){const{gl:e,activeTextureUnit:s,texture2dUnits:t}=this;t[s]!==o&&(t[s]=o,e.bindTexture(this.gl.TEXTURE_2D,o))}_getActiveTexture(){const{activeTextureUnit:o,texture2dUnits:e}=this;return e[o]}texParameteri(o,e){const{gl:s,texture2dParams:t}=this,l=this._getActiveTexture();if(!l)throw new Error("No active texture");let r=t.get(l);r||(r={},t.set(l,r)),r[o]!==e&&(r[o]=e,s.texParameteri(s.TEXTURE_2D,o,e))}texImage2D(o,e,s,t,l,r,n,f){const{gl:c}=this;r?c.texImage2D(c.TEXTURE_2D,o,e,s,t,l,r,n,f):c.texImage2D(c.TEXTURE_2D,o,e,s,t,l)}pixelStorei(o,e){const{gl:s}=this;s.pixelStorei(o,e)}generateMipmap(){const{gl:o}=this;o.generateMipmap(o.TEXTURE_2D)}createTexture(){const{gl:o}=this;return o.createTexture()}deleteTexture(o){const{gl:e}=this;o&&this.texture2dParams.delete(o),e.deleteTexture(o)}viewport(o,e,s,t){const{gl:l}=this;l.viewport(o,e,s,t)}clearColor(o,e,s,t){const{gl:l}=this;l.clearColor(o,e,s,t)}setScissorTest(o){const{gl:e,scissorEnabled:s}=this;o!==s&&(o?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),this.scissorEnabled=o)}scissor(o,e,s,t){const{gl:l,scissorX:r,scissorY:n,scissorWidth:f,scissorHeight:c}=this;(o!==r||e!==n||s!==f||t!==c)&&(l.scissor(o,e,s,t),this.scissorX=o,this.scissorY=e,this.scissorWidth=s,this.scissorHeight=t)}setBlend(o){const{gl:e,blendEnabled:s}=this;o!==s&&(o?e.enable(e.BLEND):e.disable(e.BLEND),this.blendEnabled=o)}blendFunc(o,e){const{gl:s,blendSrcRgb:t,blendDstRgb:l,blendSrcAlpha:r,blendDstAlpha:n}=this;(o!==t||e!==l||o!==r||e!==n)&&(s.blendFunc(o,e),this.blendSrcRgb=o,this.blendDstRgb=e,this.blendSrcAlpha=o,this.blendDstAlpha=e)}createBuffer(){const{gl:o}=this;return o.createBuffer()}clear(){const{gl:o}=this;o.clear(o.COLOR_BUFFER_BIT)}arrayBufferData(o,e,s){const{gl:t,boundArrayBuffer:l}=this;l!==o&&(t.bindBuffer(t.ARRAY_BUFFER,o),this.boundArrayBuffer=o),t.bufferData(t.ARRAY_BUFFER,e,s)}elementArrayBufferData(o,e,s){const{gl:t,boundElementArrayBuffer:l}=this;l!==o&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),this.boundElementArrayBuffer=o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,s)}vertexAttribPointer(o,e,s,t,l,r,n){const{gl:f,boundArrayBuffer:c}=this;c!==o&&(f.bindBuffer(f.ARRAY_BUFFER,o),this.boundArrayBuffer=o),f.vertexAttribPointer(e,s,t,l,r,n)}useProgram(o){const{gl:e,curProgram:s}=this;s!==o&&(e.useProgram(o),this.curProgram=o)}setUniform(o,e,...s){const{gl:t,programUniforms:l}=this;let r=l.get(this.curProgram);r||(r=new Map,l.set(this.curProgram,r));const n=r.get(e);(!n||!ei(n,s))&&(r.set(e,s),t[o](e,...s))}getParameter(o){const{gl:e}=this;return e.getParameter(o)}drawElements(o,e,s,t){const{gl:l}=this;l.drawElements(o,e,s,t)}getExtension(o){const{gl:e}=this;return e.getExtension(o)}createVertexArray(){const{gl:o}=this;return o.createVertexArray()}bindVertexArray(o){const{gl:e}=this;e.bindVertexArray(o)}getAttribLocation(o,e){const{gl:s}=this;return s.getAttribLocation(o,e)}getUniformLocation(o,e){const{gl:s}=this;return s.getUniformLocation(o,e)}enableVertexAttribArray(o){const{gl:e}=this;e.enableVertexAttribArray(o)}disableVertexAttribArray(o){const{gl:e}=this;e.disableVertexAttribArray(o)}createShader(o){const{gl:e}=this;return e.createShader(o)}compileShader(o){const{gl:e}=this;e.compileShader(o)}attachShader(o,e){const{gl:s}=this;s.attachShader(o,e)}linkProgram(o){const{gl:e}=this;e.linkProgram(o)}deleteProgram(o){const{gl:e}=this;e.deleteProgram(o)}getShaderParameter(o,e){const{gl:s}=this;return s.getShaderParameter(o,e)}getShaderInfoLog(o){const{gl:e}=this;return e.getShaderInfoLog(o)}createProgram(){const{gl:o}=this;return o.createProgram()}getProgramParameter(o,e){const{gl:s}=this;return s.getProgramParameter(o,e)}getProgramInfoLog(o){const{gl:e}=this;return e.getProgramInfoLog(o)}shaderSource(o,e){const{gl:s}=this;s.shaderSource(o,e)}deleteShader(o){const{gl:e}=this;e.deleteShader(o)}}function ei(i,o){return i.length!==o.length?!1:i.every((e,s)=>Array.isArray(e)||e instanceof Float32Array?!1:e===o[s])}const ti=24;class oi extends Os{constructor(e){super(e.stage);d(this,"glw");d(this,"system");d(this,"txManager");d(this,"shManager");d(this,"options");d(this,"quadBuffer",new ArrayBuffer(1024*1024*4));d(this,"fQuadBuffer",new Float32Array(this.quadBuffer));d(this,"uiQuadBuffer",new Uint32Array(this.quadBuffer));d(this,"renderOps",[]);d(this,"curBufferIdx",0);d(this,"curRenderOp",null);d(this,"renderables",[]);d(this,"defaultShader");d(this,"quadBufferCollection");d(this,"defaultTexture");const{canvas:s,clearColor:t,bufferMemory:l}=e;this.options=e,this.txManager=e.txManager,this.shManager=e.shManager,this.defaultTexture=new Tt(this.txManager),this.defaultTexture.once("loaded",()=>{this.stage.requestRender()});const r=Cs(s,e.contextSpy),n=this.glw=new Js(r),f=be(t);n.viewport(0,0,s.width,s.height),n.clearColor(f[0],f[1],f[2],f[3]),n.setBlend(!0),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),Hs(n,l),this.system={parameters:Gs(this.glw),extensions:qs(this.glw)},this.shManager.renderer=this,this.defaultShader=this.shManager.loadShader("DefaultShader").shader;const c=n.createBuffer(),a=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new Yo([{buffer:c,attributes:{a_position:{name:"a_position",size:2,type:n.FLOAT,normalized:!1,stride:a,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:n.FLOAT,normalized:!1,stride:a,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:n.UNSIGNED_BYTE,normalized:!0,stride:a,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:n.FLOAT,normalized:!1,stride:a,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:e}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof ft?new Vs(this.glw,e):new Oo(this.glw,e)}addQuad(e){const{fQuadBuffer:s,uiQuadBuffer:t}=this,{width:l,height:r,colorTl:n,colorTr:f,colorBl:c,colorBr:a,textureOptions:u,shader:g,shaderProps:p,alpha:h,clippingRect:m,tx:y,ty:b,ta:I,tb:w,tc:_,td:R}=e;let{texture:k}=e;if(p&&Xt(p,"$dimensions")){const z=p.$dimensions;z.width=l,z.height=r}k=k??this.defaultTexture;let{curBufferIdx:x,curRenderOp:T}=this;const A={width:l,height:r},B=g||this.defaultShader;T&&(T.shader!==B||!Ls(T.clippingRect,m)||T.shader!==this.defaultShader&&(!p||!T.shader.canBatchShaderProps(T.shaderProps,p)))&&(T=null),T||(this.newRenderOp(B,p,h,A,m,x),T=this.curRenderOp);const E=(u==null?void 0:u.flipX)??!1,L=(u==null?void 0:u.flipY)??!1;let F=0,U=0,S=1,v=1;if(k instanceof ft){const{x:z,y:N,width:$,height:Y}=k.props,{width:H=0,height:X=0}=k.parentTexture.dimensions||{width:0,height:0};F=z/H,S=F+$/H,U=N/X,v=U+Y/X,k=k.parentTexture}E&&([F,S]=[S,F]),L&&([U,v]=[v,U]);const{txManager:M}=this.stage,D=M.getCtxTexture(k),P=this.addTexture(D,x);if(T=this.curRenderOp,w!==0||_!==0)s[x++]=y,s[x++]=b,s[x++]=F,s[x++]=U,t[x++]=n,s[x++]=P,s[x++]=y+l*I,s[x++]=b+l*_,s[x++]=S,s[x++]=U,t[x++]=f,s[x++]=P,s[x++]=y+r*w,s[x++]=b+r*R,s[x++]=F,s[x++]=v,t[x++]=c,s[x++]=P,s[x++]=y+l*I+r*w,s[x++]=b+l*_+r*R,s[x++]=S,s[x++]=v,t[x++]=a,s[x++]=P;else{const z=y+l*I,N=b+r*R;s[x++]=y,s[x++]=b,s[x++]=F,s[x++]=U,t[x++]=n,s[x++]=P,s[x++]=z,s[x++]=b,s[x++]=S,s[x++]=U,t[x++]=f,s[x++]=P,s[x++]=y,s[x++]=N,s[x++]=F,s[x++]=v,t[x++]=c,s[x++]=P,s[x++]=z,s[x++]=N,s[x++]=S,s[x++]=v,t[x++]=a,s[x++]=P}T.length+=ti,T.numQuads++,this.curBufferIdx=x}newRenderOp(e,s,t,l,r,n){const f=new Do(this.glw,this.options,this.quadBufferCollection,e,s,t,r,l,n,0);this.curRenderOp=f,this.renderOps.push(f)}addTexture(e,s,t){const{curRenderOp:l}=this,r=l.addTexture(e);if(r===4294967295){if(t)throw new Error("Unable to add texture to render op");const{shader:n,shaderProps:f,dimensions:c,clippingRect:a,alpha:u}=l;return this.newRenderOp(n,f,u,c,a,s),this.addTexture(e,s,!0)}return r}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){const{glw:s,quadBuffer:t}=this,l=new Float32Array(t,0,this.curBufferIdx),r=this.quadBufferCollection.getBuffer("a_position")??null;s.arrayBufferData(r,l,s.STATIC_DRAW),this.renderOps.forEach((n,f)=>{n.draw()}),this.renderables=[]}}class si{constructor(){d(this,"activeAnimations",new Set)}registerAnimation(o){this.activeAnimations.add(o)}unregisterAnimation(o){this.activeAnimations.delete(o)}update(o){this.activeAnimations.forEach(e=>{e.update(o)})}}class ii{constructor(o){d(this,"isWorkerSupported",!!self.Worker);d(this,"imageWorkersEnabled",!0);d(this,"messageManager",{});d(this,"workers",[]);d(this,"workerIndex",0);this.isWorkerSupported&&o>0?(this.workers=this.createWorkers(o),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})):this.imageWorkersEnabled=!1}handleMessage(o){const{src:e,data:s,error:t}=o.data,l=this.messageManager[e];if(l){const[r,n]=l;delete this.messageManager[e],t?n(new Error(t)):r({data:s})}}createWorkers(o=1){const e=`
      async function getImage(src, premultiplyAlpha) {
        const response = await fetch(src);
        const blob = await response.blob();
        return await createImageBitmap(blob, {
          premultiplyAlpha: premultiplyAlpha ? 'premultiply' : 'none',
          colorSpaceConversion: 'none',
          imageOrientation: 'none',
        });
      }

      self.onmessage = async (event) => {
        const { src, premultiplyAlpha } = event.data;

        try {
          const data = await getImage(src, premultiplyAlpha);
          self.postMessage({ src, data }, [data]);
        } catch (error) {
          self.postMessage({ src, error: error.message });
        }
      };
    `,s=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),t=(window.URL?URL:webkitURL).createObjectURL(s),l=[];for(let r=0;r<o;r++)l.push(new Worker(t));return l}getNextWorker(){const o=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,o}convertUrlToAbsolute(o){return new URL(o,self.location.href).href}getImage(o,e){return new Promise((s,t)=>{try{if(this.workers){const l=this.convertUrlToAbsolute(o);this.messageManager[l]=[s,t],this.getNextWorker().postMessage({src:l,premultiplyAlpha:e})}}catch(l){t(l)}})}}const rt=class rt extends Et{constructor(e,s){super(e);d(this,"props");this.props=rt.resolveDefaults(s)}async getTextureData(){const{src:e,premultiplyAlpha:s}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:s};if(this.txManager.imageWorkerManager.imageWorkersEnabled)return await this.txManager.imageWorkerManager.getImage(e,s);{const l=await(await fetch(e)).blob();return{data:await createImageBitmap(l,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"})}}}static makeCacheKey(e){const s=rt.resolveDefaults(e);return s.src instanceof ImageData?!1:`ImageTexture,${s.src},${s.premultiplyAlpha}`}static resolveDefaults(e){return{src:e.src??"",premultiplyAlpha:e.premultiplyAlpha??!0}}};d(rt,"z$__type__Props");let Ht=rt;const lt=class lt extends Et{constructor(e,s){super(e);d(this,"props");this.props=lt.resolveDefaults(s)}async getTextureData(){const{width:e,height:s}=this.props,t=e*s*4,l=new Uint8ClampedArray(t);for(let r=0;r<t;r+=4){const n=Math.floor(Math.random()*256);l[r]=n,l[r+1]=n,l[r+2]=n,l[r+3]=255}return{data:new ImageData(l,e,s)}}static makeCacheKey(e){const s=lt.resolveDefaults(e);return`NoiseTexture,${s.width},${s.height},${s.cacheId}`}static resolveDefaults(e){return{width:e.width??128,height:e.height??128,cacheId:e.cacheId??0}}};d(lt,"z$__type__Props");let Vt=lt;class ni{constructor(o){d(this,"usedMemory",0);d(this,"txConstructors",{});d(this,"textureKeyCache",new Map);d(this,"textureIdCache",new Map);d(this,"ctxTextureCache",new WeakMap);d(this,"textureRefCountMap",new WeakMap);d(this,"imageWorkerManager");d(this,"renderer");this.imageWorkerManager=new ii(o),this.registerTextureType("ImageTexture",Ht),this.registerTextureType("ColorTexture",Tt),this.registerTextureType("NoiseTexture",Vt),this.registerTextureType("SubTexture",ft)}registerTextureType(o,e){this.txConstructors[o]=e}loadTexture(o,e,s=null){const t=this.txConstructors[o];if(!t)throw new Error(`Texture type "${o}" is not registered`);let l;if((s==null?void 0:s.id)!==void 0&&this.textureIdCache.has(s.id)&&(l=this.textureIdCache.get(s.id)),!l){const r=s==null?void 0:s.id,n=(s==null?void 0:s.cacheKey)??t.makeCacheKey(e);n&&this.textureKeyCache.has(n)?l=this.textureKeyCache.get(n):l=new t(this,e),r&&this.addTextureIdToCache(r,n,l)}return s!=null&&s.preload&&this.getCtxTexture(l).load(),l}addTextureIdToCache(o,e,s){const{textureIdCache:t,textureRefCountMap:l}=this;t.set(o,s),l.has(s)?l.get(s).count++:(l.set(s,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,s))}removeTextureIdFromCache(o){const{textureIdCache:e,textureRefCountMap:s}=this,t=e.get(o);if(t&&(e.delete(o),s.has(t))){const l=s.get(t);l.count--,l.count===0&&(s.delete(t),l.cacheKey&&this.textureKeyCache.delete(l.cacheKey))}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(o){if(this.ctxTextureCache.has(o))return this.ctxTextureCache.get(o);const e=this.renderer.createCtxTexture(o);return this.ctxTextureCache.set(o,e),e}}class Wo{constructor(o){d(this,"textRenderers");this.textRenderers=o}addFontFace(o){for(const e in this.textRenderers){const s=this.textRenderers[e];s&&s.isFontFaceSupported(o)&&s.addFontFace(o)}}static resolveFontFace(o,e){const s=[];return o.reduce((l,r)=>{if(l)return l;const n=r[e.fontFamily];if(!n)return;const f=new Set(n);for(const c of f)(c.descriptors.stretch!==e.fontStretch||c.descriptors.style!==e.fontStyle||c.descriptors.weight!==e.fontWeight)&&f.delete(c);return f.values().next().value},void 0)||s[0]}}const ri={x:(i,o)=>{i.props.x=o},y:(i,o)=>{i.props.y=o},width:(i,o)=>{i.props.width=o},height:(i,o)=>{i.props.height=o},color:(i,o)=>{i.props.color=o},zIndex:(i,o)=>{i.props.zIndex=o},fontFamily:(i,o)=>{i.props.fontFamily=o},fontWeight:(i,o)=>{i.props.fontWeight=o},fontStyle:(i,o)=>{i.props.fontStyle=o},fontStretch:(i,o)=>{i.props.fontStretch=o},fontSize:(i,o)=>{i.props.fontSize=o},text:(i,o)=>{i.props.text=o},textAlign:(i,o)=>{i.props.textAlign=o},contain:(i,o)=>{i.props.contain=o},offsetY:(i,o)=>{i.props.offsetY=o},scrollable:(i,o)=>{i.props.scrollable=o},scrollY:(i,o)=>{i.props.scrollY=o},letterSpacing:(i,o)=>{i.props.letterSpacing=o},lineHeight:(i,o)=>{i.props.lineHeight=o},maxLines:(i,o)=>{i.props.maxLines=o},textBaseline:(i,o)=>{i.props.textBaseline=o},verticalAlign:(i,o)=>{i.props.verticalAlign=o},overflowSuffix:(i,o)=>{i.props.overflowSuffix=o},debug:(i,o)=>{i.props.debug=o}};class Go{constructor(o){d(this,"stage");d(this,"set");this.stage=o;const e={...ri,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([s,t])=>[s,(l,r)=>{l.props[s]!==r&&(t(l,r),this.stage.requestRender())}])))}setStatus(o,e,s){o.status!==e&&(o.status=e,o.emitter.emit(e,s))}scheduleUpdateState(o){o.updateScheduled||(o.updateScheduled=!0,queueMicrotask(()=>{o.updateScheduled=!1,this.updateState(o)}))}}const li=24;function fi(i,o,e,s,t,l,r,n,f){const c=Math.min(Math.max(r.firstLineIdx,0),n.length),a=0;let u=0;s==="middle"?u=(o-i)/2:s==="bottom"&&(u=o-i);const p=t/l+c*o+u;if(!(f&&p>=f/l))return{sdfX:a,sdfY:p,lineIndex:c}}class ot{constructor(o,e=0){d(this,"iterator");d(this,"peekBuffer",[]);d(this,"_lastIndex");this.iterator=o,this.iterator=o,this._lastIndex=e-1,this.peekBuffer=[]}next(){const o=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return o.done?this._lastIndex=-1:this._lastIndex++,o}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const o=this.iterator.next();return this.peekBuffer.push(o),o}get lastIndex(){return this._lastIndex}}function*st(i,o=0){let e=o;for(;e<i.length;){const s=i.codePointAt(e);if(s===void 0)throw new Error("Invalid Unicode code point");yield s,e+=s<=65535?1:2}}function ai(i,o,e){const s=e.shapeText(o,new ot(st(i,0),0));let t=0;for(const l of s)l.mapped&&(t+=l.xAdvance);return t}function ci(i,o,e,s,t,l,r,n,f,c,a,u,g,p,h,m,y,b,I){h.loaded,h.data,h.shaper;const w=n/h.data.info.size,_=f/w,R=l/w,k=c/w,x=g[i],T=(x==null?void 0:x.codepointIndex)||0,A=(x==null?void 0:x.maxX)||0,B=(x==null?void 0:x.maxY)||0;let E=A,L=B,F=o,U=e,S=0;const v={codepointIndex:-1,bufferOffset:-1,xStart:-1},M=h.shaper,D={letterSpacing:k};let P=M.shapeText(D,new ot(st(s,T),T)),z,N=-1;const $=[],Y=r/w,H=ai(b,D,M);let X=!0;for(;X;){const K=(I===0||i+1<I)&&(u!=="both"||y||U+_+_<=Y),Z=K?R:R-H;let G=0;const Q=U+_>=p.y1,ne=U<=p.y2,J=Q&&ne;for(;(z=P.next())&&!z.done;){const V=z.value;if(i===g.length)g.push({codepointIndex:V.cluster,maxY:L,maxX:E});else if(i>g.length)throw new Error("Unexpected lineCache length");if(V.codepoint===32||V.codepoint===10?v.codepointIndex!==-1&&(v.codepointIndex=-1,G=F):v.codepointIndex===-1&&(v.codepointIndex=V.cluster,v.bufferOffset=S,v.xStart=G),V.mapped){const he=F+V.xOffset+V.width;if(u!=="none"&&he>=Z&&v.codepointIndex!==-1&&v.codepointIndex<V.cluster&&v.xStart>0)if(K){P=M.shapeText(D,new ot(st(s,v.codepointIndex),v.codepointIndex)),S=v.bufferOffset;break}else P=M.shapeText(D,new ot(st(b,0),0)),F=v.xStart,S=v.bufferOffset;else{const ae=F+V.xOffset,ue=U+V.yOffset;if(J){N===-1&&(N=S);const xe=h.getAtlasEntry(V.glyphId),ve=xe.x/h.data.common.scaleW,Ie=xe.y/h.data.common.scaleH,Se=xe.width/h.data.common.scaleW,we=xe.height/h.data.common.scaleH;a[S++]=ae,a[S++]=ue,a[S++]=ve,a[S++]=Ie,a[S++]=ae+V.width,a[S++]=ue,a[S++]=ve+Se,a[S++]=Ie,a[S++]=ae,a[S++]=ue+V.height,a[S++]=ve,a[S++]=Ie+we,a[S++]=ae+V.width,a[S++]=ue+V.height,a[S++]=ve+Se,a[S++]=Ie+we}L=Math.max(L,ue+V.height),F+=V.xAdvance,E=Math.max(E,F)}}else if(V.codepoint===10){if(K)break;P=M.shapeText(D,new ot(st(b,0),0)),u="none"}}N!==-1&&($.push({bufferStart:N,bufferEnd:S}),N=-1),F=0,U+=_,i++,v.codepointIndex=-1,G=0,!m&&u==="both"&&U>p.y2||z&&z.done?X=!1:K||(X=!1)}if(t==="center"){const K=u==="none"?E:R;for(let Z=0;Z<$.length;Z++){const G=$[Z],Q=a[G.bufferEnd-4]-a[G.bufferStart],ne=(K-Q)/2;for(let J=G.bufferStart;J<G.bufferEnd;J+=4)a[J]+=ne}}else if(t==="right"){const K=u==="none"?E:R;for(let Z=0;Z<$.length;Z++){const G=$[Z],Q=G.bufferEnd===G.bufferStart?0:a[G.bufferEnd-4]-a[G.bufferStart],ne=K-Q;for(let J=G.bufferStart;J<G.bufferEnd;J+=4)a[J]+=ne}}return{bufferNumFloats:S,bufferNumQuads:S/16,layoutNumCharacters:z.done?s.length-T:z.value.cluster-T+1,fullyProcessed:!!z.done,maxX:E,maxY:L}}function di(i,o){return Math.ceil(i/o)*o}function ui(i,o){return Math.floor(i/o)*o}function hi(i,o,e,s,t,l,r,n){const{screen:f,sdf:c}=i;if(!Ns(r))f.x1=0,f.y1=0,f.x2=0,f.y2=0,c.x1=0,c.y1=0,c.x2=0,c.y2=0,i.numLines=0,i.firstLineIdx=0;else{const a=r.x1-o,u=a+(r.x2-r.x1),g=r.y1-e+s,p=ui(g-l,t||1),h=di(g+(r.y2-r.y1)+l,t||1);f.x1=a,f.y1=p,f.x2=u,f.y2=h,c.x1=a/n,c.y1=p/n,c.x2=u/n,c.y2=h/n,i.numLines=Math.ceil((h-p)/t),i.firstLineIdx=t?Math.floor(p/t):0}i.valid=!0}const pi={x:0,y:0,width:0,height:0};class mi extends Go{constructor(e){super(e);d(this,"ssdfFontFamilies",{});d(this,"msdfFontFamilies",{});d(this,"sdfShader");d(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,s)=>{e.props.fontFamily=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,s)=>{e.props.fontWeight=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,s)=>{e.props.fontStyle=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,s)=>{e.props.fontStretch=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontSize:(e,s)=>{e.props.fontSize=s,this.invalidateLayoutCache(e)},text:(e,s)=>{e.props.text=s,this.invalidateLayoutCache(e)},textAlign:(e,s)=>{e.props.textAlign=s,this.invalidateLayoutCache(e)},color:(e,s)=>{e.props.color=s},x:(e,s)=>{e.props.x=s,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&Bt(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,s)=>{e.props.y=s,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&Bt(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,s)=>{e.props.contain=s,this.invalidateLayoutCache(e)},width:(e,s)=>{e.props.width=s,this.invalidateLayoutCache(e)},height:(e,s)=>{e.props.height=s,this.invalidateLayoutCache(e)},offsetY:(e,s)=>{e.props.offsetY=s,this.invalidateLayoutCache(e)},scrollable:(e,s)=>{e.props.scrollable=s,this.invalidateLayoutCache(e)},scrollY:(e,s)=>{e.props.scrollY=s,this.scheduleUpdateState(e)},letterSpacing:(e,s)=>{e.props.letterSpacing=s,this.invalidateLayoutCache(e)},lineHeight:(e,s)=>{e.props.lineHeight=s,this.invalidateLayoutCache(e)},maxLines:(e,s)=>{e.props.maxLines=s,this.invalidateLayoutCache(e)},textBaseline:(e,s)=>{e.props.textBaseline=s,this.invalidateLayoutCache(e)},verticalAlign:(e,s)=>{e.props.verticalAlign=s,this.invalidateLayoutCache(e)},overflowSuffix:(e,s)=>{e.props.overflowSuffix=s,this.invalidateLayoutCache(e)},debug:(e,s)=>{e.props.debug=s}}}canRenderFont(e){const{fontFamily:s}=e;return s in this.ssdfFontFamilies||s in this.msdfFontFamilies||s==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof ms}addFontFace(e){const s=e.fontFamily,t=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!t){console.warn(`Invalid font face type: ${e.type}`);return}let l=t[s];l||(l=new Set,t[s]=l),l.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new ke,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:s}=e;const{textH:t,lineCache:l,debugData:r,forceFullLayoutCalc:n}=e;if(r.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!s&&(s=this.resolveFontFace(e.props),e.trFontFace=s,!s)){const M=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;console.error(M),this.setStatus(e,"failed",new Error(M));return}if(!s.loaded){s.once("loaded",()=>{this.scheduleUpdateState(e)});return}s.data;const{text:f,fontSize:c,x:a,y:u,contain:g,width:p,height:h,lineHeight:m,verticalAlign:y,scrollable:b,overflowSuffix:I,maxLines:w}=e.props,_=g==="both"&&b?e.props.scrollY:0,{renderWindow:R}=e,k=s.data.info.size,x=c/k,T=m/x;e.distanceRange=x*s.data.distanceField.distanceRange;const A=f.length*li;let B=e.vertexBuffer;(!B||B.length<A)&&(B=new Float32Array(A*2));const E=e.elementBounds;if(E.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),E.valid=!0),!n&&R.valid){const M=R.screen;if(a+M.x1<=E.x1&&a+M.x2>=E.x2&&u-_+M.y1<=E.y1&&u-_+M.y2>=E.y2){this.setStatus(e,"loaded");return}R.valid=!1,this.setStatus(e,"loading")}const{offsetY:L,textAlign:F}=e.props;if(!R.valid){if(!Bt(E,this.rendererBounds))return;hi(R,a,u,_,m,g==="both"?E.y2-E.y1:0,E,x)}const U=fi(k,T,m,y,L,x,R,l,t);if(!U){this.setStatus(e,"loaded");return}const{letterSpacing:S}=e.props,v=ci(U.lineIndex,U.sdfX,U.sdfY,f,F,p,h,c,m,S,B,g,l,R.sdf,s,n,b,I,w);e.bufferUploaded=!1,e.bufferNumFloats=v.bufferNumFloats,e.bufferNumQuads=v.bufferNumQuads,e.vertexBuffer=B,e.renderWindow=R,r.lastLayoutNumCharacters=v.layoutNumCharacters,r.bufferSize=B.byteLength,v.fullyProcessed&&(e.textW=v.maxX*x,e.textH=v.maxY*x),this.setStatus(e,"loaded")}renderQuads(e,s,t,l){var A,B;if(!e.vertexBuffer)return;const{renderer:r}=this.stage,{fontSize:n,color:f,contain:c,scrollable:a,zIndex:u,debug:g}=e.props,p=c==="both"&&a?e.props.scrollY:0,{textW:h=0,textH:m=0,distanceRange:y,vertexBuffer:b,bufferUploaded:I,trFontFace:w,elementBounds:_}=e;let{webGlBuffers:R}=e;if(!R){const E=r.glw,L=4*Float32Array.BYTES_PER_ELEMENT,F=E.createBuffer();e.webGlBuffers=new Yo([{buffer:F,attributes:{a_position:{name:"a_position",size:2,type:E.FLOAT,normalized:!1,stride:L,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:E.FLOAT,normalized:!1,stride:L,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,e.webGlBuffers,R=e.webGlBuffers}if(!I){const E=r.glw,L=(R==null?void 0:R.getBuffer("a_textureCoordinate"))??null;E.arrayBufferData(L,b,E.STATIC_DRAW),e.bufferUploaded=!0}if(a&&c==="both"){_.valid;const E=Bs(_,pi);t.valid?(e.clippingRect.valid=!0,t=oo(t,E,e.clippingRect)):(e.clippingRect.valid=!0,t=Uo(E,e.clippingRect))}const k=new Do(r.glw,r.options,R,this.sdfShader,{transform:s.data,color:Ts(f,l),size:n/(((A=w.data)==null?void 0:A.info.size)||0),scrollY:p,distanceRange:y,debug:g.sdfShaderDebug},l,t,{height:m,width:h},0,u),x=(B=e.trFontFace)==null?void 0:B.texture,T=this.stage.txManager.getCtxTexture(x);k.addTexture(T),k.length=e.bufferNumFloats,k.numQuads=e.bufferNumQuads,r.addRenderOp(k)}resolveFontFace(e){return Wo.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],e)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:s,contain:t,width:l}=e.props,{elementBounds:r}=e;r.x1=s,r.x2=t!=="none"?s+l:1/0}setElementBoundsY(e){const{y:s,contain:t,height:l}=e.props,{elementBounds:r}=e;r.y1=s,r.y2=t==="both"?s+l:1/0}}const po=2048;class gi{constructor(o,e){d(this,"_canvas");d(this,"_context");d(this,"_settings");d(this,"renderInfo");this._canvas=o,this._context=e,this._settings=this.mergeDefaults({})}set settings(o){this._settings=this.mergeDefaults(o)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const o=[this._settings.fontFace],e=[];for(let s=0,t=o.length;s<t;s++)o[s]==="serif"||o[s]==="sans-serif"?e.push(o[s]):e.push(`"${o[s]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${e.join(",")}`}_load(){if(document.fonts){const o=this._getFontSetting();try{if(!document.fonts.check(o,this._settings.text))return document.fonts.load(o,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,o)}).then(()=>{document.fonts.check(o,this._settings.text)||console.warn("[Lightning] Font not found",o)})}catch{console.warn("[Lightning] Can't check font loading for "+o)}}}calculateRenderInfo(){const o={},e=this.getPrecision(),s=this._settings.paddingLeft*e,t=this._settings.paddingRight*e,l=this._settings.fontSize*e;let r=this._settings.offsetY===null?null:this._settings.offsetY*e,n=(this._settings.lineHeight||l)*e;const f=this._settings.w*e,c=this._settings.h*e;let a=this._settings.wordWrapWidth*e;const u=this._settings.cutSx*e,g=this._settings.cutEx*e,p=this._settings.cutSy*e,h=this._settings.cutEy*e,m=(this._settings.letterSpacing||0)*e,y=this._settings.textIndent*e;this.setFontProperties();let b=f||2048/this.getPrecision(),I=b-s;if(I<10&&(b+=10-I,I=10),a||(a=I),this._settings.textOverflow&&!this._settings.wordWrap){let T;switch(this._settings.textOverflow){case"clip":T="";break;case"ellipsis":T=this._settings.overflowSuffix;break;default:T=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,a-y,T)}let w;if(this._settings.wordWrap)w=this.wrapText(this._settings.text,a,m,y);else{w={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const T=w.l.length;for(let A=0;A<T-1;A++)w.n.push(A)}let _=w.l;if(this._settings.maxLines&&_.length>this._settings.maxLines){const T=_.slice(0,this._settings.maxLines);let A=null;if(this._settings.overflowSuffix){const U=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,S=this.wrapText(T[T.length-1],a-U,m,y);T[T.length-1]=`${S.l[0]}${this._settings.overflowSuffix}`,A=[S.l.length>1?S.l[1]:""]}else A=[""];let B;const E=_.length;let L=0;const F=w.n.length;for(B=this._settings.maxLines;B<E;B++)A[L]+=`${A[L]?" ":""}${_[B]}`,B+1<F&&w.n[B+1]&&L++;o.remainingText=A.join(`
`),o.moreTextLines=!0,_=T}else o.moreTextLines=!1,o.remainingText="";let R=0;const k=[];for(let T=0;T<_.length;T++){const A=this.measureText(_[T],m)+(T===0?y:0);k.push(A),R=Math.max(R,A)}o.lineWidths=k,f||(b=R+s+t,I=R),n=n||l;let x;if(c)x=c;else{const T=this._settings.textBaseline!="bottom"?.5*l:0;x=n*(_.length-1)+T+Math.max(n,l)+(r||0)}return r===null&&(r=l),o.w=b,o.h=x,o.lines=_,o.precision=e,b||(b=1),x||(x=1),(u||g)&&(b=Math.min(b,g-u)),(p||h)&&(x=Math.min(x,h-p)),o.width=b,o.innerWidth=I,o.height=x,o.fontSize=l,o.cutSx=u,o.cutSy=p,o.cutEx=g,o.cutEy=h,o.lineHeight=n,o.lineWidths=k,o.offsetY=r,o.paddingLeft=s,o.paddingRight=t,o.letterSpacing=m,o.textIndent=y,o}draw(o,e){const s=this.getPrecision(),t=(e==null?void 0:e.lines)||o.lines,l=(e==null?void 0:e.lineWidths)||o.lineWidths,r=e?e.lines.length*o.lineHeight:o.height;this._canvas.width=Math.min(Math.ceil(o.width+this._settings.textRenderIssueMargin),po),this._canvas.height=Math.min(Math.ceil(r),po),this.setFontProperties(),o.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(o.cutSx||o.cutSy)&&this._context.translate(-o.cutSx,-o.cutSy);let n,f;const c=[];for(let u=0,g=t.length;u<g;u++)n=u===0?o.textIndent:0,f=u*o.lineHeight+o.offsetY,this._settings.verticalAlign=="middle"?f+=(o.lineHeight-o.fontSize)/2:this._settings.verticalAlign=="bottom"&&(f+=o.lineHeight-o.fontSize),this._settings.textAlign==="right"?n+=o.innerWidth-l[u]:this._settings.textAlign==="center"&&(n+=(o.innerWidth-l[u])/2),n+=o.paddingLeft,c.push({text:t[u],x:n,y:f,w:l[u]});if(this._settings.highlight){const u=this._settings.highlightColor,g=this._settings.highlightHeight*s||o.fontSize*1.5,p=this._settings.highlightOffset*s,h=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*s:o.paddingLeft,m=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*s:o.paddingRight;this._context.fillStyle=Mt(u);for(let y=0;y<c.length;y++){const b=c[y];this._context.fillRect(b.x-h,b.y-o.offsetY+p,b.w+m+h,g)}}let a=null;this._settings.shadow&&(a=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Mt(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*s,this._context.shadowOffsetY=this._settings.shadowOffsetY*s,this._context.shadowBlur=this._settings.shadowBlur*s),this._context.fillStyle=Mt(this._settings.textColor);for(let u=0,g=c.length;u<g;u++){const p=c[u];if(o.letterSpacing===0)this._context.fillText(p.text,p.x,p.y);else{const h=p.text.split("");let m=p.x;for(let y=0,b=h.length;y<b;y++)this._context.fillText(h[y],m,p.y),m+=this.measureText(h[y],o.letterSpacing)}}a&&(this._context.shadowColor=a[0],this._context.shadowOffsetX=a[1],this._context.shadowOffsetY=a[2],this._context.shadowBlur=a[3]),(o.cutSx||o.cutSy)&&this._context.translate(o.cutSx,o.cutSy),this.renderInfo=o}wrapWord(o,e,s){const t=this._context.measureText(s).width,l=o.length,r=this._context.measureText(o).width;if(r<=e)return o;let n=Math.floor(e*l/r),f=this._context.measureText(o.substring(0,n)).width+t;if(f>e)for(;n>0&&(f=this._context.measureText(o.substring(0,n)).width+t,f>e);)n-=1;else for(;n<l;)if(f=this._context.measureText(o.substring(0,n)).width+t,f<e)n+=1;else{n-=1;break}return o.substring(0,n)+(e>=t?s:"")}wrapText(o,e,s,t=0){const l=o.split(/\r?\n/g);let r=[];const n=[];for(let f=0;f<l.length;f++){const c=[];let a="",u=e-t;const g=l[f].split(" ");for(let p=0;p<g.length;p++){const h=this.measureText(g[p],s),m=h+this.measureText(" ",s);p===0||m>u?(p>0&&(c.push(a),a=""),a+=g[p],u=e-h-(p===0?t:0)):(u-=m,a+=` ${g[p]}`)}c.push(a),a="",r=r.concat(c),f<l.length-1&&n.push(r.length)}return{l:r,n}}measureText(o,e=0){return e?o.split("").reduce((s,t)=>s+this._context.measureText(t).width+e,0):this._context.measureText(o).width}mergeDefaults(o){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...o}}}const mo=typeof self>"u"?globalThis:self;var Bo;const go=((Bo=mo.document)==null?void 0:Bo.fonts)||mo.fonts;function yi(i){const{fontFamily:o,fontStyle:e,fontWeight:s,fontStretch:t,fontSize:l}=i;return[e,s,t,`${l}px`,o].join(" ")}const xi=Ct(0,0,0,0);class bi extends Go{constructor(e){super(e);d(this,"canvas");d(this,"context");d(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let s=this.canvas.getContext("2d");s||(this.canvas=document.createElement("canvas"),s=this.canvas.getContext("2d")),this.context=s,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,s)=>{e.props.fontFamily=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,s)=>{e.props.fontWeight=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,s)=>{e.props.fontStyle=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,s)=>{e.props.fontStretch=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,s)=>{e.props.fontSize=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,s)=>{e.props.text=s,this.invalidateLayoutCache(e)},textAlign:(e,s)=>{e.props.textAlign=s,this.invalidateLayoutCache(e)},color:(e,s)=>{e.props.color=s,this.invalidateLayoutCache(e)},x:(e,s)=>{e.props.x=s,this.invalidateVisibleWindowCache(e)},y:(e,s)=>{e.props.y=s,this.invalidateVisibleWindowCache(e)},contain:(e,s)=>{e.props.contain=s,this.invalidateLayoutCache(e)},width:(e,s)=>{e.props.width=s,this.invalidateLayoutCache(e)},height:(e,s)=>{e.props.height=s,this.invalidateLayoutCache(e)},offsetY:(e,s)=>{e.props.offsetY=s,this.invalidateLayoutCache(e)},scrollY:(e,s)=>{e.props.scrollY=s},letterSpacing:(e,s)=>{e.props.letterSpacing=s,this.invalidateLayoutCache(e)},lineHeight:(e,s)=>{e.props.lineHeight=s,this.invalidateLayoutCache(e)},maxLines:(e,s)=>{e.props.maxLines=s,this.invalidateLayoutCache(e)},textBaseline:(e,s)=>{e.props.textBaseline=s,this.invalidateLayoutCache(e)},verticalAlign:(e,s)=>{e.props.verticalAlign=s,this.invalidateLayoutCache(e)},overflowSuffix:(e,s)=>{e.props.overflowSuffix=s,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof gs}addFontFace(e){go.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new ke,canvasPages:void 0,lightning2TextRenderer:new gi(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const h=yi(e.props);if(e.fontInfo={cssString:h,loaded:!1},!e.fontInfo.loaded){go.load(h).then(this.onFontLoaded.bind(this,e,h)).catch(this.onFontLoadError.bind(this,e,h));return}}if(!e.fontInfo.loaded)return;e.renderInfo||(e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:be(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight,maxLines:e.props.maxLines,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0);const{x:s,y:t,width:l,height:r,scrollY:n,contain:f}=e.props,{visibleWindow:c}=e;let{renderWindow:a,canvasPages:u}=e;if(!c.valid){const h=Ct(s,t,f!=="none"?s+l:1/0,f==="both"?t+r:1/0,xi);Ms(this.rendererBounds,h,c),c.valid=!0}const g=c.y2-c.y1,p=Math.ceil(g/e.renderInfo.lineHeight);if(g===0){u=void 0,a=void 0,this.setStatus(e,"loaded");return}else if(a&&u){const h=s+a.x1,m=t-n+a.y1,y=s+a.x2,b=t-n+a.y2;if(h<=c.x1&&y>=c.x2&&m<=c.y1&&b>=c.y2){this.setStatus(e,"loaded");return}b<c.y2?(a.y1+=p*e.renderInfo.lineHeight,a.y2+=p*e.renderInfo.lineHeight,u.push(u.shift()),u[2].lineNumStart=u[1].lineNumStart+p,u[2].lineNumEnd=u[2].lineNumStart+p,u[2].valid=!1):m>c.y1&&(a.y1-=p*e.renderInfo.lineHeight,a.y2-=p*e.renderInfo.lineHeight,u.unshift(u.pop()),u[0].lineNumStart=u[1].lineNumStart-p,u[0].lineNumEnd=u[0].lineNumStart+p,u[0].valid=!1)}else{const h=e.renderInfo.lineHeight*p,m=Math.ceil(n/h),y=m*p,b=y-p,I=y+p;u=[{texture:u==null?void 0:u[0].texture,lineNumStart:b,lineNumEnd:b+p,valid:!1},{texture:u==null?void 0:u[1].texture,lineNumStart:y,lineNumEnd:y+p,valid:!1},{texture:u==null?void 0:u[2].texture,lineNumStart:I,lineNumEnd:I+p,valid:!1}],e.canvasPages=u;const w=m*h;a={x1:0,y1:w-h,x2:l,y2:w+h*2}}e.renderWindow=a,performance.now();for(const h of u)if(!h.valid){if(h.lineNumStart<0){h.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),h.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(h.lineNumStart,h.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(h.lineNumStart,h.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||(h.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),h.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,s,t,l){var T,A,B,E,L,F,U,S,v,M,D,P;const{stage:r}=this,{canvasPages:n,textW:f=0,textH:c=0,renderWindow:a}=e;if(!n||!a)return;const{x:u,y:g,scrollY:p,contain:h,width:m,height:y}=e.props,b={x:u,y:g,width:h!=="none"?m:f,height:h==="both"?y:c};oo({x:0,y:0,width:r.options.appWidth,height:r.options.appHeight},b);const w=(a.y2-a.y1)/3,{zIndex:_,color:R}=e.props,k=l*As(R),x=Je(4294967295,k);n[0].valid&&this.stage.renderer.addQuad({alpha:k,clippingRect:t,colorBl:x,colorBr:x,colorTl:x,colorTr:x,width:((A=(T=n[0].texture)==null?void 0:T.dimensions)==null?void 0:A.width)||0,height:((E=(B=n[0].texture)==null?void 0:B.dimensions)==null?void 0:E.height)||0,texture:n[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:_,tx:s.tx,ty:s.ty-p+a.y1,ta:s.ta,tb:s.tb,tc:s.tc,td:s.td}),n[1].valid&&this.stage.renderer.addQuad({alpha:k,clippingRect:t,colorBl:x,colorBr:x,colorTl:x,colorTr:x,width:((F=(L=n[1].texture)==null?void 0:L.dimensions)==null?void 0:F.width)||0,height:((S=(U=n[1].texture)==null?void 0:U.dimensions)==null?void 0:S.height)||0,texture:n[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:_,tx:s.tx,ty:s.ty-p+a.y1+w,ta:s.ta,tb:s.tb,tc:s.tc,td:s.td}),n[2].valid&&this.stage.renderer.addQuad({alpha:k,clippingRect:t,colorBl:x,colorBr:x,colorTl:x,colorTr:x,width:((M=(v=n[2].texture)==null?void 0:v.dimensions)==null?void 0:M.width)||0,height:((P=(D=n[2].texture)==null?void 0:D.dimensions)==null?void 0:P.height)||0,texture:n[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:_,tx:s.tx,ty:s.ty-p+a.y1+w+w,ta:s.ta,tb:s.tb,tc:s.tc,td:s.td})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,s){var t;s!==((t=e.fontInfo)==null?void 0:t.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,s,t){var l;s!==((l=e.fontInfo)==null?void 0:l.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,t),this.scheduleUpdateState(e))}}const Si=2e6;class wi extends ke{constructor(e){super();d(this,"options");d(this,"animationManager");d(this,"txManager");d(this,"fontManager");d(this,"textRenderers");d(this,"shManager");d(this,"renderer");d(this,"root");d(this,"deltaTime",0);d(this,"lastFrameTime",0);d(this,"currentFrameTime",0);d(this,"fpsNumFrames",0);d(this,"fpsElapsedTime",0);d(this,"renderRequested",!1);d(this,"contextSpy",null);this.options=e;const{canvas:s,clearColor:t,rootId:l,debug:r,appWidth:n,appHeight:f,enableContextSpy:c,numImageWorkers:a}=e;this.txManager=new ni(a),this.shManager=new Zs,this.animationManager=new si,this.contextSpy=c?new Qs:null,r!=null&&r.monitorTextureCache&&setInterval(()=>{this.txManager;const g=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",g.idCacheSize),console.log("Texture Key Cache Size: ",g.keyCacheSize)},1e3),this.renderer=new oi({stage:this,canvas:s,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:t??4278190080,bufferMemory:Si,txManager:this.txManager,shManager:this.shManager,contextSpy:this.contextSpy}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new bi(this),sdf:new mi(this)},this.fontManager=new Wo(this.textRenderers);const u=new so(this,{id:l,x:0,y:0,width:n,height:f,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.root=u,Fs(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=Us(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){var l,r;const{renderer:e,renderRequested:s}=this;this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),e==null||e.reset(),this.addQuads(this.root),e==null||e.render(),s&&(this.renderRequested=!1);const{fpsUpdateInterval:t}=this.options;if(t&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=t)){const n=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:n,contextSpyData:((l=this.contextSpy)==null?void 0:l.getData())??null}),(r=this.contextSpy)==null||r.reset()}}addQuads(e){this.renderer&&e.globalTransform,e.isRenderable&&e.renderQuads(this.renderer);for(let s=0;s<e.children.length;s++){const t=e.children[s];t&&(t==null?void 0:t.worldAlpha)!==0&&this.addQuads(t)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,s=null){let t=s,l=!1;if(t){const n=this.textRenderers[t];n?n.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${t}' for font`,e),t=null,l=!0):(console.warn(`Text renderer override '${t}' not found.`),t=null,l=!0)}if(!t){for(const[n,f]of Object.entries(this.textRenderers))if(n!=="canvas"&&f.canRenderFont(e)){t=n;break}t||(t="canvas")}return l&&console.warn(`Falling back to text renderer ${String(t)}`),this.textRenderers[t]}}class Ci extends so{constructor(e,s){super(e,s);d(this,"textRenderer");d(this,"trState");d(this,"_textRendererOverride",null);d(this,"onTextLoaded",()=>{const{contain:e}=this,s=this.trState.props.width,t=this.trState.props.height,l=this.trState.textW||0,r=this.trState.textH||0;e==="both"?(this.props.width=s,this.props.height=t):e==="width"?(this.props.width=s,this.props.height=r):e==="none"&&(this.props.width=l,this.props.height=r),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});d(this,"onTextFailed",(e,s)=>{this.emit("failed",{type:"text",error:s})});this._textRendererOverride=s.textRendererOverride;const{resolvedTextRenderer:t,textRendererState:l}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:s.width,height:s.height,textAlign:s.textAlign,color:s.color,zIndex:s.zIndex,contain:s.contain,scrollable:s.scrollable,scrollY:s.scrollY,offsetY:s.offsetY,letterSpacing:s.letterSpacing,debug:s.debug,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStretch:s.fontStretch,fontStyle:s.fontStyle,fontWeight:s.fontWeight,text:s.text,lineHeight:s.lineHeight,maxLines:s.maxLines,textBaseline:s.textBaseline,verticalAlign:s.verticalAlign,overflowSuffix:s.overflowSuffix},void 0);this.textRenderer=t,this.trState=l}get width(){return this.trState.props.width}set width(e){this.textRenderer.set.width(this.trState,e)}get height(){return this.trState.props.height}set height(e){this.textRenderer.set.height(this.trState,e)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e),this.checkIsRenderable()}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e;const{resolvedTextRenderer:s,textRendererState:t}=this.resolveTextRendererAndState(this.trState.props,this.trState);this.textRenderer=s,this.trState=t}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,s){super.update(e,s),this.globalTransform,this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkIsRenderable(){return super.checkIsRenderable()?!0:this.trState.props.text!==""?this.isRenderable=!0:this.isRenderable=!1}renderQuads(e){this.globalTransform,this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}resolveTextRendererAndState(e,s){const t=this.stage.resolveTextRenderer(e,this._textRendererOverride),l=t.createState(e);return s&&["loading","loaded","failed"].forEach(n=>{s.emitter.off(n)}),l.emitter.on("loaded",this.onTextLoaded),l.emitter.on("failed",this.onTextFailed),t.scheduleUpdateState(l),{resolvedTextRenderer:t,textRendererState:l}}}class Ti extends Yt{constructor(o,e,s){super(o,e,s,new Ci(s,{id:io(),x:o.x,y:o.y,width:o.width,height:o.height,alpha:o.alpha,clipping:o.clipping,color:o.color,colorTop:o.colorTop,colorBottom:o.colorBottom,colorLeft:o.colorLeft,colorRight:o.colorRight,colorTl:o.colorTl,colorTr:o.colorTr,colorBl:o.colorBl,colorBr:o.colorBr,zIndex:o.zIndex,zIndexLocked:o.zIndexLocked,scaleX:o.scaleX,scaleY:o.scaleY,mountX:o.mountX,mountY:o.mountY,mount:o.mount,pivot:o.pivot,pivotX:o.pivotX,pivotY:o.pivotY,rotation:o.rotation,text:o.text,fontSize:o.fontSize,fontFamily:o.fontFamily,fontWeight:o.fontWeight,fontStretch:o.fontStretch,fontStyle:o.fontStyle,contain:o.contain,scrollable:o.scrollable,letterSpacing:o.letterSpacing,textAlign:o.textAlign,scrollY:o.scrollY,offsetY:o.offsetY,textRendererOverride:o.textRendererOverride,lineHeight:o.lineHeight,maxLines:o.maxLines,textBaseline:o.textBaseline,verticalAlign:o.verticalAlign,overflowSuffix:o.overflowSuffix,debug:o.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(o){this.coreNode.text=o}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(o){this.coreNode.textRendererOverride=o}get fontSize(){return this.coreNode.fontSize}set fontSize(o){this.coreNode.fontSize=o}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(o){this.coreNode.fontFamily=o}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(o){this.coreNode.fontWeight=o}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(o){this.coreNode.fontStretch=o}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(o){this.coreNode.fontStyle=o}get textAlign(){return this.coreNode.textAlign}set textAlign(o){this.coreNode.textAlign=o}get contain(){return this.coreNode.contain}set contain(o){this.coreNode.contain=o}get scrollable(){return this.coreNode.scrollable}set scrollable(o){this.coreNode.scrollable=o}get scrollY(){return this.coreNode.scrollY}set scrollY(o){this.coreNode.scrollY=o}get offsetY(){return this.coreNode.offsetY}set offsetY(o){this.coreNode.offsetY=o}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(o){this.coreNode.letterSpacing=o}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(o){o&&(this.coreNode.lineHeight=o)}get maxLines(){return this.coreNode.maxLines}set maxLines(o){o&&(this.coreNode.maxLines=o)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(o){o&&(this.coreNode.textBaseline=o)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(o){o&&(this.coreNode.verticalAlign=o)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(o){o&&(this.coreNode.overflowSuffix=o)}get debug(){return this.coreNode.debug}set debug(o){this.coreNode.debug=o}}const vi="modulepreload",Ii=function(i){return"/"+i},yo={},qo=function(o,e,s){if(!e||e.length===0)return o();const t=document.getElementsByTagName("link");return Promise.all(e.map(l=>{if(l=Ii(l),l in yo)return;yo[l]=!0;const r=l.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(!!s)for(let a=t.length-1;a>=0;a--){const u=t[a];if(u.href===l&&(!r||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${n}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":vi,r||(c.as="script",c.crossOrigin=""),c.href=l,document.head.appendChild(c),r)return new Promise((a,u)=>{c.addEventListener("load",a),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>o()).catch(l=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=l,window.dispatchEvent(r),!r.defaultPrevented)throw l})};function _i(i){return i.prototype instanceof ys}async function Ri(i,o){let e;try{console.log("Loading core extension",i),e=await qo(()=>import(i),[])}catch(t){console.error(`The core extension module at '${i}' could not be loaded.`),console.error(t);return}if(!e.default){console.error(`The core extension module at '${i}' does not have a default export.`);return}const s=e.default;if(_i(s)){const t=new s;try{await t.run(o)}catch(l){console.error(`The core extension at '${i}' threw an error.`),console.error(l)}}else console.error(`The core extension at '${i}' does not extend CoreExtension.`)}class Ei{constructor(){d(this,"root",null);d(this,"stage",null);d(this,"rendererMain",null)}async init(o,e,s){this.stage=new wi({rootId:io(),appWidth:e.appWidth,appHeight:e.appHeight,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:s,fpsUpdateInterval:e.fpsUpdateInterval,enableContextSpy:e.enableContextSpy,numImageWorkers:e.numImageWorkers,debug:{monitorTextureCache:!1}}),this.rendererMain=o,this.stage.root;const t=new Yt(o.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=t,t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),e.coreExtensionModule&&await Ri(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(l,r)=>{this.onFpsUpdate(r)})}createNode(o){this.rendererMain,this.stage;const e=new Yt(o,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(o){this.rendererMain,this.stage;const e=new Ti(o,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(o){o.destroy()}releaseTexture(o){const{stage:e}=this;e.txManager.removeTextureIdFromCache(o)}getRootNode(){return this.root,this.root}onCreateNode(o){throw new Error("Method not implemented.")}onBeforeDestroyNode(o){throw new Error("Method not implemented.")}onFpsUpdate(o){throw new Error("Method not implemented.")}}const dt=()=>{},Nt=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Ho=i=>{const o=Ve.get("debugLevel"),e={};return Object.defineProperty(e,"info",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${i} %c ${Nt()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||dt}}),Object.defineProperty(e,"warn",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${i} %c ${Nt()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||dt}}),Object.defineProperty(e,"error",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${i} %c ${Nt()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||dt}}),Object.defineProperty(e,"debug",{get(){return(o>=2||Array.isArray(o)&&o.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${i} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||dt}}),e};let ee;const ki=()=>{ee=Ho("Blits")},xo={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2};let Ce;const Ai=(i,o,e)=>{Ve.set(e),ki();const s=new Ei;Ce=new _s({appWidth:e.w||1920,appHeight:e.h||1080,coreExtensionModule:e.fontLoader,fpsUpdateInterval:e.fpsInterval||1e3,deviceLogicalPixelRatio:e.pixelRatio||xo[e.screenResolution]||xo[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in e?e.webWorkersLimit:window.navigator.hardwareConcurrency||2},o,s);const t=()=>{let l=i();l.quit=()=>{ee.info("Closing App"),l.destroy(),l=null,Ce=null}};Ce.init().then(()=>t())},bo={aliceblue:4042850303,antiquewhite:4209760255,aqua:4294967040,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,transparent:0,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Pt={normalize(i=""){if(i=i.toString(),i.startsWith("0x"))return i;const o=/rgba?\((.+)\)/gi,e=/hsla?\((.+)\)/gi;if(o.test(i)){const s=new RegExp(o).exec(i);if(s[1])return i=s[1].split(",").map((t,l)=>(l==3&&(t=Math.min(Math.max(Math.round(t*255),0),255)),parseInt(t).toString(16).padStart(2,"0"))).join(""),i.padEnd(8,"f").padStart(10,"0x")}else{if(e.test(i))return ee.warn("HSL(A) color format is not supported yet"),4294967295;if(i in bo)return bo[i];i.startsWith("#")&&(i=i.substring(1))}return i.length===3&&(i=i.split("").map(s=>s+s).join("")),i.padEnd(8,"f").padStart(10,"0x")}},Mi=i=>typeof i=="object"&&"transition"in i,ut=i=>typeof i=="string"&&i.startsWith("{")&&i.endsWith("}"),ht=i=>JSON.parse(i.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),ze=function(i,o){return typeof i=="string"&&i.endsWith("%")?this.element.node._parent[o]*(parseFloat(i)/100):i},jt=i=>{if(typeof i=="object"&&i.constructor===Object){if("value"in i)return i.value;if("transition"in i)return jt(i.transition)}return i};let So=!1;const Vo={set parent(i){this._props.parent=i==="root"?Ce.root:i.node,this._set.add("parent")},set rotation(i){this._props.rotation=i*(Math.PI/180),this._set.add("rotation")},set w(i){this._props.width=ze.call(this,i,"width"),this._set.add("width")},set width(i){this._props.width=ze.call(this,i,"width"),this._set.add("width")},set h(i){this._props.height=ze.call(this,i,"height"),this._set.add("height")},set height(i){this._props.height=ze.call(this,i,"height"),this._set.add("height")},set x(i){this._props.x=ze.call(this,i,"width"),this._set.add("x")},set y(i){this._props.y=ze.call(this,i,"height"),this._set.add("y")},set z(i){this._props.zIndex=i,this._set.add("zIndex")},set zIndex(i){this._props.zIndex=i,this._set.add("zIndex")},set color(i){if(typeof i=="object"||ut(i)&&(i=ht(i))){const o={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};this._props.color=0,Object.entries(i).forEach(e=>{this._props[o[e[0]]]=Pt.normalize(e[1]),this._set.add(o[e[0]])})}else this._props.color=Pt.normalize(i);this._set.add("color")},set src(i){this._props.src=i,this._set.has("color")||(this._props.color=4294967295),this._set.add("src")},set texture(i){this._props.texture=i,this._set.has("color")||(this._props.color=4294967295),this._set.add("texture")},set mount(i){typeof i=="object"||ut(i)&&(i=ht(i))?("x"in i&&(this._props.mountX=i.x,this._set.add("mountX")),"y"in i&&(this._props.mountY=i.y,this._set.add("mountY"))):(this._props.mountX=this._props.mountY=i,this._set.add("mountX"),this._set.add("mountY"))},set pivot(i){typeof i=="object"||ut(i)&&(i=ht(i))?("x"in i&&(this._set.add("pivotX"),this._props.pivotX=i.x),"y"in i&&(this._set.add("pivotY"),this._props.pivotY=i.y)):(this._props.pivotX=this._props.pivotY=i,this._set.add("pivotX"),this._set.add("pivotY"))},set scale(i){typeof i=="object"||ut(i)&&(i=ht(i))?("x"in i&&(this._props.scaleX=i.x),"y"in i&&(this._props.scaleY=i.y)):this._props.scale=i,this._set.add("scale")},set show(i){this._props.alpha=i?1:0},set alpha(i){this._props.alpha=i,this._set.add("alpha")},set text(i){this._props.text=i!==void 0?i.toString():""},set effects(i){this._props.shader=Ce.createShader("DynamicShader",{effects:i.map(o=>(o.props&&o.props.color&&(o.props.color=Pt.normalize(o.props.color)),o))}),this._set.add("effects")},set fontFamily(i){this._props.fontFamily=i},set fontSize(i){this._props.fontSize=i},set wordWrap(i){this._props.width=i},set contain(i){this._props.contain=i},set maxLines(i){this.height=i*this.element.node.lineHeight},set overflowSuffix(i){this._props.overflowSuffix=i===!1?" ":i===!0?void 0:i},set letterSpacing(i){this._props.letterSpacing=i},set lineHeight(i){this._props.lineHeight=i},set textAlign(i){this._props.textAlign=i}},Bi={defaults:{},populate(i){const o={...this.defaults,...this.config,...i};this.initData=i,o[C.isSlot]&&(this[C.isSlot]=!0),this.props.element=this;for(const[e,s]of Object.entries(o)){const t=Object.getOwnPropertyDescriptor(Vo,e);t&&t.set&&(this.props[e]=jt(s))}this.props._set.has("color")||(this.props._props.color=this.props._set.has("src")||this.props._set.has("texture")?4294967295:0),So||(this.props._props.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",So=!0),this.node=o.__textnode?Ce.createTextNode(this.props._props):Ce.createNode(this.props._props),o["@loaded"]&&this.node.on("loaded",(e,{type:s,dimensions:t})=>{o["@loaded"]({w:t.width,h:t.height,type:s},this)}),o["@error"]&&this.node.on("failed",(e,s)=>{o["@error"](s,this)})},set(i,o){const e=new Set(this.props._set);this.props._props={},this.props[i]=jt(o);for(const[s,t]of Object.entries(this.props._props)){if(Mi(o)&&e.has(s))return this.animate(s,t,o.transition);this.node[s]=t}},animate(i,o,e){if(this.node[i]===o)return Promise.resolve();this.scheduledTransitions[i]&&this.scheduledTransitions[i].f.state==="running"&&(this.scheduledTransitions[i].f.pause(),this.node[i]=this.scheduledTransitions[i].v);const s={};s[i]=o;const t=this.node.animate(s,{duration:typeof e=="object"&&"duration"in e?e.duration:300,easing:typeof e=="object"&&"function"in e?e.function:"ease"});return new Promise(l=>{this.scheduledTransitions[i]={v:s[i],f:t,timeout:setTimeout(()=>{e.start&&typeof e.start=="function"&&e.start.call(this.component,this,i,s[i]);try{t.start().waitUntilStopped().then(()=>delete this.scheduledTransitions[i]).then(()=>{e.end&&typeof e.end=="function"&&e.end.call(this.component,this,i,this.node[i])}).then(l)}catch(r){ee.error(r)}},e.delay||0)}})},delete(){ee.debug("Deleting  Node",this.nodeId),Object.values(this.scheduledTransitions).forEach(i=>{clearTimeout(i.timeout)}),this.node.parent=null},get nodeId(){return this.node&&this.node.id},get ref(){return this.initData.ref||null}},jo=(i,o)=>Object.assign(Object.create(Bi),{props:Object.assign(Object.create(Vo),{_props:{},_set:new Set}),node:null,scheduledTransitions:{},initData:{},config:i,component:o}),wo={};let Li=0;const Ni=i=>`BlitsComponent::${i}_${wo[i]=(wo[i]||0)+1}`,Pi=()=>++Li,Ee={},zi=(i,o,e)=>{Ee[o]&&Ee[o][i]&&Ee[o][i].apply(e)},Fi=(i,o,e)=>{const s=C[i];Ee[o]&&Ee[o][s]&&Ee[o][s].apply(e)},Ui=(i={},o)=>{Ee[o]={},[...Object.keys(i),...Object.getOwnPropertySymbols(i)].forEach(s=>{typeof i[s]=="function"&&(Ee[o][s]=i[s])})};let it=null;const Kt=new WeakMap,Ko=(i,o)=>{if(it){let e=Kt.get(i);e||(e=new Map,Kt.set(i,e));let s=e.get(o);s||(s=new Set,e.set(o,s)),s.add(it)}},at=(i,o,e=!1)=>{const s=Kt.get(i);if(!s)return;const t=s.get(o);t&&t.forEach(l=>{l(e)})},Co=i=>{it=i,it(),it=null},Di=["constructor","includes","indexOf","lastIndexOf","push","pop","shift","splice","unshift","sort","reverse"],zt=["push","pop","shift","unshift","splice","sort","reverse"],To=new WeakMap,Zt=i=>{const o=To.get(i);if(o)return o;const e={get(t,l,r){return Array.isArray(t)&&Di.includes(l)?Reflect.get(t,l,r):(Ko(t,l),t[l]!==null&&typeof t[l]=="object"?Zt(t[l]):Reflect.get(t,l,r))},set(t,l,r,n){const f=t[l],c=Reflect.set(t,l,r,n);return typeof c=="object"&&Zt(t[l]),(l==="length"||c&&f!==r)&&at(t,l),c}},s=new Proxy(i,e);return To.set(i,s),s},Zo=i=>(Object.keys(i).forEach(o=>{let e=i[o];if(i[o]!==null&&typeof i[o]=="object"){if(Object.getPrototypeOf(i[o])===Object.prototype)return Zo(i[o]);if(Array.isArray(i[o]))for(let s=0;s<zt.length-1;s++)i[o][zt[s]]=function(t){Array.prototype[zt[s]].call(this,t),at(i,o)}}Object.defineProperty(i,o,{enumerable:!0,configurable:!0,get(){return Ko(i,o),e},set(s){e!==s&&(e=s,at(i,o))}})}),i),vo=(i,o="Proxy")=>o==="defineProperty"?Zo(i):Zt(i),Oi={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},_e=window.speechSynthesis,$i=()=>(window.navigator||{}).userAgent||"",Io=()=>/android/i.test($i());let Qo=!1,vt=null;const no=()=>vt&&clearTimeout(vt),Qt=i=>{if(!i||vt)return no();_e.pause(),_e.resume(),vt=setTimeout(()=>{Qt(i)},5e3)},We={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},Xi=()=>{We.voice=_e.getVoices()[0],Qo=!0},Yi=(i,o)=>{const e=new SpeechSynthesisUtterance(o.value);e.lang=o.lang||We.lang,e.pitch=o.pitch||We.pitch,e.rate=o.rate||We.rate,e.voice=o.voice||We.voice,e.volume=o.volume||We.volume,e.onstart=()=>{Io()||Qt(e),i.onstart()},e.onresume=()=>{Io()||Qt(e),i.onresume()},e.onpause=()=>{i.onpause()},e.onend=()=>{i.onend()},e.onerror=()=>{no(),i.onerror()},_e.speak(e)},St={speak(i){Qo||Xi(),this.cancel(),Yi(this,i)},resume(){_e.resume()},pause(){_e.pause()},cancel(){_e.cancel(),no()},getVoices(){return _e.getVoices()},onend(){},onerror(){},onstart(){},onresume(){},onpause(){}};let _o;const ro=(i,o="off")=>{clearTimeout(_o),St.cancel(),o==="assertive"?St.speak({value:i}):_o=setTimeout(()=>{St.speak({value:i})},400)},Wi=i=>ro(i,"polite"),Gi=i=>ro(i,"assertive"),qi=()=>{St.cancel()},Jo={speak:ro,polite:Wi,assertive:Gi,stop:qi};let lo,It=!1;const es=new WeakMap,ts=[];let os={},Jt=!1,ss;const Hi=()=>(document.location.hash||"/").replace(/^#/,""),Vi=(i,o=[])=>{const e=o.filter(s=>s.path===i).pop();return e&&(e.options={...e.options,...os},lo=e),e},ji=async function(){if(It=!0,this.parent[C.routes]){const i=lo,o=Hi(),e=Vi(o,this.parent[C.routes]);if(e){Jt===!1&&i&&i.options.inHistory===!0&&ts.push(i),"transition"in e||(e.transition=Oi),typeof e.transition=="function"&&(e.transition=e.transition(i,e));let s,{view:t,focus:l}=es.get(e)||{};if(t?s=t[C.wrapper]:(s=jo({parent:this[C.children][0]}),s.populate({}),s.set("w","100%"),s.set("h","100%"),t=await e.component(this[C.props],s,this),t[Symbol.toStringTag]==="Module"&&(t.default&&typeof t.default=="function"?t=t.default(this[C.props],s,this):ee.error("Dynamic import doesn't have a default export or default is not a function")),typeof t=="function"&&(t=t(this[C.props],s,this))),this[C.children].push(t),ss=Re.get(),l?Re.set(l):Re.set(t),e.transition.before)if(Array.isArray(e.transition.before))for(let n=0;n<e.transition.before.length;n++)s.set(e.transition.before[n].prop,e.transition.before[n].value);else s.set(e.transition.before.prop,e.transition.before.value);let r=!1;if(i){r=!0;const n=this[C.children].splice(1,1).pop();n&&Ki(i,n,e.transition.out)}if(e.transition.in)if(Array.isArray(e.transition.in))for(let n=0;n<e.transition.in.length;n++)n===e.transition.length-1?await He(s,e.transition.in[n],r):He(s,e.transition.in[n],r);else await He(s,e.transition.in,r);e.announce&&(typeof e.announce=="string"&&(e.announce={message:e.announce}),Jo.speak(e.announce.message,e.announce.politeness)),this.activeView=this[C.children][this[C.children].length-1]}else ee.error(`Route ${o} not found`)}Jt=!1,It=!1},Ki=async(i,o,e)=>{if(e)if(Array.isArray(e))for(let s=0;s<e.length;s++)s===e.length-1?await He(o[C.wrapper],e[s]):He(o[C.wrapper],e[s]);else await He(o[C.wrapper],e);if(i.options&&i.options.keepAlive===!0)es.set(i,{view:o,focus:ss});else{for(let s=0;s<o[C.children].length-1;s++)o[C.children][s]&&o[C.children][s].destroy&&(o[C.children][s].destroy(),o[C.children][s]=null);o.destroy(),o=null}},He=(i,o,e=!0)=>e?i.animate(o.prop,o.value,o):i.set(o.prop,o.value),fo=(i,o={})=>{os=o,window.location.hash=`#${i}`},is=()=>{const i=ts.pop();return i?(Jt=!0,fo(i.path),!0):!1},Ft={navigate:ji,to:fo,back:is};let Pe=null,pt=[],Ro;const Re={_hold:!1,set hold(i){this._hold=i},get hold(){return this._hold},get(){return Pe},set(i,o){clearTimeout(Ro),Pe&&Pe.unfocus(),pt.reverse().forEach(e=>e.unfocus()),i!==Pe&&(Ro=setTimeout(()=>{Pe=i,Pe.lifecycle.state="focus",o instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",o)):pt=[]},this.hold?50:0))},input(i,o){if(It===!0)return;pt=ns([Pe],i);const e=pt.shift();e&&(e[C.inputEvents][i]?e[C.inputEvents][i].call(e,o):e[C.inputEvents].any&&e[C.inputEvents].any.call(e,o))}},ns=(i,o)=>i[0][C.inputEvents]&&(typeof i[0][C.inputEvents][o]=="function"||typeof i[0][C.inputEvents].any=="function")?i:i[0].parent?(i.unshift(i[0].parent),ns(i,o)):[],Zi=()=>Ae("Image",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("imageSource",o.imageSource)}],context:{}},props:["src"],computed:{imageSource(){return/^(?:https?:)?\/\//i.test(this.src)?this.src:`${window.location.protocol}//${window.location.host}/${this.src}`}}}),Qi=()=>Ae("Circle",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("color",o.color)},function(o,e,s){e[0].set("w",o.size)},function(o,e,s){e[0].set("h",o.size)},function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:o.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let Ut;const Ji=()=>Ae("RouterView",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=o.node.width*(100/100),l.height=o.node.height*(100/100),t[0].nodeId||t[0].populate(l),t},effects:[],context:{}},state(){return{activeView:null}},hooks:{ready(){Ut=()=>Ft.navigate.apply(this),Ft.navigate.apply(this),window.addEventListener("hashchange",Ut)},destroy(){window.removeEventListener("hashchange",Ut,!1)},focus(){this.activeView&&this.activeView.focus()}},input:{back(i){Ft.back()||this.parent.focus(i)}}}),en=()=>Ae("Sprite",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=e.w,l.h=e.h,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("texture",o.texture)}],context:{}},props:["image","map","frame","w","h"],state(){return{spriteTexture:!1}},computed:{texture(){const i="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture&&i)return this[C.renderer].createTexture("SubTexture",{texture:this.spriteTexture,x:i.x,y:i.y,width:i.w,height:i.h})}},hooks:{ready(){this.spriteTexture=this[C.renderer].createTexture("ImageTexture",{src:this.image})}}}),tn=()=>Ae("Text",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.__textnode=!0,l.fontFamily=e.font,l.letterSpacing=e.letterspacing,l.lineHeight=e._lineheight,l.stretch=e.stretch,l.contain=e._contain,l["@loaded"]=e["@loaded"]&&e["@loaded"].bind(e),l["@error"]=e["@error"]&&e["@error"].bind(e),t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("text",o.content)},function(o,e,s){e[0].set("fontSize",o.size)},function(o,e,s){e[0].set("color",o.color)},function(o,e,s){e[0].set("style",o.style)},function(o,e,s){e[0].set("weight",o.weight)},function(o,e,s){e[0].set("wordWrap",o.wordwrap)},function(o,e,s){e[0].set("maxLines",o.maxlines)},function(o,e,s){e[0].set("textAlign",o.align)},function(o,e,s){e[0].set("overflowSuffix",o.textoverflow)}],context:{}},props:["content",{key:"font",default:Ve.get("defaultFont","lato")},{key:"size",cast:Number,default:32},"style","color","weight","letterspacing","stretch","align","wordwrap","maxlines","lineheight","contain","@loaded","@error","textoverflow"],computed:{_contain(){return this.contain||(this.wordwrap&&this.maxlines?"both":this.wordwrap?"width":"none")},_lineheight(){return this.lineheight!==void 0?this.lineheight:this.size}}}),rs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==";console.log(rs);const on=()=>Ae("FPScounter",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=15,r.x=20,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};t[2].nodeId||t[2].populate(n);const f=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[2],t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};if(c.image=e.image,c.w=43,c.h=25,c.map=e.sprite,c.frame="fps",typeof f<"u")for(let j in f.config.props)delete c[f.config.props[j]];t[3].nodeId||t[3].populate(c),o=t[3];const a={};a.image=e.image,a.w=43,a.h=25,a.map=e.sprite,a.frame="fps",t[4]||(t[4]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:a},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]),o=t[2],t[5]||(t[5]=this.element({parent:o||"root"},e));const u={};u.x=58,u.y=2,t[5].nodeId||t[5].populate(u);const g=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const p={};if(p.image=e.image,p.x=0,p.h=20,p.w=20,p.map=e.sprite,typeof g<"u")for(let j in g.config.props)delete p[g.config.props[j]];t[6].nodeId||t[6].populate(p),o=t[6];const h={};h.image=e.image,h.x=0,h.h=20,h.w=20,h.map=e.sprite,h.frame=e.fps[0],t[7]||(t[7]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:h},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]);const m=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[5],t[8]||(t[8]=this.element({parent:o||"root"},e));const y={};if(y.image=e.image,y.x=18,y.h=20,y.w=20,y.map=e.sprite,typeof m<"u")for(let j in m.config.props)delete y[m.config.props[j]];t[8].nodeId||t[8].populate(y),o=t[8];const b={};b.image=e.image,b.x=18,b.h=20,b.w=20,b.map=e.sprite,b.frame=e.fps[1],t[9]||(t[9]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:b},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]);const I=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[5],t[10]||(t[10]=this.element({parent:o||"root"},e));const w={};if(w.image=e.image,w.x=36,w.h=20,w.w=20,w.map=e.sprite,typeof I<"u")for(let j in I.config.props)delete w[I.config.props[j]];t[10].nodeId||t[10].populate(w),o=t[10];const _={};_.image=e.image,_.x=36,_.h=20,_.w=20,_.map=e.sprite,_.frame=e.fps[2],t[11]||(t[11]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:_},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]),o=t[1],t[12]||(t[12]=this.element({parent:o||"root"},e));const R={};R.x=150,t[12].nodeId||t[12].populate(R);const k=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[12],t[13]||(t[13]=this.element({parent:o||"root"},e));const x={};if(x.image=e.image,x.y=2,x.w=48,x.h=25,x.map=e.sprite,x.frame="avg",typeof k<"u")for(let j in k.config.props)delete x[k.config.props[j]];t[13].nodeId||t[13].populate(x),o=t[13];const T={};T.image=e.image,T.y=2,T.w=48,T.h=25,T.map=e.sprite,T.frame="avg",t[14]||(t[14]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:T},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]),o=t[12],t[15]||(t[15]=this.element({parent:o||"root"},e));const A={};A.x=63,A.y=2,t[15].nodeId||t[15].populate(A);const B=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const E={};if(E.image=e.image,E.x=0,E.h=20,E.w=20,E.map=e.sprite,typeof B<"u")for(let j in B.config.props)delete E[B.config.props[j]];t[16].nodeId||t[16].populate(E),o=t[16];const L={};L.image=e.image,L.x=0,L.h=20,L.w=20,L.map=e.sprite,L.frame=e.avgFps[0],t[17]||(t[17]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:L},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]);const F=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[15],t[18]||(t[18]=this.element({parent:o||"root"},e));const U={};if(U.image=e.image,U.x=18,U.h=20,U.w=20,U.map=e.sprite,typeof F<"u")for(let j in F.config.props)delete U[F.config.props[j]];t[18].nodeId||t[18].populate(U),o=t[18];const S={};S.image=e.image,S.x=18,S.h=20,S.w=20,S.map=e.sprite,S.frame=e.avgFps[1],t[19]||(t[19]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:S},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]);const v=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[15],t[20]||(t[20]=this.element({parent:o||"root"},e));const M={};if(M.image=e.image,M.x=36,M.h=20,M.w=20,M.map=e.sprite,typeof v<"u")for(let j in v.config.props)delete M[v.config.props[j]];t[20].nodeId||t[20].populate(M),o=t[20];const D={};D.image=e.image,D.x=36,D.h=20,D.w=20,D.map=e.sprite,D.frame=e.avgFps[2],t[21]||(t[21]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:D},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]),o=t[1],t[22]||(t[22]=this.element({parent:o||"root"},e));const P={};P.x=0,P.y=40,t[22].nodeId||t[22].populate(P);const z=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[22],t[23]||(t[23]=this.element({parent:o||"root"},e));const N={};if(N.image=e.image,N.x=-2,N.w=47,N.h=25,N.map=e.sprite,N.frame="min",typeof z<"u")for(let j in z.config.props)delete N[z.config.props[j]];t[23].nodeId||t[23].populate(N),o=t[23];const $={};$.image=e.image,$.x=-2,$.w=47,$.h=25,$.map=e.sprite,$.frame="min",t[24]||(t[24]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:$},t[23],e),t[24][Symbol.for("slots")][0]?(o=t[24][Symbol.for("slots")][0],e=t[24]):o=t[24][Symbol.for("children")][0]),o=t[22],t[25]||(t[25]=this.element({parent:o||"root"},e));const Y={};Y.x=58,Y.y=2,t[25].nodeId||t[25].populate(Y);const H=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[25],t[26]||(t[26]=this.element({parent:o||"root"},e));const X={};if(X.image=e.image,X.x=0,X.h=20,X.w=20,X.map=e.sprite,typeof H<"u")for(let j in H.config.props)delete X[H.config.props[j]];t[26].nodeId||t[26].populate(X),o=t[26];const K={};K.image=e.image,K.x=0,K.h=20,K.w=20,K.map=e.sprite,K.frame=e.minFps[0],t[27]||(t[27]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:K},t[26],e),t[27][Symbol.for("slots")][0]?(o=t[27][Symbol.for("slots")][0],e=t[27]):o=t[27][Symbol.for("children")][0]);const Z=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[25],t[28]||(t[28]=this.element({parent:o||"root"},e));const G={};if(G.image=e.image,G.x=18,G.h=20,G.w=20,G.map=e.sprite,typeof Z<"u")for(let j in Z.config.props)delete G[Z.config.props[j]];t[28].nodeId||t[28].populate(G),o=t[28];const Q={};Q.image=e.image,Q.x=18,Q.h=20,Q.w=20,Q.map=e.sprite,Q.frame=e.minFps[1],t[29]||(t[29]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:Q},t[28],e),t[29][Symbol.for("slots")][0]?(o=t[29][Symbol.for("slots")][0],e=t[29]):o=t[29][Symbol.for("children")][0]);const ne=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[25],t[30]||(t[30]=this.element({parent:o||"root"},e));const J={};if(J.image=e.image,J.x=36,J.h=20,J.w=20,J.map=e.sprite,typeof ne<"u")for(let j in ne.config.props)delete J[ne.config.props[j]];t[30].nodeId||t[30].populate(J),o=t[30];const V={};V.image=e.image,V.x=36,V.h=20,V.w=20,V.map=e.sprite,V.frame=e.minFps[2],t[31]||(t[31]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:V},t[30],e),t[31][Symbol.for("slots")][0]?(o=t[31][Symbol.for("slots")][0],e=t[31]):o=t[31][Symbol.for("children")][0]),o=t[1],t[32]||(t[32]=this.element({parent:o||"root"},e));const he={};he.x=150,he.y=40,t[32].nodeId||t[32].populate(he);const ae=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[32],t[33]||(t[33]=this.element({parent:o||"root"},e));const ue={};if(ue.image=e.image,ue.w=53,ue.h=25,ue.map=e.sprite,ue.frame="max",typeof ae<"u")for(let j in ae.config.props)delete ue[ae.config.props[j]];t[33].nodeId||t[33].populate(ue),o=t[33];const xe={};xe.image=e.image,xe.w=53,xe.h=25,xe.map=e.sprite,xe.frame="max",t[34]||(t[34]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:xe},t[33],e),t[34][Symbol.for("slots")][0]?(o=t[34][Symbol.for("slots")][0],e=t[34]):o=t[34][Symbol.for("children")][0]),o=t[32],t[35]||(t[35]=this.element({parent:o||"root"},e));const ve={};ve.x=63,ve.y=2,t[35].nodeId||t[35].populate(ve);const Ie=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[35],t[36]||(t[36]=this.element({parent:o||"root"},e));const Se={};if(Se.image=e.image,Se.x=0,Se.h=20,Se.w=20,Se.map=e.sprite,typeof Ie<"u")for(let j in Ie.config.props)delete Se[Ie.config.props[j]];t[36].nodeId||t[36].populate(Se),o=t[36];const we={};we.image=e.image,we.x=0,we.h=20,we.w=20,we.map=e.sprite,we.frame=e.maxFps[0],t[37]||(t[37]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:we},t[36],e),t[37][Symbol.for("slots")][0]?(o=t[37][Symbol.for("slots")][0],e=t[37]):o=t[37][Symbol.for("children")][0]);const kt=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[35],t[38]||(t[38]=this.element({parent:o||"root"},e));const Me={};if(Me.image=e.image,Me.x=18,Me.h=20,Me.w=20,Me.map=e.sprite,typeof kt<"u")for(let j in kt.config.props)delete Me[kt.config.props[j]];t[38].nodeId||t[38].populate(Me),o=t[38];const Be={};Be.image=e.image,Be.x=18,Be.h=20,Be.w=20,Be.map=e.sprite,Be.frame=e.maxFps[1],t[39]||(t[39]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:Be},t[38],e),t[39][Symbol.for("slots")][0]?(o=t[39][Symbol.for("slots")][0],e=t[39]):o=t[39][Symbol.for("children")][0]);const At=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[35],t[40]||(t[40]=this.element({parent:o||"root"},e));const Le={};if(Le.image=e.image,Le.x=36,Le.h=20,Le.w=20,Le.map=e.sprite,typeof At<"u")for(let j in At.config.props)delete Le[At.config.props[j]];t[40].nodeId||t[40].populate(Le),o=t[40];const Ne={};return Ne.image=e.image,Ne.x=36,Ne.h=20,Ne.w=20,Ne.map=e.sprite,Ne.frame=e.maxFps[2],t[41]||(t[41]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:Ne},t[40],e),t[41][Symbol.for("slots")][0]?(o=t[41][Symbol.for("slots")][0],e=t[41]):o=t[41][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[6].set("frame",o.fps[0])},function(o,e,s){e[7][Symbol.for("props")].frame=o.fps[0]},function(o,e,s){e[8].set("frame",o.fps[1])},function(o,e,s){e[9][Symbol.for("props")].frame=o.fps[1]},function(o,e,s){e[10].set("frame",o.fps[2])},function(o,e,s){e[11][Symbol.for("props")].frame=o.fps[2]},function(o,e,s){e[16].set("frame",o.avgFps[0])},function(o,e,s){e[17][Symbol.for("props")].frame=o.avgFps[0]},function(o,e,s){e[18].set("frame",o.avgFps[1])},function(o,e,s){e[19][Symbol.for("props")].frame=o.avgFps[1]},function(o,e,s){e[20].set("frame",o.avgFps[2])},function(o,e,s){e[21][Symbol.for("props")].frame=o.avgFps[2]},function(o,e,s){e[26].set("frame",o.minFps[0])},function(o,e,s){e[27][Symbol.for("props")].frame=o.minFps[0]},function(o,e,s){e[28].set("frame",o.minFps[1])},function(o,e,s){e[29][Symbol.for("props")].frame=o.minFps[1]},function(o,e,s){e[30].set("frame",o.minFps[2])},function(o,e,s){e[31][Symbol.for("props")].frame=o.minFps[2]},function(o,e,s){e[36].set("frame",o.maxFps[0])},function(o,e,s){e[37][Symbol.for("props")].frame=o.maxFps[0]},function(o,e,s){e[38].set("frame",o.maxFps[1])},function(o,e,s){e[39][Symbol.for("props")].frame=o.maxFps[1]},function(o,e,s){e[40].set("frame",o.maxFps[2])},function(o,e,s){e[41][Symbol.for("props")].frame=o.maxFps[2]}],context:{}},state(){return{image:rs,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){let i=1e4,o=0,e=0,s=0,t=0;Ce.on("fpsUpdate",(l,{fps:r})=>{i=Math.min(r,i),o=Math.max(r,o),s+=r,t++,e=Math.round(s/t),this.fps=r.toString().padStart(3,"0"),this.avgFps=e.toString().padStart(3,"0"),this.minFps=i.toString().padStart(3,"0"),this.maxFps=o.toString().padStart(3,"0")})}}}),mt=new Map,Dt={registerListener(i,o,e){let s=mt.get(o);s||(s=new Map,mt.set(o,s));let t=s.get(i);t||(t=new Set,s.set(i,t)),t.add(e)},executeListeners(i,o){const e=mt.get(i);e&&e.forEach(s=>{s.forEach(t=>{t(o)})})},removeListeners(i){mt.forEach(o=>{const e=o.get(i);e&&(e.clear(),o.delete(e))})}},sn={rounded:"radius"},nn=i=>{Object.defineProperties(i.prototype,{focus:{value:function(o){Re.set(this,o)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.lifecycle.state="destroy";for(let o=0;o<this[C.timeouts].length;o++)clearTimeout(this[C.timeouts][o]);for(let o=0;o<this[C.intervals].length;o++)clearInterval(this[C.intervals][o]);Dt.removeListeners(this),ls(this[C.children]),ee.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},select:{value:function(o){let e=null;return this[C.children].forEach(s=>{Array.isArray(s)?s.forEach(t=>{t.ref===o&&(e=t)}):Object.getPrototypeOf(s)===Object.prototype?Object.keys(s).forEach(t=>{s[t].ref===o&&(e=s[t])}):s.ref===o&&(e=s)}),e},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(o,e){const s=sn[o]||o,t=Ce.driver.stage.shManager.getRegisteredEffects();if(s in t)return{type:s,props:e};ee.error(`Shader ${o} not found`)},writable:!1,enumerable:!1,configurable:!1},$router:{value:{to:fo,back:is,get currentRoute(){return lo},get routes(){return i.prototype[C.routes]},get navigating(){return It}},writable:!1,enumerable:!0,configurable:!1},[C.components]:{value:{Image:Zi(),Circle:Qi(),RouterView:Ji(),Sprite:en(),Text:tn(),FPScounter:on()},writable:!1,enumerable:!1,configurable:!1},$setTimeout:{value:function(o,e,...s){const t=setTimeout(()=>{this[C.timeouts]=this[C.timeouts].filter(l=>l!==t),o.apply(null,s)},e,s);return this[C.timeouts].push(t),t},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(o){this[C.timeouts].indexOf(o)>-1&&(this[C.timeouts]=this[C.timeouts].filter(e=>e!==o),clearTimeout(o))},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(o,e,...s){const t=setInterval(()=>o.apply(null,s),e,s);return this[C.intervals].push(t),t},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(o){this[C.intervals].indexOf(o)>-1&&(this[C.intervals]=this[C.intervals].filter(e=>e!==o),clearInterval(o))},writable:!1,enumerable:!0,configurable:!1},$emit:{value:function(o,e){Dt.executeListeners(o,e)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(o,e){Dt.registerListener(this,o,e)},writable:!1,enumerable:!0,configurable:!1},[C.renderer]:{value:Ce,writable:!1,enumerable:!1,configurable:!1},$log:{value:Ho("App"),writable:!1,enumerable:!1,configurable:!1},$trigger:{value:function(o){at(this[C.originalState],o,!0)},writable:!1,enumerable:!1,configurable:!1},$announcer:{value:Jo,writable:!1,enumerable:!1,configurable:!1}})},ls=function(i){for(let o=0;o<i.length;o++){if(!i[o])return;Array.isArray(i[o])?ls(i[o]):i[o].delete?i[o].delete():i[o].destroy&&(i[o].destroy(),i[o]=null),i[o]=null}i=[]},rn={cast:i=>i,required:!1},ln=(i,o=[])=>{o.indexOf("ref")===-1&&o.push("ref"),i[C.propKeys]=[],o.forEach(e=>{e={...rn,...typeof e=="object"?e:{key:e}},i[C.propKeys].push(e.key),Object.defineProperty(i.prototype,e.key,{get(){const s=e.cast(this[C.props]&&e.key in this[C.props]?this[C.props][e.key]:e.default||void 0);return e.required&&s===void 0&&ee.warn(`${e.key} is required`),s},set(s){ee.warn(`Warning! Avoid mutating props directly (${e.key})`),this[C.props][e.key]=s}})})},fn=(i,o)=>{i[C.methodKeys]=[];for(let e in o)i[C.propKeys]&&i[C.propKeys].indexOf(e)>-1?ee.error(`${e} already exists as a prop`):(typeof o[e]!="function"&&ee.warn(`${e} is not a function`),i[C.methodKeys].push(e),i.prototype[e]=o[e])},an=(i,o)=>{i[C.stateKeys]=[],o=o.apply(i.prototype),Object.keys(o).forEach(e=>{i[C.propKeys]&&i[C.propKeys].indexOf(e)>-1&&ee.error(`State ${e} already exists as a prop`),i[C.methodKeys]&&i[C.methodKeys].indexOf(e)>-1&&ee.error(`State ${e} already exists as a method`),i[C.stateKeys].push(e);try{Object.defineProperty(i.prototype,e,{get(){return this[C.state]&&e in this[C.state]&&this[C.state][e]},set(s){this[C.state]&&(this[C.state][e]=s)}})}catch(s){ee.error(s)}})},cn=(i,o)=>{i[C.computedKeys]=[];for(let e in o)i[C.stateKeys]&&i[C.stateKeys].indexOf(e)>-1?ee.error(`${e} already exists as a prop`):i[C.propKeys]&&i[C.propKeys].indexOf(e)>-1?ee.error(`${e} already exists as a prop`):i[C.methodKeys]&&i[C.methodKeys].indexOf(e)>-1?ee.error(`${e} already exists as a method`):(typeof o[e]!="function"&&ee.warn(`${e} is not a function`),i[C.computedKeys].push(e),Object.defineProperty(i.prototype,e,{get(){return o[e].apply(this)}}))},dn=(i,o)=>{i.prototype[C.inputEvents]=[],Object.keys(o).forEach(e=>{typeof o[e]!="function"&&ee.warn(`${o[e]} is not a function`),i.prototype[C.inputEvents][e]=o[e]})},un=(i,o)=>{i.prototype[C.routes]=[],Object.keys(o).forEach(e=>{i.prototype[C.routes][e]={...o[e],options:{inHistory:!0,...o[e].options}}})},hn=(i,o)=>{i.prototype[C.watchKeys]=[],i.prototype[C.watchers]={};for(let e in o)typeof o[e]!="function"&&console.warn(`${e} is not a function`),i.prototype[C.watchKeys].push(e),i.prototype[C.watchers][e]=function(s,t){o[e].call(this,s,t)}},Eo={element:jo},ko=i=>{throw new Error(`Parameter ${i} is required`)},Ae=(i=ko("name"),o=ko("config"))=>{const e=(r,n)=>{o.code||(ee.debug(`Generating code for ${i} component`),o.code=bs.call(o,xs(o.template,i,n))),nn(t),Ui(o.hooks,i),r.state="beforeSetup",ln(t,o.props),o.methods&&fn(t,o.methods),o.state&&an(t,o.state),o.computed&&cn(t,o.computed),o.watch&&hn(t,o.watch),o.routes&&un(t,o.routes),o.input&&dn(t,o.input),t.setup=!0,r.state="setup"},s=r=>{const n=["init","beforeSetup","setup","ready","focus","unfocus","destroy"];return{previous:null,current:null,get state(){return this.current},set state(f){n.indexOf(f)>-1&&f!==this.current&&(ee.debug(`Setting lifecycle state from ${this.previous} to ${f} for ${r.componentId}`),this.previous=this.current,Fi(f,i,r),zi(f,i,r),this.current=f)}}},t=function(r,n,f){this.lifecycle=s(this),t.setup||e(this.lifecycle,f),this.parent=f,this[C.wrapper]=n,Object.defineProperties(this,{type:{value:i,writable:!1,enumerable:!0,configurable:!1},componentId:{value:Ni(i),writable:!1,enumerable:!0,configurable:!1},[C.id]:{value:Pi(),writable:!1,enumerable:!1,configurable:!1},[C.props]:{value:vo(r.props||{},Ve.get("reactivityMode")),writable:!1,enumerable:!1,configurable:!1},[C.timeouts]:{value:[],writable:!0,enumerable:!1,configurable:!1},[C.intervals]:{value:[],writable:!0,enumerable:!1,configurable:!1}}),Object.defineProperty(this,C.originalState,{value:o.state&&typeof o.state=="function"&&o.state.apply(this)||{},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,C.state,{value:vo(this[C.originalState],Ve.get("reactivityMode")),writable:!1,enumerable:!1,configurable:!1}),this.lifecycle.state="init",Object.defineProperty(this,C.children,{value:o.code.render.apply(Eo,[n,this,o]),writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,C.slots,{value:this[C.children].filter(c=>c[C.isSlot]),writable:!1,enumerable:!1,configurable:!1}),o.code.effects.forEach(c=>{Co(()=>{c.apply(Eo,[this,this[C.children],o])})}),this[C.watchers]&&Object.keys(this[C.watchers]).forEach(c=>{let a=this[c];Co((u=!1)=>{(a!==this[c]||u===!0)&&(this[C.watchers][c].apply(this,[this[c],a]),a=this[c])})}),setTimeout(()=>this.lifecycle.state="ready")},l=(r={},n,f)=>new t(r,n,f);return l.config=o,l},pn=i=>{const o={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};i.hooks=i.hooks||{};let e,s,t;return i.hooks[C.destroy]=function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",s)},i.hooks[C.init]=function(){const l={...o,...Ve.get("keymap",{})};e=r=>{const n=l[r.key]||l[r.keyCode]||r.key||r.keyCode;Re.input(n,r),clearTimeout(t),t=setTimeout(()=>{Re.hold=!0},50)},s=()=>{clearTimeout(t),Re.hold=!1},document.addEventListener("keydown",e),document.addEventListener("keyup",s),setTimeout(()=>Re.set(this))},Ae("App",i)},W={Component:Ae,Application:pn,Launch:Ai},mn=new URL("fontLoader-e36a1c4c.js",import.meta.url).href,gn=i=>new URLSearchParams(window.location.search).get(i),Ke={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||gn("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}}},yn=()=>{let i={};return Object.keys(Ke).forEach(o=>{if(Ke[o].test&&typeof Ke[o].test=="function"&&Ke[o].test()===!0){i=Ke[o].mapping;return}}),i},xn=W.Component("PortalItem",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=370,l.h=320,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.x=30,n.y=30,n.size=84,typeof r<"u")for(let m in r.config.props)delete n[r.config.props[m]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};f.x=30,f.y=30,f.content=e.number,f.size=84,f.color=e.fontColor,t[2]||(t[2]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.x=30,a.y=140,a.size=42,a.font="raleway",a.letterspacing=2,typeof c<"u")for(let m in c.config.props)delete a[c.config.props[m]];t[3].nodeId||t[3].populate(a),o=t[3];const u={};u.x=30,u.y=140,u.content=e.title,u.size=42,u.font="raleway",u.color=e.fontColor,u.letterspacing=2,t[4]||(t[4]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]);const g=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.x=30,p.y=200,p.wordwrap=300,p.size=28,p.lineheight=32,typeof g<"u")for(let m in g.config.props)delete p[g.config.props[m]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};return h.x=30,h.y=200,h.content=e.description,h.wordwrap=300,h.size=28,h.color=e.fontColor,h.lineheight=32,t[6]||(t[6]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("scale",{transition:o.scale})},function(o,e,s){e[0].set("color",o.backgroundColor)},function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:6})])},function(o,e,s){e[1].set("content",o.number)},function(o,e,s){e[1].set("color",o.fontColor)},function(o,e,s){e[2][Symbol.for("props")].content=o.number},function(o,e,s){e[2][Symbol.for("props")].color=o.fontColor},function(o,e,s){e[3].set("content",o.title)},function(o,e,s){e[3].set("color",o.fontColor)},function(o,e,s){e[4][Symbol.for("props")].content=o.title},function(o,e,s){e[4][Symbol.for("props")].color=o.fontColor},function(o,e,s){e[5].set("content",o.description)},function(o,e,s){e[5].set("color",o.fontColor)},function(o,e,s){e[6][Symbol.for("props")].content=o.description},function(o,e,s){e[6][Symbol.for("props")].color=o.fontColor}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",scale:1,fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000",this.scale=1.1},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9",this.scale=1)}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),bn=W.Component("PortalRow",{components:{PortalItem:xn},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.content=e.title,f.x=60,typeof n<"u")for(let g in n.config.props)delete f[n.config.props[g]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};c.content=e.title,c.x=60,t[3]||(t[3]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};a.y=50,a.x=60,a.h=1,a.w=1800,a.color="#e8d7f9",t[4].nodeId||t[4].populate(a),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const u={};return u.y=100,t[5].nodeId||t[5].populate(u),t},effects:[function(o,e,s){e[1].set("alpha",{transition:{value:o.itemOffset<240?1:0,duration:200}})},function(o,e,s){e[5].set("x",{transition:o.rowOffset})},function(o,e,s){parent=e[5];const t=o.items,l=[];for(let r=0;r<t.length;r++){parent=e[5],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.id);const f=s.components&&s.components.PortalItem||o[Symbol.for("components")].PortalItem;e[6]=e[6]||{},e[6][n.item.id]||(e[6][n.item.id]=this.element({parent:parent||"root"},o));const c={};if(c.title=n.item.title,c.description=n.item.description,c.id=n.item.id,c.index=n.index,c.key=n.item.id,typeof f<"u")for(let u in f.config.props)delete c[f.config.props[u]];e[6][n.item.id].nodeId||e[6][n.item.id].populate(c),e[7]=e[7]||{},parent=e[6][n.item.id];const a={};a.x={transition:{value:n.itemOffset+n.index*430,delay:50*(n.index%4),duration:500}},a.title=n.item.title,a.description=n.item.description,a.id=n.item.id,a.index=n.index,a.ref="item"+n.index,a.key=n.item.id,e[7][n.item.id]||(e[7][n.item.id]=(s.components&&s.components.PortalItem||o[Symbol.for("components")].PortalItem||(()=>{console.error("component PortalItem not found")})).call(null,{props:a},e[6][n.item.id],o),e[7][n.item.id][Symbol.for("slots")][0]?(parent=e[7][n.item.id][Symbol.for("slots")][0],o=e[7][n.item.id]):parent=e[7][n.item.id][Symbol.for("children")][0]),e[6][n.item.id].set("x",{transition:{value:n.itemOffset+n.index*430,delay:50*(n.index%4),duration:500}}),e[6][n.item.id].set("ref","item"+n.index),e[7][n.item.id][Symbol.for("props")].x={transition:{value:n.itemOffset+n.index*430,delay:50*(n.index%4),duration:500}},e[7][n.item.id][Symbol.for("props")].ref="item"+n.index}e[7]&&Object.keys(e[7]).forEach(r=>{l.indexOf(r)===-1&&(e[7][r].delete&&e[7][r].delete(),e[7][r].destroy&&e[7][r].destroy(),delete e[7][r])})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(i){const o=this.select(`item${i}`);o&&o.focus&&(o.focus(),i<1?this.rowOffset=60:i>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-i*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),Sn="@lightningjs/blits-example-app",wn="0.5.12",Cn="Lightning 3 Blits Example App",Tn="index.js",vn="module",In={start:"npm run dev",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",build:"vite build",dev:"vite dev --host"},_n={hooks:{"pre-commit":"lint-staged"}},Rn="Michiel van der Geest <hello@michielvandergeest.com>",En="Apache-2",kn={eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0",husky:"^7.0.4","lint-staged":"^12.3.3",prettier:"^2.5.1",vite:"^4.0.4"},An={"@lightningjs/blits":"^0.6.10"},Mn={name:Sn,version:wn,description:Cn,main:Tn,type:vn,scripts:In,"lint-staged":{"*.js":["eslint --fix"]},husky:_n,author:Rn,license:En,devDependencies:kn,dependencies:An},Bn=W.Component("Portal",{components:{PortalRow:bn},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,l.color="{top: '#44037a', bottom: '#240244'}",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.mount="{y: 0.5}",n.h=500,n.title="Demos",n.items=e.demo,n.ref="row0",typeof r<"u")for(let E in r.config.props)delete n[r.config.props[E]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};f.mount="{y: 0.5}",f.h=500,f.y={transition:-e.rowFocused*420+550},f.title="Demos",f.items=e.demo,f.ref="row0",t[2]||(t[2]=(s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow||(()=>{console.error("component PortalRow not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.mount="{y: 0.5}",a.h=500,a.title="Examples and tests",a.items=e.example,a.ref="row1",typeof c<"u")for(let E in c.config.props)delete a[c.config.props[E]];t[3].nodeId||t[3].populate(a),o=t[3];const u={};u.mount="{y: 0.5}",u.h=500,u.y={transition:-e.rowFocused*420+1100},u.title="Examples and tests",u.items=e.example,u.ref="row1",t[4]||(t[4]=(s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow||(()=>{console.error("component PortalRow not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]);const g=s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.mount="{y: 0.5}",p.h=500,p.title="Benchmarks and stress tests",p.items=e.benchmark,p.ref="row2",typeof g<"u")for(let E in g.config.props)delete p[g.config.props[E]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};h.mount="{y: 0.5}",h.h=500,h.y={transition:-e.rowFocused*420+1650},h.title="Benchmarks and stress tests",h.items=e.benchmark,h.ref="row2",t[6]||(t[6]=(s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow||(()=>{console.error("component PortalRow not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};m.w=1920,m.h=200,m.color="#44037a",t[7].nodeId||t[7].populate(m),o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const y={};y.w=1920,y.h=70,y.y=200,y.color="{top: '#44037a'}",t[8].nodeId||t[8].populate(y),o=t[7],t[9]||(t[9]=this.element({parent:o||"root"},e));const b={};t[9].nodeId||t[9].populate(b),o=t[9],t[10]||(t[10]=this.element({parent:o||"root"},e));const I={};I.src="assets/blits-logo-full.png",I.w=200,I.h=112,I.x=60,t[10].nodeId||t[10].populate(I),o=t[9],t[11]||(t[11]=this.element({parent:o||"root"},e));const w={};w.w=2,w.h=120,w.y=-10,w.color="#ffffff80",w.x=300,t[11].nodeId||t[11].populate(w),o=t[9],t[12]||(t[12]=this.element({parent:o||"root"},e));const _={};_.x=320,_.y=16,t[12].nodeId||t[12].populate(_);const R=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[12],t[13]||(t[13]=this.element({parent:o||"root"},e));const k={};if(k.y=0,k.size=36,k.content="Example App",typeof R<"u")for(let E in R.config.props)delete k[R.config.props[E]];t[13].nodeId||t[13].populate(k),o=t[13];const x={};x.y=0,x.size=36,x.content="Example App",t[14]||(t[14]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:x},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]);const T=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[12],t[15]||(t[15]=this.element({parent:o||"root"},e));const A={};if(A.y=50,A.size=24,A.content="v"+e.version,typeof T<"u")for(let E in T.config.props)delete A[T.config.props[E]];t[15].nodeId||t[15].populate(A),o=t[15];const B={};return B.y=50,B.size=24,B.content="v"+e.version,t[16]||(t[16]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:B},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[1].set("y",{transition:-o.rowFocused*420+550})},function(o,e,s){e[2][Symbol.for("props")].y={transition:-o.rowFocused*420+550}},function(o,e,s){e[3].set("y",{transition:-o.rowFocused*420+1100})},function(o,e,s){e[4][Symbol.for("props")].y={transition:-o.rowFocused*420+1100}},function(o,e,s){e[5].set("y",{transition:-o.rowFocused*420+1650})},function(o,e,s){e[6][Symbol.for("props")].y={transition:-o.rowFocused*420+1650}},function(o,e,s){e[9].set("y",{transition:{value:80-o.logoOffset,duration:400}})}],context:{}},state(){return{version:Mn.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0,this.$trigger("rowFocused")}},watch:{rowFocused(i){const o=this.select(`row${i}`);o&&o.focus&&o.focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),Ln=W.Component("Letter",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=e.w,r.color="#E6E6E6",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=e.w,n.h=280,t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};return f.w=e.w,f.color="#E6E6E6",t[3].nodeId||t[3].populate(f),t},effects:[function(o,e,s){e[1].set("h",{transition:{value:410+o.offset,duration:o.duration,delay:o.wait,function:o.timingFunction}})},function(o,e,s){e[2].set("src",o.image)},function(o,e,s){e[2].set("y",{transition:{value:400+o.offset,duration:o.duration,delay:o.wait,function:o.timingFunction}})},function(o,e,s){e[3].set("h",{transition:{value:500-o.offset,duration:o.duration,delay:o.wait,function:o.timingFunction}})},function(o,e,s){e[3].set("y",{transition:{value:660+o.offset,duration:o.duration,delay:o.wait,function:o.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),Nn=W.Component("Intro",{components:{Letter:Ln},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,l.src="assets/background.jpg",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.letter="l",n.w=294,typeof r<"u")for(let M in r.config.props)delete n[r.config.props[M]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};f.letter="l",f.w=294,t[2]||(t[2]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.letter="i-1",a.w=128,a.x=294,a.direction="up",a.delay=50,typeof c<"u")for(let M in c.config.props)delete a[c.config.props[M]];t[3].nodeId||t[3].populate(a),o=t[3];const u={};u.letter="i-1",u.w=128,u.x=294,u.direction="up",u.delay=50,t[4]||(t[4]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]);const g=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.letter="g-1",p.w=205,p.x=422,p.delay=100,typeof g<"u")for(let M in g.config.props)delete p[g.config.props[M]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};h.letter="g-1",h.w=205,h.x=422,h.delay=100,t[6]||(t[6]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]);const m=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const y={};if(y.letter="h",y.w=224,y.x=627,y.direction="up",y.delay=150,typeof m<"u")for(let M in m.config.props)delete y[m.config.props[M]];t[7].nodeId||t[7].populate(y),o=t[7];const b={};b.letter="h",b.w=224,b.x=627,b.direction="up",b.delay=150,t[8]||(t[8]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:b},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]);const I=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const w={};if(w.letter="t",w.w=190,w.x=851,w.delay=200,typeof I<"u")for(let M in I.config.props)delete w[I.config.props[M]];t[9].nodeId||t[9].populate(w),o=t[9];const _={};_.letter="t",_.w=190,_.x=851,_.delay=200,t[10]||(t[10]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:_},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]);const R=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const k={};if(k.letter="n-1",k.w=221,k.x=1041,k.direction="up",k.delay=250,typeof R<"u")for(let M in R.config.props)delete k[R.config.props[M]];t[11].nodeId||t[11].populate(k),o=t[11];const x={};x.letter="n-1",x.w=221,x.x=1041,x.direction="up",x.delay=250,t[12]||(t[12]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:x},t[11],e),t[12][Symbol.for("slots")][0]?(o=t[12][Symbol.for("slots")][0],e=t[12]):o=t[12][Symbol.for("children")][0]);const T=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const A={};if(A.letter="i-2",A.w=115,A.x=1262,A.delay=300,typeof T<"u")for(let M in T.config.props)delete A[T.config.props[M]];t[13].nodeId||t[13].populate(A),o=t[13];const B={};B.letter="i-2",B.w=115,B.x=1262,B.delay=300,t[14]||(t[14]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:B},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]);const E=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const L={};if(L.letter="n-2",L.w=219,L.x=1377,L.direction="up",L.delay=350,typeof E<"u")for(let M in E.config.props)delete L[E.config.props[M]];t[15].nodeId||t[15].populate(L),o=t[15];const F={};F.letter="n-2",F.w=219,F.x=1377,F.direction="up",F.delay=350,t[16]||(t[16]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:F},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]);const U=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const S={};if(S.letter="g-2",S.w=324,S.x=1596,S.direction="up",S.delay=400,typeof U<"u")for(let M in U.config.props)delete S[U.config.props[M]];t[17].nodeId||t[17].populate(S),o=t[17];const v={};return v.letter="g-2",v.w=324,v.x=1596,v.direction="up",v.delay=400,t[18]||(t[18]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:v},t[17],e),t[18][Symbol.for("slots")][0]?(o=t[18][Symbol.for("slots")][0],e=t[18]):o=t[18][Symbol.for("children")][0]),t},effects:[],context:{}}}),Pn=W.Component("Toggle",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=100,l.h=50,l.y=5,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Circle||e[Symbol.for("components")].Circle;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.size=50,typeof r<"u")for(let c in r.config.props)delete n[r.config.props[c]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};return f.x={transition:e.on?0:50},f.size=50,f.color=e.primaryColor,t[2]||(t[2]=(s.components&&s.components.Circle||e[Symbol.for("components")].Circle||(()=>{console.error("component Circle not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("color",o.bgColor)},function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:25})])},function(o,e,s){e[1].set("x",{transition:o.on?0:50})},function(o,e,s){e[1].set("color",o.primaryColor)},function(o,e,s){e[2][Symbol.for("props")].x={transition:o.on?0:50}},function(o,e,s){e[2][Symbol.for("props")].color=o.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),zn=W.Component("Bar",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};return t[1].nodeId||t[1].populate(r),t},effects:[function(o,e,s){e[0].set("w",{value:o.w,duration:o.duration})},function(o,e,s){e[0].set("h",{value:o.h,duration:o.duration})},function(o,e,s){e[0].set("color",o.bgColor)},function(o,e,s){e[0].set("x",o.index*(o.w+o.w/4))},function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:10})])},function(o,e,s){e[1].set("w",o.w)},function(o,e,s){e[1].set("y",{transition:{value:o.h-o.innerH,duration:o.duration}})},function(o,e,s){e[1].set("h",{transition:{value:o.innerH,duration:o.duration}})},function(o,e,s){e[1].set("color",o.primaryColor)},function(o,e,s){e[1].set("effects",[o.shader("radius",{radius:10})])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),Fn={color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"},Un={color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},Dn=W.Component("Theming",{components:{Bar:zn,Toggle:Pn},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.y=1020,n.x=1160,n.size=28,n.content='Use "up", "down", "left" and "right" to change the appearance',typeof r<"u")for(let Y in r.config.props)delete n[r.config.props[Y]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};f.y=1020,f.x=1160,f.size=28,f.color=e.colors.color4,f.content='Use "up", "down", "left" and "right" to change the appearance',t[2]||(t[2]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};t[3].nodeId||t[3].populate(c),o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};a.x=-250,a.y=-100,a.src="assets/shadow.png",a.w=1e3,a.h=900,a.alpha=.5,t[4].nodeId||t[4].populate(a),o=t[3],t[5]||(t[5]=this.element({parent:o||"root"},e));const u={};t[5].nodeId||t[5].populate(u),o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const g={};g.h=100,t[6].nodeId||t[6].populate(g),o=t[5],t[7]||(t[7]=this.element({parent:o||"root"},e));const p={};p.h=80,p.y=20,t[7].nodeId||t[7].populate(p);const h=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[5],t[8]||(t[8]=this.element({parent:o||"root"},e));const m={};if(m.size=28,m.x=20,m.y=14,typeof h<"u")for(let Y in h.config.props)delete m[h.config.props[Y]];t[8].nodeId||t[8].populate(m),o=t[8];const y={};y.content=e.text,y.color=e.colors.color3,y.size=28,y.x=20,y.y=14,t[9]||(t[9]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:y},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]);const b=s.components&&s.components.Toggle||e[Symbol.for("components")].Toggle;o=t[5],t[10]||(t[10]=this.element({parent:o||"root"},e));const I={};if(I.primaryColor="#22c55e",typeof b<"u")for(let Y in b.config.props)delete I[b.config.props[Y]];t[10].nodeId||t[10].populate(I),o=t[10];const w={};w.x={transition:e.width-120},w.on=e.mode==="dark",w.bgColor=e.colors.color1,w.primaryColor="#22c55e",t[11]||(t[11]=(s.components&&s.components.Toggle||e[Symbol.for("components")].Toggle||(()=>{console.error("component Toggle not found")})).call(null,{props:w},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]),o=t[3],t[12]||(t[12]=this.element({parent:o||"root"},e));const _={};_.w=200,_.x=25,_.y=140,t[12].nodeId||t[12].populate(_),o=t[3],t[13]||(t[13]=this.element({parent:o||"root"},e));const R={};R.x=270,t[13].nodeId||t[13].populate(R),o=t[3],t[14]||(t[14]=this.element({parent:o||"root"},e));const k={};k.color="transparent",t[14].nodeId||t[14].populate(k),o=t[14],t[15]||(t[15]=this.element({parent:o||"root"},e));const x={};t[15].nodeId||t[15].populate(x);const T=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const A={};if(A.height=100,A.index=0,typeof T<"u")for(let Y in T.config.props)delete A[T.config.props[Y]];t[16].nodeId||t[16].populate(A),o=t[16];const B={};B.bgColor=e.colors.color2,B.primaryColor=e.colors.color4,B.size=e.graph.size,B.height=100,B.index=0,t[17]||(t[17]=(s.components&&s.components.Bar||e[Symbol.for("components")].Bar||(()=>{console.error("component Bar not found")})).call(null,{props:B},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]);const E=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[18]||(t[18]=this.element({parent:o||"root"},e));const L={};if(L.height=140,L.index=1,typeof E<"u")for(let Y in E.config.props)delete L[E.config.props[Y]];t[18].nodeId||t[18].populate(L),o=t[18];const F={};F.bgColor=e.colors.color2,F.primaryColor=e.colors.color4,F.size=e.graph.size,F.height=140,F.index=1,t[19]||(t[19]=(s.components&&s.components.Bar||e[Symbol.for("components")].Bar||(()=>{console.error("component Bar not found")})).call(null,{props:F},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]);const U=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[20]||(t[20]=this.element({parent:o||"root"},e));const S={};if(S.height=170,S.index=2,typeof U<"u")for(let Y in U.config.props)delete S[U.config.props[Y]];t[20].nodeId||t[20].populate(S),o=t[20];const v={};v.bgColor=e.colors.color2,v.primaryColor=e.colors.color4,v.size=e.graph.size,v.height=170,v.index=2,t[21]||(t[21]=(s.components&&s.components.Bar||e[Symbol.for("components")].Bar||(()=>{console.error("component Bar not found")})).call(null,{props:v},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]);const M=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[22]||(t[22]=this.element({parent:o||"root"},e));const D={};if(D.height=150,D.index=3,typeof M<"u")for(let Y in M.config.props)delete D[M.config.props[Y]];t[22].nodeId||t[22].populate(D),o=t[22];const P={};P.bgColor=e.colors.color2,P.primaryColor=e.colors.color4,P.size=e.graph.size,P.height=150,P.index=3,t[23]||(t[23]=(s.components&&s.components.Bar||e[Symbol.for("components")].Bar||(()=>{console.error("component Bar not found")})).call(null,{props:P},t[22],e),t[23][Symbol.for("slots")][0]?(o=t[23][Symbol.for("slots")][0],e=t[23]):o=t[23][Symbol.for("children")][0]);const z=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[24]||(t[24]=this.element({parent:o||"root"},e));const N={};if(N.height=90,N.index=4,typeof z<"u")for(let Y in z.config.props)delete N[z.config.props[Y]];t[24].nodeId||t[24].populate(N),o=t[24];const $={};return $.bgColor=e.colors.color2,$.primaryColor=e.colors.color4,$.size=e.graph.size,$.height=90,$.index=4,t[25]||(t[25]=(s.components&&s.components.Bar||e[Symbol.for("components")].Bar||(()=>{console.error("component Bar not found")})).call(null,{props:$},t[24],e),t[25][Symbol.for("slots")][0]?(o=t[25][Symbol.for("slots")][0],e=t[25]):o=t[25][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("color",{transition:o.colors.bg})},function(o,e,s){e[1].set("color",o.colors.color4)},function(o,e,s){e[2][Symbol.for("props")].color=o.colors.color4},function(o,e,s){e[3].set("x",{transition:(1920-o.width)/2})},function(o,e,s){e[3].set("y",{transition:(1080-o.height)/2})},function(o,e,s){e[5].set("w",{transition:o.width})},function(o,e,s){e[5].set("h",{transition:o.height})},function(o,e,s){e[5].set("color",o.colors.color1)},function(o,e,s){e[5].set("effects",[o.shader("radius",{radius:o.radius})])},function(o,e,s){e[6].set("w",{transition:o.width})},function(o,e,s){e[6].set("color",o.colors.color2)},function(o,e,s){e[6].set("effects",[o.shader("radius",{radius:o.radius})])},function(o,e,s){e[7].set("w",{transition:o.width})},function(o,e,s){e[7].set("color",o.colors.color2)},function(o,e,s){e[8].set("content",o.text)},function(o,e,s){e[8].set("color",o.colors.color3)},function(o,e,s){e[9][Symbol.for("props")].content=o.text},function(o,e,s){e[9][Symbol.for("props")].color=o.colors.color3},function(o,e,s){e[10].set("x",{transition:o.width-120})},function(o,e,s){e[10].set("on",o.mode==="dark")},function(o,e,s){e[10].set("bgColor",o.colors.color1)},function(o,e,s){e[11][Symbol.for("props")].x={transition:o.width-120}},function(o,e,s){e[11][Symbol.for("props")].on=o.mode==="dark"},function(o,e,s){e[11][Symbol.for("props")].bgColor=o.colors.color1},function(o,e,s){e[12].set("h",{transition:o.block1.height})},function(o,e,s){e[12].set("color",o.colors.color2)},function(o,e,s){e[12].set("effects",[o.shader("radius",{radius:o.radius/2})])},function(o,e,s){e[13].set("w",{transition:o.block2.w})},function(o,e,s){e[13].set("h",o.block2.h)},function(o,e,s){e[13].set("y",{transition:o.block2.y})},function(o,e,s){e[13].set("color",o.colors.color2)},function(o,e,s){e[13].set("effects",[o.shader("radius",{radius:o.radius/2})])},function(o,e,s){e[14].set("x",{transition:o.graph.x})},function(o,e,s){e[14].set("y",{transition:o.graph.y})},function(o,e,s){e[14].set("w",o.graph.w)},function(o,e,s){e[14].set("h",o.graph.h)},function(o,e,s){e[15].set("x",{transition:o.graph.offset})},function(o,e,s){e[15].set("y",{transition:o.graph.offset})},function(o,e,s){e[16].set("bgColor",o.colors.color2)},function(o,e,s){e[16].set("primaryColor",o.colors.color4)},function(o,e,s){e[16].set("size",o.graph.size)},function(o,e,s){e[17][Symbol.for("props")].bgColor=o.colors.color2},function(o,e,s){e[17][Symbol.for("props")].primaryColor=o.colors.color4},function(o,e,s){e[17][Symbol.for("props")].size=o.graph.size},function(o,e,s){e[18].set("bgColor",o.colors.color2)},function(o,e,s){e[18].set("primaryColor",o.colors.color4)},function(o,e,s){e[18].set("size",o.graph.size)},function(o,e,s){e[19][Symbol.for("props")].bgColor=o.colors.color2},function(o,e,s){e[19][Symbol.for("props")].primaryColor=o.colors.color4},function(o,e,s){e[19][Symbol.for("props")].size=o.graph.size},function(o,e,s){e[20].set("bgColor",o.colors.color2)},function(o,e,s){e[20].set("primaryColor",o.colors.color4)},function(o,e,s){e[20].set("size",o.graph.size)},function(o,e,s){e[21][Symbol.for("props")].bgColor=o.colors.color2},function(o,e,s){e[21][Symbol.for("props")].primaryColor=o.colors.color4},function(o,e,s){e[21][Symbol.for("props")].size=o.graph.size},function(o,e,s){e[22].set("bgColor",o.colors.color2)},function(o,e,s){e[22].set("primaryColor",o.colors.color4)},function(o,e,s){e[22].set("size",o.graph.size)},function(o,e,s){e[23][Symbol.for("props")].bgColor=o.colors.color2},function(o,e,s){e[23][Symbol.for("props")].primaryColor=o.colors.color4},function(o,e,s){e[23][Symbol.for("props")].size=o.graph.size},function(o,e,s){e[24].set("bgColor",o.colors.color2)},function(o,e,s){e[24].set("primaryColor",o.colors.color4)},function(o,e,s){e[24].set("size",o.graph.size)},function(o,e,s){e[25][Symbol.for("props")].bgColor=o.colors.color2},function(o,e,s){e[25][Symbol.for("props")].primaryColor=o.colors.color4},function(o,e,s){e[25][Symbol.for("props")].size=o.graph.size}],context:{}},state(){return{mode:"dark",radius:20,width:500,height:600}},computed:{colors(){return this.mode==="dark"?Fn:Un},text(){return this.mode==="dark"?"Dark mode":"Light mode"},block1(){return{height:this.height===600?180:720}},block2(){return{y:this.height===600?140:560,h:this.height===600?180:300,w:this.height===600?200:890}},graph(){return{x:this.height===600?32:270,y:this.height===600?370:140,w:this.height===600?0:890,h:this.height===600?0:400,offset:this.height===600?0:110,size:this.height===600?"small":"large"}}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.width=1200,this.height=900},down(){this.width=500,this.height=600}}}),On="ABC123",$n="https://8b4fa39d.lightningjs.workers.dev";let fs,as;const Xn="w185",Yn={headers:{"Content-Type":"application/json",Authorization:"Bearer "+On}};function Ao(i,o=Xn){return as+o+i}function Wn(...i){return fs?eo(...i):cs().then(()=>eo(...i))}function eo(i,o={}){return fetch($n+i,{...Yn,...o}).then(e=>e.json())}function cs(){return eo("/configuration").then(i=>(fs=i,as=i.images.secure_base_url,i))}const Gn={get:Wn,loadConfig:cs};function qn(i){return Gn.get(`/${i}/popular`).then(o=>o.results.filter(s=>!s.adult).map(s=>({poster:Ao(s.poster_path||s.profile_path),background:Ao(s.backdrop_path,"w1280"),identifier:s.id,title:s.title,overview:s.overview})))}const Hn=W.Component("Poster",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=185,l.h=278,l.x=e.x,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("src",o.src)},function(o,e,s){e[0].set("color",{top:"#fff",bottom:o.colorBottom})},function(o,e,s){e[0].set("scale",{transition:{value:o.scale,duration:200,function:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:8})])}],context:{}},props:["src","index"],state(){return{scale:1,colorBottom:"#000"}},computed:{x(){return this.index*215}},hooks:{focus(){this.colorBottom="#fff",this.scale=1.1,this.$emit("posterSelect",this.index)},unfocus(){this.colorBottom="#000",this.scale=1}}}),Vn=W.Component("Background",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=1920,r.h=1080,r.color="{top: '#fff', bottom: '#000'}",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=1920,n.h=1080,n.color="{top: '#fff', bottom: '#000'}",t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};return f.w=1920,f.h=1080,f.src="assets/gradient.png",f.color="#8866dd",f.alpha=.8,t[3].nodeId||t[3].populate(f),t},effects:[function(o,e,s){e[1].set("src",o.bg1)},function(o,e,s){e[1].set("alpha",{transition:{value:o.alpha1,duration:400,function:"ease-in"}})},function(o,e,s){e[2].set("src",o.bg2)},function(o,e,s){e[2].set("alpha",{transition:{value:o.alpha2,duration:400,function:"ease-in"}})}],context:{}},props:["src"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{src(i){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=i,this.alpha1=.8,this.alpha2=0):(this.bg2=i,this.alpha1=0,this.alpha2=.8)}}}),jn=W.Component("TMdb",{components:{Poster:Hn,Background:Vn},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,l.color="black",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Background||e[Symbol.for("components")].Background;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(typeof r<"u")for(let I in r.config.props)delete n[r.config.props[I]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};f.src=e.src,t[2]||(t[2]=(s.components&&s.components.Background||e[Symbol.for("components")].Background||(()=>{console.error("component Background not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};t[3].nodeId||t[3].populate(c),o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};a.src="assets/logo.png",a.x=130,a.w=243,a.h=52,t[4].nodeId||t[4].populate(a);const u=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[3],t[5]||(t[5]=this.element({parent:o||"root"},e));const g={};if(g.font="raleway",g.size=80,g.x=130,g.y=200,g.wordwrap=1e3,g["@loaded"]=e.positionText&&e.positionText.bind(e),typeof u<"u")for(let I in u.config.props)delete g[u.config.props[I]];t[5].nodeId||t[5].populate(g),o=t[5];const p={};p.content=e.title,p.font="raleway",p.size=80,p.x=130,p.y=200,p.wordwrap=1e3,p["@loaded"]=e.positionText&&e.positionText.bind(e),t[6]||(t[6]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:p},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]);const h=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[3],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};if(m.wordwrap=800,m.x=130,m.lineheight=40,m.maxlines=6,typeof h<"u")for(let I in h.config.props)delete m[h.config.props[I]];t[7].nodeId||t[7].populate(m),o=t[7];const y={};y.content=e.overview,y.wordwrap=800,y.x=130,y.y=e.offset+330,y.lineheight=40,y.maxlines=6,t[8]||(t[8]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:y},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]),o=t[3],t[9]||(t[9]=this.element({parent:o||"root"},e));const b={};return t[9].nodeId||t[9].populate(b),t},effects:[function(o,e,s){e[1].set("src",o.src)},function(o,e,s){e[2][Symbol.for("props")].src=o.src},function(o,e,s){e[3].set("alpha",{transition:{value:o.alphaIn,duration:300,function:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){e[4].set("y",{transition:{value:o.logoY,duration:300,function:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){e[5].set("content",o.title)},function(o,e,s){e[6][Symbol.for("props")].content=o.title},function(o,e,s){e[7].set("content",o.overview)},function(o,e,s){e[7].set("y",o.offset+330)},function(o,e,s){e[8][Symbol.for("props")].content=o.overview},function(o,e,s){e[8][Symbol.for("props")].y=o.offset+330},function(o,e,s){e[9].set("x",{transition:{value:o.x,duration:300,function:"ease-in-out"}})},function(o,e,s){e[9].set("y",{transition:{value:o.listY,duration:300,function:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,e,s){parent=e[9];const t=o.items,l=[];for(let r=0;r<t.length;r++){parent=e[9],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString());const f=s.components&&s.components.Poster||o[Symbol.for("components")].Poster;e[10]=e[10]||{},e[10][n.key]||(e[10][n.key]=this.element({parent:parent||"root"},o));const c={};if(c.index=n.index,c.src=n.item.poster,c.ref=n.item.identifier,typeof f<"u")for(let u in f.config.props)delete c[f.config.props[u]];e[10][n.key].nodeId||e[10][n.key].populate(c),e[11]=e[11]||{},parent=e[10][n.key];const a={};a.index=n.index,a.src=n.item.poster,a.ref=n.item.identifier,a.key=n.item.identifier,e[11][n.key]||(e[11][n.key]=(s.components&&s.components.Poster||o[Symbol.for("components")].Poster||(()=>{console.error("component Poster not found")})).call(null,{props:a},e[10][n.key],o),e[11][n.key][Symbol.for("slots")][0]?(parent=e[11][n.key][Symbol.for("slots")][0],o=e[11][n.key]):parent=e[11][n.key][Symbol.for("children")][0]),e[10][n.key].set("key",n.item.identifier),e[11][n.key][Symbol.for("props")].key=n.item.identifier}e[11]&&Object.keys(e[11]).forEach(r=>{l.indexOf(r)===-1&&(e[11][r].delete&&e[11][r].delete(),e[11][r].destroy&&e[11][r].destroy(),delete e[11][r])})}],context:{}},state(){return{items:[],src:"",focused:null,alphaIn:.001,logoY:30,listY:750,offset:0}},computed:{x(){return this.focused<=1?150:150-Math.min(this.focused-1,this.items.length-8)*215},title(){return this.items[this.focused]&&this.items[this.focused].title},overview(){return this.items[this.focused]&&this.items[this.focused].overview}},watch:{focused(i){const o=this.select(this.items[i]&&this.items[i].identifier);o&&o.focus&&o.focus()}},hooks:{ready(){this.alphaIn=1,this.listY=700,this.logoY=80,qn("movie").then(i=>{this.items=i,this.focused=0,this.background=i[this.focused].background}),this.$listen("posterSelect",i=>{this.src=this.items[i].background})},focus(){this.$trigger("focused")}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}},methods:{positionText(i){this.offset=i.h-100}}}),Kn=W.Component("MenuSprite",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.src="assets/menusprite.png",n.x=748,n.y=120,n.w=425,n.h=340,t[2].nodeId||t[2].populate(n),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.y=680,f.x=560,t[3].nodeId||t[3].populate(f);const c=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};if(a.image="assets/menusprite.png",a.x=0,a.w=140,a.h=140,a.map=e.map,typeof c<"u")for(let R in c.config.props)delete a[c.config.props[R]];t[4].nodeId||t[4].populate(a),o=t[4];const u={};u.image="assets/menusprite.png",u.x=0,u.w=140,u.h=140,u.map=e.map,u.frame=e.icon1,t[5]||(t[5]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:u},t[4],e),t[5][Symbol.for("slots")][0]?(o=t[5][Symbol.for("slots")][0],e=t[5]):o=t[5][Symbol.for("children")][0]);const g=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[6]||(t[6]=this.element({parent:o||"root"},e));const p={};if(p.image="assets/menusprite.png",p.x=220,p.w=140,p.h=140,p.map=e.map,p.frame="icon2",typeof g<"u")for(let R in g.config.props)delete p[g.config.props[R]];t[6].nodeId||t[6].populate(p),o=t[6];const h={};h.image="assets/menusprite.png",h.x=220,h.w=140,h.h=140,h.map=e.map,h.frame="icon2",t[7]||(t[7]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:h},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]);const m=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[8]||(t[8]=this.element({parent:o||"root"},e));const y={};if(y.image="assets/menusprite.png",y.x=440,y.w=140,y.h=140,y.map=e.map,y.frame="icon3",typeof m<"u")for(let R in m.config.props)delete y[m.config.props[R]];t[8].nodeId||t[8].populate(y),o=t[8];const b={};b.image="assets/menusprite.png",b.x=440,b.w=140,b.h=140,b.map=e.map,b.frame="icon3",t[9]||(t[9]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:b},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]);const I=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[10]||(t[10]=this.element({parent:o||"root"},e));const w={};if(w.image="assets/menusprite.png",w.x=660,w.w=140,w.h=140,w.map=e.map,w.frame="icon4_unfocus",typeof I<"u")for(let R in I.config.props)delete w[I.config.props[R]];t[10].nodeId||t[10].populate(w),o=t[10];const _={};return _.image="assets/menusprite.png",_.x=660,_.w=140,_.h=140,_.map=e.map,_.frame="icon4_unfocus",t[11]||(t[11]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:_},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[4].set("frame",o.icon1)},function(o,e,s){e[5][Symbol.for("props")].frame=o.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),gt=["menu"],Zn=W.Component("Sprites",{components:{MenuSprite:Kn},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.MenuSprite||e[Symbol.for("components")].MenuSprite;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(typeof r<"u")for(let c in r.config.props)delete n[r.config.props[c]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};return f.show=e.currentSprite==="menu",t[2]||(t[2]=(s.components&&s.components.MenuSprite||e[Symbol.for("components")].MenuSprite||(()=>{console.error("component MenuSprite not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[1].set("show",o.currentSprite==="menu")},function(o,e,s){e[2][Symbol.for("props")].show=o.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const i=gt.indexOf(this.currentSprite);i<gt.length-1?this.currentSprite=gt[i+1]:this.currentSprite=gt[0]}}}),ds=W.Component("Button",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=300,l.h=80,l.color=e.color,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("effects",[o.shader("rounded",{radius:20})])},function(o,e,s){e[0].set("alpha",{transition:o.alpha})},function(o,e,s){e[0].set("scale",{transition:o.scale})},function(o,e,s){e[0].set("z",o.zIndex)},function(o,e,s){e[0].set("rotation",o.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,zIndex:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1,this.zIndex=100},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.zIndex=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),Qn=W.Component("Menu",{components:{Button:ds},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=400,l.h=1080,l.color="{right: '#64748baa', left: '#475569aa'}",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=50,r.y=40,t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.color="#e4e4e7",f.ref="menu1",typeof n<"u")for(let w in n.config.props)delete f[n.config.props[w]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};c.color="#e4e4e7",c.ref="menu1",t[3]||(t[3]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]);const a=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const u={};if(u.color="#e4e4e7",u.y=100,u.ref="menu2",typeof a<"u")for(let w in a.config.props)delete u[a.config.props[w]];t[4].nodeId||t[4].populate(u),o=t[4];const g={};g.color="#e4e4e7",g.y=100,g.ref="menu2",t[5]||(t[5]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:g},t[4],e),t[5][Symbol.for("slots")][0]?(o=t[5][Symbol.for("slots")][0],e=t[5]):o=t[5][Symbol.for("children")][0]);const p=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const h={};if(h.color="#e4e4e7",h.y=200,h.ref="menu3",typeof p<"u")for(let w in p.config.props)delete h[p.config.props[w]];t[6].nodeId||t[6].populate(h),o=t[6];const m={};m.color="#e4e4e7",m.y=200,m.ref="menu3",t[7]||(t[7]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:m},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]);const y=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[8]||(t[8]=this.element({parent:o||"root"},e));const b={};if(b.color="#e4e4e7",b.y=300,b.ref="menu4",typeof y<"u")for(let w in y.config.props)delete b[y.config.props[w]];t[8].nodeId||t[8].populate(b),o=t[8];const I={};return I.color="#e4e4e7",I.y=300,I.ref="menu4",t[9]||(t[9]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:I},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("x",{transition:o.x})}],context:{}},state(){return{x:-360,focused:null}},hooks:{focus(){this.focused=1,this.$trigger("focused"),this.x=0},unfocus(){this.x=-360}},watch:{focused(){const i=this.select(`menu${this.focused}`);i&&i.focus&&i.focus()}},input:{right(){this.parent.focus()},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)}}}),Jn=W.Component("FocusHandling",{components:{Menu:Qn,Button:ds},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=300,r.y=150,t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.color="#ef4444",f.x=0,f.ref="button1",typeof n<"u")for(let N in n.config.props)delete f[n.config.props[N]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};c.color="#ef4444",c.x=0,c.ref="button1",t[3]||(t[3]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]);const a=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const u={};if(u.color="#f97316",u.x=320,u.ref="button2",typeof a<"u")for(let N in a.config.props)delete u[a.config.props[N]];t[4].nodeId||t[4].populate(u),o=t[4];const g={};g.color="#f97316",g.x=320,g.ref="button2",t[5]||(t[5]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:g},t[4],e),t[5][Symbol.for("slots")][0]?(o=t[5][Symbol.for("slots")][0],e=t[5]):o=t[5][Symbol.for("children")][0]);const p=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const h={};if(h.color="#84cc16",h.x=640,h.ref="button3",typeof p<"u")for(let N in p.config.props)delete h[p.config.props[N]];t[6].nodeId||t[6].populate(h),o=t[6];const m={};m.color="#84cc16",m.x=640,m.ref="button3",t[7]||(t[7]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:m},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]);const y=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[8]||(t[8]=this.element({parent:o||"root"},e));const b={};if(b.color="#10b981",b.x=0,b.y=100,b.ref="button4",typeof y<"u")for(let N in y.config.props)delete b[y.config.props[N]];t[8].nodeId||t[8].populate(b),o=t[8];const I={};I.color="#10b981",I.x=0,I.y=100,I.ref="button4",t[9]||(t[9]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:I},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]);const w=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[10]||(t[10]=this.element({parent:o||"root"},e));const _={};if(_.color="#06b6d4",_.y=100,_.x=320,_.ref="button5",typeof w<"u")for(let N in w.config.props)delete _[w.config.props[N]];t[10].nodeId||t[10].populate(_),o=t[10];const R={};R.color="#06b6d4",R.y=100,R.x=320,R.ref="button5",t[11]||(t[11]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:R},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]);const k=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[12]||(t[12]=this.element({parent:o||"root"},e));const x={};if(x.color="#3b82f6",x.y=100,x.x=640,x.ref="button6",typeof k<"u")for(let N in k.config.props)delete x[k.config.props[N]];t[12].nodeId||t[12].populate(x),o=t[12];const T={};T.color="#3b82f6",T.y=100,T.x=640,T.ref="button6",t[13]||(t[13]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:T},t[12],e),t[13][Symbol.for("slots")][0]?(o=t[13][Symbol.for("slots")][0],e=t[13]):o=t[13][Symbol.for("children")][0]);const A=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[14]||(t[14]=this.element({parent:o||"root"},e));const B={};if(B.color="#8b5cf6",B.y=200,B.x=0,B.ref="button7",typeof A<"u")for(let N in A.config.props)delete B[A.config.props[N]];t[14].nodeId||t[14].populate(B),o=t[14];const E={};E.color="#8b5cf6",E.y=200,E.x=0,E.ref="button7",t[15]||(t[15]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:E},t[14],e),t[15][Symbol.for("slots")][0]?(o=t[15][Symbol.for("slots")][0],e=t[15]):o=t[15][Symbol.for("children")][0]);const L=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[16]||(t[16]=this.element({parent:o||"root"},e));const F={};if(F.color="#d946ef",F.y=200,F.x=320,F.ref="button8",typeof L<"u")for(let N in L.config.props)delete F[L.config.props[N]];t[16].nodeId||t[16].populate(F),o=t[16];const U={};U.color="#d946ef",U.y=200,U.x=320,U.ref="button8",t[17]||(t[17]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:U},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]);const S=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[18]||(t[18]=this.element({parent:o||"root"},e));const v={};if(v.color="#f43f5e",v.y=200,v.x=640,v.ref="button9",typeof S<"u")for(let N in S.config.props)delete v[S.config.props[N]];t[18].nodeId||t[18].populate(v),o=t[18];const M={};M.color="#f43f5e",M.y=200,M.x=640,M.ref="button9",t[19]||(t[19]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:M},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]);const D=s.components&&s.components.Menu||e[Symbol.for("components")].Menu;o=t[0],t[20]||(t[20]=this.element({parent:o||"root"},e));const P={};if(P.ref="menu",typeof D<"u")for(let N in D.config.props)delete P[D.config.props[N]];t[20].nodeId||t[20].populate(P),o=t[20];const z={};return z.ref="menu",t[21]||(t[21]=(s.components&&s.components.Menu||e[Symbol.for("components")].Menu||(()=>{console.error("component Menu not found")})).call(null,{props:z},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]),t},effects:[],context:{}},state(){return{focused:null}},hooks:{focus(){this.focused=1,this.$trigger("focused")}},watch:{focused(i){const o=this.select(`button${i}`);o&&o.focus&&o.focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const i=this.focused-1;if(i===0){const o=this.select("menu");o&&o.focus&&o.focus()}else this.focused=Math.max(i,1)},a(){const i=this.select("menu");i&&i.focus&&i.focus()}}}),er=W.Component("Positioning",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=100,r.h=100,r.x=20,r.y=20,r.color="#ecfeff",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=100,n.h=100,n.x=140,n.y=20,n.color="#a5f3fc",t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=100,f.h=100,f.x=260,f.y=20,f.color="#22d3ee",t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=100,c.h=100,c.x=380,c.y=20,c.color="#0891b2",t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=100,a.h=100,a.x=e.x1,a.y=e.y,a.color="#fdf4ff",t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.w=100,u.h=100,u.x=e.x2,u.y=e.y,u.color="#f5d0fe",t[6].nodeId||t[6].populate(u),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.w=100,g.h=100,g.x=e.x3,g.y=e.y,g.color="#e879f9",t[7].nodeId||t[7].populate(g),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.w=100,p.h=100,p.x=e.x4,p.y=e.y,p.color="#c026d3",t[8].nodeId||t[8].populate(p),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.w=100,h.h=100,h.y=260,h.color="#fff7ed",t[9].nodeId||t[9].populate(h),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.w=100,m.h=100,m.y=260,m.color="#fed7aa",t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.w=100,y.h=100,y.y=260,y.color="#fb923c",t[11].nodeId||t[11].populate(y),o=t[0],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.w=100,b.h=100,b.y=260,b.color="#ea580c",t[12].nodeId||t[12].populate(b),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const I={};I.w=800,I.h=800,I.y=20,I.x=800,I.color="#ecfdf5",t[13].nodeId||t[13].populate(I),o=t[13],t[14]||(t[14]=this.element({parent:o||"root"},e));const w={};w.w=600,w.h=600,w.y=20,w.x=20,w.color="#a7f3d0",t[14].nodeId||t[14].populate(w),o=t[14],t[15]||(t[15]=this.element({parent:o||"root"},e));const _={};_.w=400,_.h=400,_.y=100,_.x=20,_.color="#34d399",t[15].nodeId||t[15].populate(_),o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const R={};R.w=200,R.h=100,R.color="#059669",t[16].nodeId||t[16].populate(R),o=t[16],t[17]||(t[17]=this.element({parent:o||"root"},e));const k={};k.w=50,k.h=50,k.color="#065f46",t[17].nodeId||t[17].populate(k),o=t[0],t[18]||(t[18]=this.element({parent:o||"root"},e));const x={};x.w=100,x.h=100,x.y=500,x.x=20,x.color="#e11d48",t[18].nodeId||t[18].populate(x),o=t[0],t[19]||(t[19]=this.element({parent:o||"root"},e));const T={};T.w=200,T.h=200,T.x=300,T.y=600,T.color="#94a3b8",T.z=100,t[19].nodeId||t[19].populate(T);const A=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[19],t[20]||(t[20]=this.element({parent:o||"root"},e));const B={};if(B.content="Lightning!",B.x=100,B.y=140,typeof A<"u")for(let N in A.config.props)delete B[A.config.props[N]];t[20].nodeId||t[20].populate(B),o=t[20];const E={};E.content="Lightning!",E.x=100,E.y=140,t[21]||(t[21]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:E},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]),o=t[19],t[22]||(t[22]=this.element({parent:o||"root"},e));const L={};L.w=300,L.h=100,L.color="#475569",t[22].nodeId||t[22].populate(L);const F=s.components&&s.components.Circle||e[Symbol.for("components")].Circle;o=t[19],t[23]||(t[23]=this.element({parent:o||"root"},e));const U={};if(U.x=150,U.y=150,U.size=100,typeof F<"u")for(let N in F.config.props)delete U[F.config.props[N]];t[23].nodeId||t[23].populate(U),o=t[23];const S={};S.x=150,S.y=150,S.size=100,t[24]||(t[24]=(s.components&&s.components.Circle||e[Symbol.for("components")].Circle||(()=>{console.error("component Circle not found")})).call(null,{props:S},t[23],e),t[24][Symbol.for("slots")][0]?(o=t[24][Symbol.for("slots")][0],e=t[24]):o=t[24][Symbol.for("children")][0]),o=t[0],t[25]||(t[25]=this.element({parent:o||"root"},e));const v={};v.w=300,v.h=300,v.x=300,v.y=600,v.color="#ef444480",t[25].nodeId||t[25].populate(v),o=t[0],t[26]||(t[26]=this.element({parent:o||"root"},e));const M={};M.w=400,M.h=100,M.x=800,M.y=900,M.color="#0284c7",t[26].nodeId||t[26].populate(M),o=t[26],t[27]||(t[27]=this.element({parent:o||"root"},e));const D={};D.w=o.node.width*(42/100),D.h=o.node.height*(30/100),D.y=o.node.height*(5/100),D.x=o.node.width*(1/100),D.color="#075985",t[27].nodeId||t[27].populate(D),o=t[26],t[28]||(t[28]=this.element({parent:o||"root"},e));const P={};P.h=o.node.height*(30/100),P.y=o.node.height*(35/100),P.x=o.node.width*(1/100),P.color="#6b21a8",t[28].nodeId||t[28].populate(P),o=t[26],t[29]||(t[29]=this.element({parent:o||"root"},e));const z={};return z.h=o.node.height*(30/100),z.y=o.node.height*(65/100),z.x=o.node.width*(1/100),z.color="#9f1239",t[29].nodeId||t[29].populate(z),t},effects:[function(o,e,s){e[9].set("x",o.xA)},function(o,e,s){e[10].set("x",o.xB)},function(o,e,s){e[11].set("x",o.xC)},function(o,e,s){e[12].set("x",o.xD)},function(o,e,s){e[16].set("y",(400-100)/2)},function(o,e,s){e[16].set("x",(400-200)/2)},function(o,e,s){e[17].set("y",{transition:o.yNested})},function(o,e,s){e[17].set("x",{transition:o.xNested})},function(o,e,s){e[28].set("w",o.bar2.v)},function(o,e,s){e[29].set("w",{transition:o.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:20+140+100,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const i=parseFloat(this.bar2.v),o=this.bar2.direction==="up"?i+10:i-10;this.bar2.v=o+"%",o>=90&&(this.bar2.direction="down"),o<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}}),tr=W.Component("Colors",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=20,r.y=20,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=100,n.h=100,n.x=0,n.color="#ecfeff",t[2].nodeId||t[2].populate(n),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=100,f.h=100,f.x=120,f.color="#a5f3fc",t[3].nodeId||t[3].populate(f),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=100,c.h=100,c.x=240,c.color="#22d3ee",t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=100,a.h=100,a.x=360,a.color="#0891b2",t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.x=20,u.y=140,t[6].nodeId||t[6].populate(u),o=t[6],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.w=100,g.h=100,g.x=0,g.color="ecfeff",t[7].nodeId||t[7].populate(g),o=t[6],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.w=100,p.h=100,p.x=120,p.color="a5f3fc",t[8].nodeId||t[8].populate(p),o=t[6],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.w=100,h.h=100,h.x=240,h.color="22d3ee",t[9].nodeId||t[9].populate(h),o=t[6],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.w=100,m.h=100,m.x=360,m.color="0891b2",t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.x=20,y.y=260,t[11].nodeId||t[11].populate(y),o=t[11],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.w=100,b.h=100,b.x=0,b.color="#ecfeffaa",t[12].nodeId||t[12].populate(b),o=t[11],t[13]||(t[13]=this.element({parent:o||"root"},e));const I={};I.w=100,I.h=100,I.x=120,I.color="#a5f3fc33",t[13].nodeId||t[13].populate(I),o=t[11],t[14]||(t[14]=this.element({parent:o||"root"},e));const w={};w.w=100,w.h=100,w.x=240,w.color="#22d3ee20",t[14].nodeId||t[14].populate(w),o=t[11],t[15]||(t[15]=this.element({parent:o||"root"},e));const _={};_.w=100,_.h=100,_.x=360,_.color="#0891b2ff",t[15].nodeId||t[15].populate(_),o=t[0],t[16]||(t[16]=this.element({parent:o||"root"},e));const R={};R.x=20,R.y=380,t[16].nodeId||t[16].populate(R),o=t[16],t[17]||(t[17]=this.element({parent:o||"root"},e));const k={};k.w=100,k.h=100,k.x=0,k.color="rgb(236,254,255)",t[17].nodeId||t[17].populate(k),o=t[16],t[18]||(t[18]=this.element({parent:o||"root"},e));const x={};x.w=100,x.h=100,x.x=120,x.color="rgb(165,243,252)",t[18].nodeId||t[18].populate(x),o=t[16],t[19]||(t[19]=this.element({parent:o||"root"},e));const T={};T.w=100,T.h=100,T.x=240,T.color="rgb(34,211,238)",t[19].nodeId||t[19].populate(T),o=t[16],t[20]||(t[20]=this.element({parent:o||"root"},e));const A={};A.w=100,A.h=100,A.x=360,A.color="rgb(8,145,178)",t[20].nodeId||t[20].populate(A),o=t[0],t[21]||(t[21]=this.element({parent:o||"root"},e));const B={};B.x=20,B.y=500,t[21].nodeId||t[21].populate(B),o=t[21],t[22]||(t[22]=this.element({parent:o||"root"},e));const E={};E.w=100,E.h=100,E.x=0,E.color="rgba(236,254,255,0.67)",t[22].nodeId||t[22].populate(E),o=t[21],t[23]||(t[23]=this.element({parent:o||"root"},e));const L={};L.w=100,L.h=100,L.x=120,L.color="rgba(165,243,252,0.2)",t[23].nodeId||t[23].populate(L),o=t[21],t[24]||(t[24]=this.element({parent:o||"root"},e));const F={};F.w=100,F.h=100,F.x=240,F.color="rgba(34,211,238, 0.13)",t[24].nodeId||t[24].populate(F),o=t[21],t[25]||(t[25]=this.element({parent:o||"root"},e));const U={};U.w=100,U.h=100,U.x=360,U.color="rgba(8,145,178,1)",t[25].nodeId||t[25].populate(U),o=t[0],t[26]||(t[26]=this.element({parent:o||"root"},e));const S={};S.x=20,S.y=620,t[26].nodeId||t[26].populate(S),o=t[26],t[27]||(t[27]=this.element({parent:o||"root"},e));const v={};v.w=100,v.h=100,v.x=0,v.color="#000",t[27].nodeId||t[27].populate(v),o=t[26],t[28]||(t[28]=this.element({parent:o||"root"},e));const M={};M.w=100,M.h=100,M.x=120,M.color="#ccc",t[28].nodeId||t[28].populate(M),o=t[26],t[29]||(t[29]=this.element({parent:o||"root"},e));const D={};D.w=100,D.h=100,D.x=240,D.color="#890",t[29].nodeId||t[29].populate(D),o=t[26],t[30]||(t[30]=this.element({parent:o||"root"},e));const P={};P.w=100,P.h=100,P.x=360,P.color="#0f0",t[30].nodeId||t[30].populate(P),o=t[0],t[31]||(t[31]=this.element({parent:o||"root"},e));const z={};z.x=20,z.y=740,t[31].nodeId||t[31].populate(z),o=t[31],t[32]||(t[32]=this.element({parent:o||"root"},e));const N={};N.w=100,N.h=100,N.x=0,N.color="000",t[32].nodeId||t[32].populate(N),o=t[31],t[33]||(t[33]=this.element({parent:o||"root"},e));const $={};$.w=100,$.h=100,$.x=120,$.color="ccc",t[33].nodeId||t[33].populate($),o=t[31],t[34]||(t[34]=this.element({parent:o||"root"},e));const Y={};Y.w=100,Y.h=100,Y.x=240,Y.color="890",t[34].nodeId||t[34].populate(Y),o=t[31],t[35]||(t[35]=this.element({parent:o||"root"},e));const H={};H.w=100,H.h=100,H.x=360,H.color="0f0",t[35].nodeId||t[35].populate(H),o=t[0],t[36]||(t[36]=this.element({parent:o||"root"},e));const X={};X.x=620,X.y=20,t[36].nodeId||t[36].populate(X),o=t[36],t[37]||(t[37]=this.element({parent:o||"root"},e));const K={};K.w=300,K.h=200,K.x=0,t[37].nodeId||t[37].populate(K),o=t[36],t[38]||(t[38]=this.element({parent:o||"root"},e));const Z={};Z.w=300,Z.h=200,Z.x=0,Z.y=250,t[38].nodeId||t[38].populate(Z),o=t[36],t[39]||(t[39]=this.element({parent:o||"root"},e));const G={};G.w=300,G.h=200,G.x=100,G.y=400,t[39].nodeId||t[39].populate(G),o=t[36],t[40]||(t[40]=this.element({parent:o||"root"},e));const Q={};return Q.w=300,Q.h=200,Q.x=0,Q.y=650,t[40].nodeId||t[40].populate(Q),t},effects:[function(o,e,s){e[0].set("color",{transition:o.bg})},function(o,e,s){e[37].set("color",{transition:o.color1})},function(o,e,s){e[38].set("color",{transition:o.color2})},function(o,e,s){e[39].set("color",{transition:o.color3})},function(o,e,s){e[40].set("color",{transition:{value:o.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let i=0;const o=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{i=i+1,i===o.length-1&&(i=0),this.bg=o[i]},2e3)}}}),or=W.Component("Gradients",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.h=1080,r.color="{top: '#0891b2', bottom: '#a5f3fc'}",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.h=1080,n.color="{left: '#dc2626',  right: '#f87171'}",t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.h=1080,f.color="{top: '#0891b2', right: '#f87171'}",t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};return c.h=1080,c.color="{right: 'green', bottom: 'gold'}",t[4].nodeId||t[4].populate(c),t},effects:[function(o,e,s){e[1].set("w",1920/4)},function(o,e,s){e[2].set("w",1920/4)},function(o,e,s){e[2].set("x",1920/4)},function(o,e,s){e[3].set("w",1920/4)},function(o,e,s){e[3].set("x",1920/4*2)},function(o,e,s){e[4].set("w",1920/4)},function(o,e,s){e[4].set("x",1920/4*3)}],context:{}}}),sr=W.Component("Transitions",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=200,r.h=200,r.x=50,r.color="#c4b5fd",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=200,n.h=200,n.x=300,n.color="#a78bfa",t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=200,f.h=200,f.x=550,f.color="#8b5cf6",f.ref="bla",t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=200,c.h=200,c.x=800,c.color="#7c3aed",t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=200,a.h=200,a.x=1050,a.color="#6d28d9",t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.w=200,u.h=200,u.x=1300,u.color="#5b21b6",t[6].nodeId||t[6].populate(u),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};return g.w=200,g.h=200,g.x=1550,g.color="#4c1d95",t[7].nodeId||t[7].populate(g),t},effects:[function(o,e,s){e[1].set("y",{transition:o.y})},function(o,e,s){e[2].set("y",{transition:{value:o.y}})},function(o,e,s){e[3].set("y",{transition:{value:o.y,duration:1e3,start:o.start,end:o.doneTransition3}})},function(o,e,s){e[4].set("y",{transition:{value:o.y,duration:500,delay:1e3,start:o.start,end:o.finished}})},function(o,e,s){e[5].set("y",{transition:{value:o.y,function:"ease-in-out",end:o.finished}})},function(o,e,s){e[6].set("y",{transition:{value:o.y,duration:3e3,function:"ease-in-out-back",end:o.finished}})},function(o,e,s){e[7].set("y",{transition:{value:o.y,duration:800,function:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{ready(){this.$setTimeout(()=>{this.y=1080-50-200},2e3)}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(i,o,e){this.$log.info("Start transition",i.nodeId,o,e)},finished(i,o,e){this.$log.info("Finished transition",i.nodeId,o,e)}}}),ir=W.Component("Alpha",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=100,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=200,n.h=200,n.x=100,n.color="#fff",n.alpha=.2,t[2].nodeId||t[2].populate(n),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=200,f.h=200,f.x=320,f.color="#fff",f.alpha=.4,t[3].nodeId||t[3].populate(f),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=200,c.h=200,c.x=540,c.color="#fff",c.alpha=.6,t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=200,a.h=200,a.x=760,a.color="#fff",a.alpha=.8,t[5].nodeId||t[5].populate(a),o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.w=200,u.h=200,u.x=980,u.color="#fff",u.alpha=1,t[6].nodeId||t[6].populate(u),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.w=200,g.h=200,g.x=100,g.y=320,g.color="#fff",g.alpha=e.alpha,t[7].nodeId||t[7].populate(g),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.w=200,p.h=200,p.x=100,p.y=540,p.color="#fff",t[8].nodeId||t[8].populate(p),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.w=200,h.h=200,h.x=100,h.y=760,h.color="#fff",t[9].nodeId||t[9].populate(h),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.w=428,m.h=234,m.x=1200,m.y=100,m.alpha=1,t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.w=428,y.h=234,y.x=1300,y.alpha=.4,t[11].nodeId||t[11].populate(y),o=t[0],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.w=428,b.h=234,b.x=1200,b.alpha=.1,t[12].nodeId||t[12].populate(b);const I=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const w={};if(w.x=400,w.y=400,w.alpha=.2,w.content="Text with alpha applied directly",typeof I<"u")for(let A in I.config.props)delete w[I.config.props[A]];t[13].nodeId||t[13].populate(w),o=t[13];const _={};_.x=400,_.y=400,_.alpha=.2,_.content="Text with alpha applied directly",t[14]||(t[14]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:_},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const R={};R.alpha=.5,R.x=400,R.y=500,t[15].nodeId||t[15].populate(R);const k=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const x={};if(x.content="Text with alpha applied on parent element",typeof k<"u")for(let A in k.config.props)delete x[k.config.props[A]];t[16].nodeId||t[16].populate(x),o=t[16];const T={};return T.content="Text with alpha applied on parent element",t[17]||(t[17]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:T},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[8].set("alpha",o.alpha)},function(o,e,s){e[9].set("alpha",{transition:{value:o.alpha,duration:1e3,function:"ease-in-out-circ"}})},function(o,e,s){e[10].set("src",o.image)},function(o,e,s){e[11].set("y",100+234-40)},function(o,e,s){e[11].set("src",o.image)},function(o,e,s){e[12].set("y",100+234*2-40*2)},function(o,e,s){e[12].set("src",o.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(i,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),nr=W.Component("Scaling",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=100,r.y=100,r.w=150,r.h=150,r.color="#64748b",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.x=300,n.y=100,n.w=100,n.h=100,n.color="#64748b",n.scale=1.5,t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.x=100,f.y=400,f.w=100,f.h=100,f.color="#b45309",f.scale=e.scale,t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.x=900,c.y=400,c.w=100,c.h=100,t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.x=300,a.y=600,a.w=100,a.h=100,a.color="#059669",t[5].nodeId||t[5].populate(a),o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.x=10,u.y=10,u.h=60,u.w=80,u.color="#0369a1",t[6].nodeId||t[6].populate(u),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.x=1500,g.y=600,g.w=100,g.h=100,g.color="#059669",t[7].nodeId||t[7].populate(g),o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};return p.x=10,p.y=10,p.h=60,p.w=80,p.color="#0369a1",t[8].nodeId||t[8].populate(p),t},effects:[function(o,e,s){e[4].set("src",o.balloon)},function(o,e,s){e[4].set("scale",{transition:{value:o.scale,function:"ease-in-out"}})},function(o,e,s){e[5].set("scale",o.scale2)},function(o,e,s){e[7].set("scale",o.scale2)},function(o,e,s){e[8].set("scale",o.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(i,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),rr=W.Component("Rotation",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=70,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.x=100,n.y=0,n.w=200,n.h=100,n.color="#fee2e2",n.rotation=0,t[2].nodeId||t[2].populate(n),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.x=100,f.y=150,f.w=200,f.h=100,f.color="#fecaca",f.rotation=10,t[3].nodeId||t[3].populate(f),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.x=100,c.y=300,c.w=200,c.h=100,c.color="#fca5a5",c.rotation=20,t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.x=100,a.y=450,a.w=200,a.h=100,a.color="#f87171",a.rotation=30,t[5].nodeId||t[5].populate(a),o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.x=100,u.y=610,u.w=200,u.h=100,u.color="#ef4444",u.rotation=40,t[6].nodeId||t[6].populate(u),o=t[1],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.x=100,g.y=800,g.w=200,g.h=100,g.color="#dc2626",g.rotation=50,t[7].nodeId||t[7].populate(g),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.y=70,p.x=300,t[8].nodeId||t[8].populate(p),o=t[8],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.x=100,h.y=0,h.w=200,h.h=100,h.color="#fee2e2",h.rotation=60,t[9].nodeId||t[9].populate(h),o=t[8],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.x=100,m.y=150,m.w=200,m.h=100,m.color="#fecaca",m.rotation=70,t[10].nodeId||t[10].populate(m),o=t[8],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.x=100,y.y=300,y.w=200,y.h=100,y.color="#fca5a5",y.rotation=80,t[11].nodeId||t[11].populate(y),o=t[8],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.x=100,b.y=450,b.w=200,b.h=100,b.color="#f87171",b.rotation=90,t[12].nodeId||t[12].populate(b),o=t[8],t[13]||(t[13]=this.element({parent:o||"root"},e));const I={};I.x=100,I.y=610,I.w=200,I.h=100,I.color="#ef4444",I.rotation=100,t[13].nodeId||t[13].populate(I),o=t[8],t[14]||(t[14]=this.element({parent:o||"root"},e));const w={};w.x=100,w.y=800,w.w=200,w.h=100,w.color="#dc2626",w.rotation=100,t[14].nodeId||t[14].populate(w),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const _={};_.y=70,_.x=600,t[15].nodeId||t[15].populate(_),o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const R={};R.x=100,R.y=0,R.w=200,R.h=100,R.color="#fee2e2",R.rotation=110,t[16].nodeId||t[16].populate(R),o=t[15],t[17]||(t[17]=this.element({parent:o||"root"},e));const k={};k.x=100,k.y=150,k.w=200,k.h=100,k.color="#fecaca",k.rotation=120,t[17].nodeId||t[17].populate(k),o=t[15],t[18]||(t[18]=this.element({parent:o||"root"},e));const x={};x.x=100,x.y=300,x.w=200,x.h=100,x.color="#fca5a5",x.rotation=130,t[18].nodeId||t[18].populate(x),o=t[15],t[19]||(t[19]=this.element({parent:o||"root"},e));const T={};T.x=100,T.y=450,T.w=200,T.h=100,T.color="#f87171",T.rotation=140,t[19].nodeId||t[19].populate(T),o=t[15],t[20]||(t[20]=this.element({parent:o||"root"},e));const A={};A.x=100,A.y=610,A.w=200,A.h=100,A.color="#ef4444",A.rotation=150,t[20].nodeId||t[20].populate(A),o=t[15],t[21]||(t[21]=this.element({parent:o||"root"},e));const B={};B.x=100,B.y=800,B.w=200,B.h=100,B.color="#dc2626",B.rotation=160,t[21].nodeId||t[21].populate(B),o=t[0],t[22]||(t[22]=this.element({parent:o||"root"},e));const E={};E.y=70,E.x=900,t[22].nodeId||t[22].populate(E),o=t[22],t[23]||(t[23]=this.element({parent:o||"root"},e));const L={};L.x=100,L.y=0,L.w=200,L.h=100,L.color="#fee2e2",L.rotation=170,t[23].nodeId||t[23].populate(L),o=t[22],t[24]||(t[24]=this.element({parent:o||"root"},e));const F={};F.x=100,F.y=150,F.w=200,F.h=100,F.color="#fecaca",F.rotation=180,t[24].nodeId||t[24].populate(F),o=t[22],t[25]||(t[25]=this.element({parent:o||"root"},e));const U={};U.x=100,U.y=300,U.w=200,U.h=100,U.color="#fca5a5",U.rotation=190,t[25].nodeId||t[25].populate(U),o=t[22],t[26]||(t[26]=this.element({parent:o||"root"},e));const S={};S.x=100,S.y=450,S.w=200,S.h=100,S.color="#f87171",S.rotation=200,t[26].nodeId||t[26].populate(S),o=t[22],t[27]||(t[27]=this.element({parent:o||"root"},e));const v={};v.x=100,v.y=610,v.w=200,v.h=100,v.color="#ef4444",v.rotation=210,t[27].nodeId||t[27].populate(v),o=t[22],t[28]||(t[28]=this.element({parent:o||"root"},e));const M={};M.x=100,M.y=800,M.w=200,M.h=100,M.color="#dc2626",M.rotation=220,t[28].nodeId||t[28].populate(M),o=t[0],t[29]||(t[29]=this.element({parent:o||"root"},e));const D={};D.y=70,D.x=1200,t[29].nodeId||t[29].populate(D),o=t[29],t[30]||(t[30]=this.element({parent:o||"root"},e));const P={};P.x=100,P.y=0,P.w=200,P.h=100,P.color="#fee2e2",P.rotation=230,t[30].nodeId||t[30].populate(P),o=t[29],t[31]||(t[31]=this.element({parent:o||"root"},e));const z={};z.x=100,z.y=150,z.w=200,z.h=100,z.color="#fecaca",z.rotation=240,t[31].nodeId||t[31].populate(z),o=t[29],t[32]||(t[32]=this.element({parent:o||"root"},e));const N={};N.x=100,N.y=300,N.w=200,N.h=100,N.color="#fca5a5",N.rotation=250,t[32].nodeId||t[32].populate(N),o=t[29],t[33]||(t[33]=this.element({parent:o||"root"},e));const $={};$.x=100,$.y=450,$.w=200,$.h=100,$.color="#f87171",$.rotation=260,t[33].nodeId||t[33].populate($),o=t[29],t[34]||(t[34]=this.element({parent:o||"root"},e));const Y={};Y.x=100,Y.y=610,Y.w=200,Y.h=100,Y.color="#ef4444",Y.rotation=270,t[34].nodeId||t[34].populate(Y),o=t[29],t[35]||(t[35]=this.element({parent:o||"root"},e));const H={};H.x=100,H.y=800,H.w=200,H.h=100,H.color="#dc2626",H.rotation=280,t[35].nodeId||t[35].populate(H),o=t[0],t[36]||(t[36]=this.element({parent:o||"root"},e));const X={};X.y=70,X.x=1500,t[36].nodeId||t[36].populate(X),o=t[36],t[37]||(t[37]=this.element({parent:o||"root"},e));const K={};K.x=100,K.y=0,K.w=200,K.h=100,K.color="#fee2e2",K.rotation=290,t[37].nodeId||t[37].populate(K),o=t[36],t[38]||(t[38]=this.element({parent:o||"root"},e));const Z={};Z.x=100,Z.y=150,Z.w=200,Z.h=100,Z.color="#fecaca",Z.rotation=300,t[38].nodeId||t[38].populate(Z),o=t[36],t[39]||(t[39]=this.element({parent:o||"root"},e));const G={};G.x=100,G.y=300,G.w=200,G.h=100,G.color="#fca5a5",G.rotation=310,t[39].nodeId||t[39].populate(G),o=t[36],t[40]||(t[40]=this.element({parent:o||"root"},e));const Q={};Q.x=100,Q.y=450,Q.w=200,Q.h=100,Q.color="#f87171",Q.rotation=320,t[40].nodeId||t[40].populate(Q),o=t[36],t[41]||(t[41]=this.element({parent:o||"root"},e));const ne={};ne.x=100,ne.y=610,ne.w=200,ne.h=100,ne.color="#ef4444",ne.rotation=330,t[41].nodeId||t[41].populate(ne),o=t[36],t[42]||(t[42]=this.element({parent:o||"root"},e));const J={};J.x=100,J.y=800,J.w=200,J.h=100,J.color="#dc2626",J.rotation=340,t[42].nodeId||t[42].populate(J),o=t[0],t[43]||(t[43]=this.element({parent:o||"root"},e));const V={};V.x=200,V.y=200,V.w=400,V.h=400,V.color="#0891b2",V.rotation=e.rotation1,t[43].nodeId||t[43].populate(V),o=t[0],t[44]||(t[44]=this.element({parent:o||"root"},e));const he={};he.x=800,he.y=200,he.w=400,he.h=400,he.color="#0891b2",t[44].nodeId||t[44].populate(he),o=t[0],t[45]||(t[45]=this.element({parent:o||"root"},e));const ae={};return ae.x=1400,ae.y=200,ae.w=400,ae.h=400,ae.color="#0891b2",t[45].nodeId||t[45].populate(ae),t},effects:[function(o,e,s){e[44].set("rotation",o.rotation2)},function(o,e,s){e[45].set("rotation",{transition:o.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){this.$setInterval(()=>{const i=this.rotation2+10;this.rotation2=i<=360?i:0},800),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},2e3)}}}),lr=W.Component("KeyInput",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.x=525,l.y=130,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=200,r.h=200,t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=180,n.h=180,n.x=10,n.y=10,t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=180,f.h=180,f.x=230,f.y=10,t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=180,c.h=180,c.x=450,c.y=10,t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=180,a.h=180,a.x=670,a.y=10,t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.w=180,u.h=180,u.x=10,u.y=220,t[6].nodeId||t[6].populate(u),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.w=180,g.h=180,g.x=230,g.y=220,t[7].nodeId||t[7].populate(g),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.w=180,p.h=180,p.x=450,p.y=220,t[8].nodeId||t[8].populate(p),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.w=180,h.h=180,h.x=670,h.y=220,t[9].nodeId||t[9].populate(h),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.w=180,m.h=180,m.x=10,m.y=430,t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.w=180,y.h=180,y.x=230,y.y=430,t[11].nodeId||t[11].populate(y),o=t[0],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.w=180,b.h=180,b.x=450,b.y=430,t[12].nodeId||t[12].populate(b),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const I={};I.w=180,I.h=180,I.x=670,I.y=430,t[13].nodeId||t[13].populate(I),o=t[0],t[14]||(t[14]=this.element({parent:o||"root"},e));const w={};w.w=180,w.h=180,w.x=10,w.y=640,t[14].nodeId||t[14].populate(w),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const _={};_.w=180,_.h=180,_.x=230,_.y=640,t[15].nodeId||t[15].populate(_),o=t[0],t[16]||(t[16]=this.element({parent:o||"root"},e));const R={};R.w=180,R.h=180,R.x=450,R.y=640,t[16].nodeId||t[16].populate(R),o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const k={};return k.w=180,k.h=180,k.x=670,k.y=640,t[17].nodeId||t[17].populate(k),t},effects:[function(o,e,s){e[1].set("color",o.focusColor)},function(o,e,s){e[1].set("x",o.focusedX*220)},function(o,e,s){e[1].set("y",o.focusedY*210)},function(o,e,s){e[2].set("color",o.blockColor)},function(o,e,s){e[3].set("color",o.blockColor)},function(o,e,s){e[4].set("color",o.blockColor)},function(o,e,s){e[5].set("color",o.blockColor)},function(o,e,s){e[6].set("color",o.blockColor)},function(o,e,s){e[7].set("color",o.blockColor)},function(o,e,s){e[8].set("color",o.blockColor)},function(o,e,s){e[9].set("color",o.blockColor)},function(o,e,s){e[10].set("color",o.blockColor)},function(o,e,s){e[11].set("color",o.blockColor)},function(o,e,s){e[12].set("color",o.blockColor)},function(o,e,s){e[13].set("color",o.blockColor)},function(o,e,s){e[14].set("color",o.blockColor)},function(o,e,s){e[15].set("color",o.blockColor)},function(o,e,s){e[16].set("color",o.blockColor)},function(o,e,s){e[17].set("color",o.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(i){const o=this.focusedX-1;o===-1?this.parent.focus(i):this.focusedX=Math.max(o,0)},right(i){const o=this.focusedX+1;o===4?this.parent.focus(i):this.focusedX=Math.min(o,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(i){const o=parseInt(i.key);isNaN(o)?this.parent.focus(i):(this.focusedX=Math.max(0,(o-1)%4),this.focusedY=Math.max(0,Math.ceil(o/4)-1))}}}),Ot=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],$t=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],fr=W.Component("Texts",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.x=100,l.y=100,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.content="Default text",n["@loaded"]=e.textLoaded&&e.textLoaded.bind(e),typeof r<"u")for(let z in r.config.props)delete n[r.config.props[z]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};f.content="Default text",f["@loaded"]=e.textLoaded&&e.textLoaded.bind(e),t[2]||(t[2]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.content="123456",a.x=400,typeof c<"u")for(let z in c.config.props)delete a[c.config.props[z]];t[3].nodeId||t[3].populate(a),o=t[3];const u={};u.content="123456",u.x=400,t[4]||(t[4]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]);const g=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.content="Text with a different fontsize",p.y=120,p.font="raleway",typeof g<"u")for(let z in g.config.props)delete p[g.config.props[z]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};h.content="Text with a different fontsize",h.size=e.size,h.y=120,h.font="raleway",t[6]||(t[6]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]);const m=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const y={};if(y.content="Text with a different color",y.size=50,y.y=250,typeof m<"u")for(let z in m.config.props)delete y[m.config.props[z]];t[7].nodeId||t[7].populate(y),o=t[7];const b={};b.content="Text with a different color",b.size=50,b.color=e.color,b.y=250,t[8]||(t[8]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:b},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]);const I=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const w={};if(w.content="Letterspacing",w.size=50,w.color="#38bdf8",w.y=450,w.letterspacing=40,typeof I<"u")for(let z in I.config.props)delete w[I.config.props[z]];t[9].nodeId||t[9].populate(w),o=t[9];const _={};_.content="Letterspacing",_.size=50,_.color="#38bdf8",_.y=450,_.letterspacing=40,t[10]||(t[10]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:_},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const R={};R.w=800,R.h=100,R.y=550,R.color="#94a3b8",t[11].nodeId||t[11].populate(R);const k=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[11],t[12]||(t[12]=this.element({parent:o||"root"},e));const x={};if(x.content="Text align center",x.size=50,x.y=15,x.color="#bae6fd",x.align="center",x.wordwrap=800,typeof k<"u")for(let z in k.config.props)delete x[k.config.props[z]];t[12].nodeId||t[12].populate(x),o=t[12];const T={};T.content="Text align center",T.size=50,T.y=15,T.color="#bae6fd",T.align="center",T.wordwrap=800,t[13]||(t[13]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:T},t[12],e),t[13][Symbol.for("slots")][0]?(o=t[13][Symbol.for("slots")][0],e=t[13]):o=t[13][Symbol.for("children")][0]),o=t[0],t[14]||(t[14]=this.element({parent:o||"root"},e));const A={};A.w=800,A.h=200,A.x=900,A.y=550,A.color="#94a3b8",t[14].nodeId||t[14].populate(A);const B=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[14],t[15]||(t[15]=this.element({parent:o||"root"},e));const E={};if(E.content=e.longText,E.size=40,E.color="#bae6fd",E.wordwrap=800,E.maxlines=5,E.textoverflow="!!!",typeof B<"u")for(let z in B.config.props)delete E[B.config.props[z]];t[15].nodeId||t[15].populate(E),o=t[15];const L={};L.content=e.longText,L.size=40,L.color="#bae6fd",L.wordwrap=800,L.maxlines=5,L.textoverflow="!!!",t[16]||(t[16]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:L},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]),o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const F={};F.w=800,F.h=120,F.x=900,F.y=800,F.color="#94a3b8",t[17].nodeId||t[17].populate(F);const U=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[17],t[18]||(t[18]=this.element({parent:o||"root"},e));const S={};if(S.content=e.longText,S.size=40,S.color="#bae6fd",S.wordwrap=800,S.maxlines=2,S.lineheight=60,S.textoverflow=!1,typeof U<"u")for(let z in U.config.props)delete S[U.config.props[z]];t[18].nodeId||t[18].populate(S),o=t[18];const v={};v.content=e.longText,v.size=40,v.color="#bae6fd",v.wordwrap=800,v.maxlines=2,v.lineheight=60,v.textoverflow=!1,t[19]||(t[19]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:v},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]);const M=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[20]||(t[20]=this.element({parent:o||"root"},e));const D={};if(D.size=50,D.y=750,D.font="opensans",typeof M<"u")for(let z in M.config.props)delete D[M.config.props[z]];t[20].nodeId||t[20].populate(D),o=t[20];const P={};return P.content=e.character,P.size=50,P.color=e.color,P.y=750,P.font="opensans",t[21]||(t[21]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:P},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[5].set("size",o.size)},function(o,e,s){e[6][Symbol.for("props")].size=o.size},function(o,e,s){e[7].set("color",o.color)},function(o,e,s){e[8][Symbol.for("props")].color=o.color},function(o,e,s){e[20].set("content",o.character)},function(o,e,s){e[20].set("color",o.color)},function(o,e,s){e[21][Symbol.for("props")].content=o.character},function(o,e,s){e[21][Symbol.for("props")].color=o.color}],context:{}},state(){return{color:Ot[0],size:10,character:$t[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo."}},hooks:{ready(){let i=0;this.$setInterval(()=>{i++,i>Ot.length-1&&(i=0),this.color=Ot[i],this.size=10*(i*2+1)},1e3);let o=0;this.$setInterval(()=>{o++,o>$t.length-1&&(o=0),this.character=$t[o]},1400)}},methods:{textLoaded(i){this.$log.info(`Image loaded with w: ${i.w} and h: ${i.h}`)}}}),yt=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],ar=W.Component("Images",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.src="assets/lightningbolt.png",r.w=428,r.h=234,r.x=100,r.y=100,t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",n.w=428,n.h=234,n.x=100,n.y=400,t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=428,f.h=234,f.x=100,f.y=700,f["@loaded"]=e.imageLoaded&&e.imageLoaded.bind(e),t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.color="{top: 'red', bottom: 'gold'}",c.src="assets/lightningbolt.png",c.w=428,c.h=234,c.x=600,c.y=100,t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.x=600,a.y=400,a.w=428,a.h=234,t[5].nodeId||t[5].populate(a),o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};return u.src="assets/lightningbolt.png",u.w=856,u.h=468,t[6].nodeId||t[6].populate(u),t},effects:[function(o,e,s){e[3].set("src",o.image)},function(o,e,s){e[5].set("clipping",o.clipping)}],context:{}},state(){return{image:yt[0],clipping:!0}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===yt[0]?yt[1]:yt[0],this.clipping=!this.clipping},2e3)}},methods:{imageLoaded(i){this.$log.info(`Image loaded with w: ${i.w} and h: ${i.h}`)}}}),ct=W.Component("Square",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=e.size,l.h=e.size,l.color="#86198f",t[0].nodeId||t[0].populate(l),t},effects:[],context:{}},props:[{key:"size",default:80}]}),us=W.Component("Card",{components:{Square:ct},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=e.w,l.h=e.h,l.color="#0891b2",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.x=80,n.y=80,typeof r<"u")for(let g in r.config.props)delete n[r.config.props[g]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};f.x=80,f.y=80,t[2]||(t[2]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.x=20,a.y=20,a.size=40,typeof c<"u")for(let g in c.config.props)delete a[c.config.props[g]];t[3].nodeId||t[3].populate(a),o=t[3];const u={};return u.x=20,u.y=20,u.size=40,t[4]||(t[4]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]),t},effects:[],context:{}},props:["size"],computed:{w(){return this.size==="large"?400:200},h(){return this.size==="large"?500:300}}}),cr=W.Component("Components",{components:{Square:ct,Card:us},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.x=100,n.y=100,n.size=50,typeof r<"u")for(let T in r.config.props)delete n[r.config.props[T]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};f.x=100,f.y=100,f.size=50,t[2]||(t[2]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.x=100,a.y=200,a.size=100,typeof c<"u")for(let T in c.config.props)delete a[c.config.props[T]];t[3].nodeId||t[3].populate(a),o=t[3];const u={};u.x=100,u.y=200,u.size=100,t[4]||(t[4]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]);const g=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const p={};if(p.x=100,p.y=350,p.size=200,typeof g<"u")for(let T in g.config.props)delete p[g.config.props[T]];t[5].nodeId||t[5].populate(p),o=t[5];const h={};h.x=100,h.y=350,h.size=200,t[6]||(t[6]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]);const m=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const y={};if(y.y=600,y.size=50,typeof m<"u")for(let T in m.config.props)delete y[m.config.props[T]];t[7].nodeId||t[7].populate(y),o=t[7];const b={};b.x={transition:e.x},b.y=600,b.size=50,t[8]||(t[8]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:b},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]);const I=s.components&&s.components.Card||e[Symbol.for("components")].Card;o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const w={};if(w.x=500,w.y=100,typeof I<"u")for(let T in I.config.props)delete w[I.config.props[T]];t[9].nodeId||t[9].populate(w),o=t[9];const _={};_.x=500,_.y=100,t[10]||(t[10]=(s.components&&s.components.Card||e[Symbol.for("components")].Card||(()=>{console.error("component Card not found")})).call(null,{props:_},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]);const R=s.components&&s.components.Card||e[Symbol.for("components")].Card;o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const k={};if(k.x=500,k.y=500,k.size="large",typeof R<"u")for(let T in R.config.props)delete k[R.config.props[T]];t[11].nodeId||t[11].populate(k),o=t[11];const x={};return x.x=500,x.y=500,x.size="large",t[12]||(t[12]=(s.components&&s.components.Card||e[Symbol.for("components")].Card||(()=>{console.error("component Card not found")})).call(null,{props:x},t[11],e),t[12][Symbol.for("slots")][0]?(o=t[12][Symbol.for("slots")][0],e=t[12]):o=t[12][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[7].set("x",{transition:o.x})},function(o,e,s){e[8][Symbol.for("props")].x={transition:o.x}}],context:{}},state(){return{x:100}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100},2e3)}}}),de=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],dr=W.Component("ForLoop",{components:{Square:ct},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=20,t[1].nodeId||t[1].populate(r),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const n={};n.y=120,t[3].nodeId||t[3].populate(n),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.y=220,t[5].nodeId||t[5].populate(f),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const c={};c.y=320,t[7].nodeId||t[7].populate(c),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const a={};a.y=420,t[10].nodeId||t[10].populate(a),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const u={};u.y=520,t[13].nodeId||t[13].populate(u),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const g={};g.y=620,t[15].nodeId||t[15].populate(g),o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const p={};p.y=720,t[17].nodeId||t[17].populate(p),o=t[0],t[19]||(t[19]=this.element({parent:o||"root"},e));const h={};h.y=720,h.x=700,t[19].nodeId||t[19].populate(h),o=t[0],t[21]||(t[21]=this.element({parent:o||"root"},e));const m={};m.y=920,t[21].nodeId||t[21].populate(m),o=t[0],t[24]||(t[24]=this.element({parent:o||"root"},e));const y={};return y.y=920,y.x=700,t[24].nodeId||t[24].populate(y),t},effects:[function(o,e,s){parent=e[1];const t=o.collection1,l=[];for(let r=0;r<t.length;r++){parent=e[1],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString()),parent=e[1],e[2]=e[2]||{},e[2][n.key]||(e[2][n.key]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.x=n.item,f.color="#4d7c0f",e[2][n.key].nodeId||e[2][n.key].populate(f)}e[2]&&Object.keys(e[2]).forEach(r=>{l.indexOf(r)===-1&&(e[2][r].delete&&e[2][r].delete(),e[2][r].destroy&&e[2][r].destroy(),delete e[2][r])})},function(o,e,s){parent=e[3];const t=o.collection2,l=[];for(let r=0;r<t.length;r++){parent=e[3],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.id),parent=e[3],e[4]=e[4]||{},e[4][n.item.id]||(e[4][n.item.id]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color=n.item.color,f.key=n.item.id,e[4][n.item.id].nodeId||e[4][n.item.id].populate(f),e[4][n.item.id].set("x",n.item.x*n.index)}e[4]&&Object.keys(e[4]).forEach(r=>{l.indexOf(r)===-1&&(e[4][r].delete&&e[4][r].delete(),e[4][r].destroy&&e[4][r].destroy(),delete e[4][r])})},function(o,e,s){parent=e[5];const t=o.collection3,l=[];for(let r=0;r<t.length;r++){parent=e[5],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString()),parent=e[5],e[6]=e[6]||{},e[6][n.key]||(e[6][n.key]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color=n.item.color,e[6][n.key].nodeId||e[6][n.key].populate(f),e[6][n.key].set("x",n.item.x)}e[6]&&Object.keys(e[6]).forEach(r=>{l.indexOf(r)===-1&&(e[6][r].delete&&e[6][r].delete(),e[6][r].destroy&&e[6][r].destroy(),delete e[6][r])})},function(o,e,s){parent=e[7];const t=o.collection2,l=[];for(let r=0;r<t.length;r++){parent=e[7],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString());const f=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[8]=e[8]||{},e[8][n.key]||(e[8][n.key]=this.element({parent:parent||"root"},o));const c={};if(typeof f<"u")for(let u in f.config.props)delete c[f.config.props[u]];e[8][n.key].nodeId||e[8][n.key].populate(c),e[9]=e[9]||{},parent=e[8][n.key];const a={};a.x=n.item.x*n.index,a.ref="square"+n.index,a.alpha=n.alpha,e[9][n.key]||(e[9][n.key]=(s.components&&s.components.Square||o[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:a},e[8][n.key],o),e[9][n.key][Symbol.for("slots")][0]?(parent=e[9][n.key][Symbol.for("slots")][0],o=e[9][n.key]):parent=e[9][n.key][Symbol.for("children")][0]),e[8][n.key].set("x",n.item.x*n.index),e[8][n.key].set("ref","square"+n.index),e[8][n.key].set("alpha",n.alpha),e[9][n.key][Symbol.for("props")].x=n.item.x*n.index,e[9][n.key][Symbol.for("props")].ref="square"+n.index,e[9][n.key][Symbol.for("props")].alpha=n.alpha}e[9]&&Object.keys(e[9]).forEach(r=>{l.indexOf(r)===-1&&(e[9][r].delete&&e[9][r].delete(),e[9][r].destroy&&e[9][r].destroy(),delete e[9][r])})},function(o,e,s){parent=e[10];const t=o.collection3,l=[];for(let r=0;r<t.length;r++){parent=e[10],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.color);const f=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[11]=e[11]||{},e[11][n.item.color]||(e[11][n.item.color]=this.element({parent:parent||"root"},o));const c={};if(c.key=n.item.color,typeof f<"u")for(let u in f.config.props)delete c[f.config.props[u]];e[11][n.item.color].nodeId||e[11][n.item.color].populate(c),e[12]=e[12]||{},parent=e[11][n.item.color];const a={};a.x=n.item.x,a.key=n.item.color,a.alpha=n.alpha,e[12][n.item.color]||(e[12][n.item.color]=(s.components&&s.components.Square||o[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:a},e[11][n.item.color],o),e[12][n.item.color][Symbol.for("slots")][0]?(parent=e[12][n.item.color][Symbol.for("slots")][0],o=e[12][n.item.color]):parent=e[12][n.item.color][Symbol.for("children")][0]),e[11][n.item.color].set("x",n.item.x),e[11][n.item.color].set("alpha",n.alpha),e[12][n.item.color][Symbol.for("props")].x=n.item.x,e[12][n.item.color][Symbol.for("props")].alpha=n.alpha}e[12]&&Object.keys(e[12]).forEach(r=>{l.indexOf(r)===-1&&(e[12][r].delete&&e[12][r].delete(),e[12][r].destroy&&e[12][r].destroy(),delete e[12][r])})},function(o,e,s){parent=e[13];const t=o.collection1,l=[];for(let r=0;r<t.length;r++){parent=e[13],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString()),parent=e[13],e[14]=e[14]||{},e[14][n.key]||(e[14][n.key]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color="#eab308",e[14][n.key].nodeId||e[14][n.key].populate(f),e[14][n.key].set("x",n.item),e[14][n.key].set("alpha",n.alpha)}e[14]&&Object.keys(e[14]).forEach(r=>{l.indexOf(r)===-1&&(e[14][r].delete&&e[14][r].delete(),e[14][r].destroy&&e[14][r].destroy(),delete e[14][r])})},function(o,e,s){parent=e[15];const t=o.collection2,l=[];for(let r=0;r<t.length;r++){parent=e[15],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.id),parent=e[15],e[16]=e[16]||{},e[16][n.item.id]||(e[16][n.item.id]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color=n.item.color,f.key=n.item.id,e[16][n.item.id].nodeId||e[16][n.item.id].populate(f),e[16][n.item.id].set("x",n.item.x),e[16][n.item.id].set("alpha",n.alpha)}e[16]&&Object.keys(e[16]).forEach(r=>{l.indexOf(r)===-1&&(e[16][r].delete&&e[16][r].delete(),e[16][r].destroy&&e[16][r].destroy(),delete e[16][r])})},function(o,e,s){parent=e[17];const t=o.collection4,l=[];for(let r=0;r<t.length;r++){parent=e[17],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.id),parent=e[17],e[18]=e[18]||{},e[18][n.item.id]||(e[18][n.item.id]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color="#06b6d4",f.key=n.item.id,e[18][n.item.id].nodeId||e[18][n.item.id].populate(f),e[18][n.item.id].set("x",n.item.x)}e[18]&&Object.keys(e[18]).forEach(r=>{l.indexOf(r)===-1&&(e[18][r].delete&&e[18][r].delete(),e[18][r].destroy&&e[18][r].destroy(),delete e[18][r])})},function(o,e,s){parent=e[19];const t=o.collection4,l=[];for(let r=0;r<t.length;r++){parent=e[19],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString()),parent=e[19],e[20]=e[20]||{},e[20][n.key]||(e[20][n.key]=this.element({parent:parent||"root"},o));const f={};f.w=80,f.h=80,f.color="#8b5cf6",e[20][n.key].nodeId||e[20][n.key].populate(f),e[20][n.key].set("x",n.item.x)}e[20]&&Object.keys(e[20]).forEach(r=>{l.indexOf(r)===-1&&(e[20][r].delete&&e[20][r].delete(),e[20][r].destroy&&e[20][r].destroy(),delete e[20][r])})},function(o,e,s){parent=e[21];const t=o.collection4,l=[];for(let r=0;r<t.length;r++){parent=e[21],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.id);const f=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[22]=e[22]||{},e[22][n.item.id]||(e[22][n.item.id]=this.element({parent:parent||"root"},o));const c={};if(c.w=80,c.h=80,c.key=n.item.id,typeof f<"u")for(let u in f.config.props)delete c[f.config.props[u]];e[22][n.item.id].nodeId||e[22][n.item.id].populate(c),e[23]=e[23]||{},parent=e[22][n.item.id];const a={};a.w=80,a.h=80,a.x=n.item.x,a.key=n.item.id,e[23][n.item.id]||(e[23][n.item.id]=(s.components&&s.components.Square||o[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:a},e[22][n.item.id],o),e[23][n.item.id][Symbol.for("slots")][0]?(parent=e[23][n.item.id][Symbol.for("slots")][0],o=e[23][n.item.id]):parent=e[23][n.item.id][Symbol.for("children")][0]),e[22][n.item.id].set("x",n.item.x),e[23][n.item.id][Symbol.for("props")].x=n.item.x}e[23]&&Object.keys(e[23]).forEach(r=>{l.indexOf(r)===-1&&(e[23][r].delete&&e[23][r].delete(),e[23][r].destroy&&e[23][r].destroy(),delete e[23][r])})},function(o,e,s){parent=e[24];const t=o.collection4,l=[];for(let r=0;r<t.length;r++){parent=e[24],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString());const f=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[25]=e[25]||{},e[25][n.key]||(e[25][n.key]=this.element({parent:parent||"root"},o));const c={};if(c.w=80,c.h=80,typeof f<"u")for(let u in f.config.props)delete c[f.config.props[u]];e[25][n.key].nodeId||e[25][n.key].populate(c),e[26]=e[26]||{},parent=e[25][n.key];const a={};a.w=80,a.h=80,a.x=n.item.x,e[26][n.key]||(e[26][n.key]=(s.components&&s.components.Square||o[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:a},e[25][n.key],o),e[26][n.key][Symbol.for("slots")][0]?(parent=e[26][n.key][Symbol.for("slots")][0],o=e[26][n.key]):parent=e[26][n.key][Symbol.for("children")][0]),e[25][n.key].set("x",n.item.x),e[26][n.key][Symbol.for("props")].x=n.item.x}e[26]&&Object.keys(e[26]).forEach(r=>{l.indexOf(r)===-1&&(e[26][r].delete&&e[26][r].delete(),e[26][r].destroy&&e[26][r].destroy(),delete e[26][r])})}],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:de[0]},{id:"block2",x:100,color:de[1]},{id:"block3",x:200,color:de[2]},{id:"block4",x:300,color:de[3]},{id:"block5",x:400,color:de[4]},{id:"block6",x:500,color:de[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=de[5],this.collection2[1].color=de[4],this.collection2[2].color=de[3],this.collection2[3].color=de[2],this.collection2[4].color=de[1],this.collection2[5].color=de[0]},4e3);let i=0;const o=this.$setInterval(()=>{this.collection3.push({x:i*100,color:de[i]}),i++,i===de.length&&clearInterval(o)},1e3);this.$setTimeout(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:"four"},{x:500,id:"five"}]},2e3)}}}),ur=W.Component("Effects",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=160,r.h=160,r.x=40,r.y=40,r.color="#fb923c",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=160,n.h=160,n.x=240,n.y=40,n.color="#d97706",t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=160,f.h=160,f.x=440,f.y=40,f.color="#b45309",t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=160,c.h=160,c.x=640,c.y=40,c.color="#78350f",t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.w=160,a.h=160,a.x=40,a.y=240,a.color="#65a30d",t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.w=300,u.h=300,u.x=40,u.y=440,u.color="#0c4a6e",t[6].nodeId||t[6].populate(u),o=t[6],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.w=200,g.h=200,g.x=50,g.y=50,g.color="#0284c7",t[7].nodeId||t[7].populate(g),o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.w=100,p.h=100,p.x=50,p.y=50,p.color="#38bdf8",t[8].nodeId||t[8].populate(p),o=t[8],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.w=40,h.h=40,h.x=30,h.y=30,h.color="#bae6fd",t[9].nodeId||t[9].populate(h),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.w=160,m.h=160,m.x=840,m.y=40,m.color="#3b82f6",t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};return y.w=160,y.h=160,y.x=1040,y.y=40,y.color="#500724",t[11].nodeId||t[11].populate(y),t},effects:[function(o,e,s){e[1].set("effects",[o.shader("radius",{radius:44})])},function(o,e,s){e[2].set("effects",[o.shader("radius",{radius:25})])},function(o,e,s){e[3].set("effects",[o.shader("radius",{radius:80})])},function(o,e,s){e[4].set("effects",[o.shader("radius",{radius:10})])},function(o,e,s){e[5].set("effects",[o.shader("radius",{radius:o.radius})])},function(o,e,s){e[6].set("effects",[o.shader("radius",{radius:30})])},function(o,e,s){e[7].set("effects",[o.shader("radius",{radius:40})])},function(o,e,s){e[8].set("effects",[o.shader("radius",{radius:50})])},function(o,e,s){e[9].set("effects",[o.shader("radius",{radius:20})])},function(o,e,s){e[10].set("effects",[o.shader("radius",{radius:10}),o.shader("border",{width:20,color:"#60a5fa"})])},function(o,e,s){e[11].set("effects",o.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]}},hooks:{ready(){this.$setInterval(()=>{const o=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(o,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let i=0;this.$setInterval(()=>{i++,i%2?this.effects=[this.shader("borderLeft",{width:20,color:"#be123c"}),this.shader("borderRight",{width:20,color:"#f43f5e"})]:this.effects=[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]},2e3)}}}),hr=W.Component("ShowIf",{components:{Square:ct},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=40,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.x=50,n.w=200,n.h=300,n.color="#bef264",n.show=!0,t[2].nodeId||t[2].populate(n),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.x=350,f.w=200,f.h=300,f.color="#bef264",f.show=!1,t[3].nodeId||t[3].populate(f),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.x=650,c.w=200,c.h=300,c.color="#84cc16",c.show=1,t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.x=950,a.w=200,a.h=300,a.color="#84cc16",a.show=0,t[5].nodeId||t[5].populate(a),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.y=380,t[6].nodeId||t[6].populate(u),o=t[6],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.x=50,g.w=200,g.h=300,g.color="#fde047",g.show=e.showNr,t[7].nodeId||t[7].populate(g),o=t[6],t[8]||(t[8]=this.element({parent:o||"root"},e));const p={};p.x=350,p.w=200,p.h=300,p.color="#fde047",p.show=e.hideNr,t[8].nodeId||t[8].populate(p),o=t[6],t[9]||(t[9]=this.element({parent:o||"root"},e));const h={};h.x=650,h.w=200,h.h=300,h.color="#84cc16",h.show=e.showBool,t[9].nodeId||t[9].populate(h),o=t[6],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.x=950,m.w=200,m.h=300,m.color="#84cc16",m.show=e.hideBool,t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.y=720,t[11].nodeId||t[11].populate(y),o=t[11],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.x=50,b.w=200,b.h=300,b.color="#5eead4",t[12].nodeId||t[12].populate(b),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const I={};I.y=40,I.x=1e3,t[13].nodeId||t[13].populate(I);const w=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[13],t[14]||(t[14]=this.element({parent:o||"root"},e));const _={};if(_.show=!0,typeof w<"u")for(let L in w.config.props)delete _[w.config.props[L]];t[14].nodeId||t[14].populate(_),o=t[14];const R={};R.show=!0,t[15]||(t[15]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:R},t[14],e),t[15][Symbol.for("slots")][0]?(o=t[15][Symbol.for("slots")][0],e=t[15]):o=t[15][Symbol.for("children")][0]);const k=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[13],t[16]||(t[16]=this.element({parent:o||"root"},e));const x={};if(x.y=100,x.show=!1,typeof k<"u")for(let L in k.config.props)delete x[k.config.props[L]];t[16].nodeId||t[16].populate(x),o=t[16];const T={};T.y=100,T.show=!1,t[17]||(t[17]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:T},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]);const A=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[13],t[18]||(t[18]=this.element({parent:o||"root"},e));const B={};if(B.y=200,typeof A<"u")for(let L in A.config.props)delete B[A.config.props[L]];t[18].nodeId||t[18].populate(B),o=t[18];const E={};return E.y=200,E.show=e.showHideToggle,t[19]||(t[19]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:E},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[12].set("show",o.showHideToggle)},function(o,e,s){e[18].set("show",o.showHideToggle)},function(o,e,s){e[19][Symbol.for("props")].show=o.showHideToggle}],context:{}},state(){return{showNr:1,hidNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),pr=W.Component("Events",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.x=400,l.y=360,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=280,r.h=280,r.color="#e5e7eb",r.y=-5,t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=250,n.h=250,n.x=10,n.y=10,n.color=e.colors[0],t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};f.w=250,f.h=250,f.x=290,f.y=10,f.color=e.colors[1],t[3].nodeId||t[3].populate(f),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=250,c.h=250,c.x=570,c.y=10,c.color=e.colors[2],t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};return a.w=250,a.h=250,a.x=850,a.y=10,a.color=e.colors[3],t[5].nodeId||t[5].populate(a),t},effects:[function(o,e,s){e[1].set("x",o.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(i){const o=this.count-1;o===-1?this.parent.focus(i):this.count=Math.max(o,0)},right(i){const o=this.count+1;o===4?this.parent.focus(i):this.count=Math.min(o,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),mr=W.Component("SlotCard",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=300,l.h=500,l.color="{top: '#94a3b8', bottom: '#475569'}",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r[Symbol.for("isSlot")]=!0,r.x=20,r.y=20,t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.content=e.label,f.wordwrap=260,f.x=20,f.y=400,f.align="center",typeof n<"u")for(let a in n.config.props)delete f[n.config.props[a]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};return c.content=e.label,c.wordwrap=260,c.x=20,c.y=400,c.align="center",t[3]||(t[3]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:20}),o.shader("border",{width:6,color:"#e2e8f0"})])}],context:{}},props:[{key:"label"}]}),gr=W.Component("NamedSlotCard",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=700,l.h=300,l.color="{top: '#94a3b8', bottom: '#475569'}",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=20,r.y=20,t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const f={};if(f.content="First slot",typeof n<"u")for(let R in n.config.props)delete f[n.config.props[R]];t[2].nodeId||t[2].populate(f),o=t[2];const c={};c.content="First slot",t[3]||(t[3]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};a[Symbol.for("isSlot")]=!0,a.y=40,a.ref="first",t[4].nodeId||t[4].populate(a),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const u={};u.x=200,u.y=20,t[5].nodeId||t[5].populate(u);const g=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const p={};if(p.content="Second slot",typeof g<"u")for(let R in g.config.props)delete p[g.config.props[R]];t[6].nodeId||t[6].populate(p),o=t[6];const h={};h.content="Second slot",t[7]||(t[7]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:h},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]),o=t[5],t[8]||(t[8]=this.element({parent:o||"root"},e));const m={};m[Symbol.for("isSlot")]=!0,m.y=40,m.ref="second",t[8].nodeId||t[8].populate(m),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const y={};y.x=480,y.y=20,t[9].nodeId||t[9].populate(y);const b=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[9],t[10]||(t[10]=this.element({parent:o||"root"},e));const I={};if(I.content="Third slot",typeof b<"u")for(let R in b.config.props)delete I[b.config.props[R]];t[10].nodeId||t[10].populate(I),o=t[10];const w={};w.content="Third slot",t[11]||(t[11]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:w},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]),o=t[9],t[12]||(t[12]=this.element({parent:o||"root"},e));const _={};return _[Symbol.for("isSlot")]=!0,_.y=40,_.ref="third",t[12].nodeId||t[12].populate(_),t},effects:[function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:20}),o.shader("border",{width:6,color:"#e2e8f0"})])}],context:{}}}),Ze=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],yr=W.Component("Components",{components:{SlotCard:mr,NamedSlotCard:gr,Card:us,Square:ct},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.x=400,n.y=100,n.label="Element",typeof r<"u")for(let X in r.config.props)delete n[r.config.props[X]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};f.x=400,f.y=100,f.label="Element",t[2]||(t[2]=(s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard||(()=>{console.error("component SlotCard not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]),t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};t[3].nodeId||t[3].populate(c),o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const a={};a.w=100,a.h=100,t[4].nodeId||t[4].populate(a);const u=s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const g={};if(g.x=800,g.y=100,g.label="Component",typeof u<"u")for(let X in u.config.props)delete g[u.config.props[X]];t[5].nodeId||t[5].populate(g),o=t[5];const p={};p.x=800,p.y=100,p.label="Component",t[6]||(t[6]=(s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard||(()=>{console.error("component SlotCard not found")})).call(null,{props:p},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]),t[7]||(t[7]=this.element({parent:o||"root"},e));const h={};t[7].nodeId||t[7].populate(h);const m=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const y={};if(y.size=200,y.y=50,typeof m<"u")for(let X in m.config.props)delete y[m.config.props[X]];t[8].nodeId||t[8].populate(y),o=t[8];const b={};b.size=200,b.y=50,t[9]||(t[9]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:b},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]);const I=s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard;o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const w={};if(w.x=1200,w.y=100,w.label="Element & Component",typeof I<"u")for(let X in I.config.props)delete w[I.config.props[X]];t[10].nodeId||t[10].populate(w),o=t[10];const _={};_.x=1200,_.y=100,_.label="Element & Component",t[11]||(t[11]=(s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard||(()=>{console.error("component SlotCard not found")})).call(null,{props:_},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]),t[12]||(t[12]=this.element({parent:o||"root"},e));const R={};t[12].nodeId||t[12].populate(R),o=t[12],t[13]||(t[13]=this.element({parent:o||"root"},e));const k={};k.w=100,k.h=100,t[13].nodeId||t[13].populate(k);const x=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[12],t[14]||(t[14]=this.element({parent:o||"root"},e));const T={};if(T.size=200,T.y=150,typeof x<"u")for(let X in x.config.props)delete T[x.config.props[X]];t[14].nodeId||t[14].populate(T),o=t[14];const A={};A.size=200,A.y=150,t[15]||(t[15]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:A},t[14],e),t[15][Symbol.for("slots")][0]?(o=t[15][Symbol.for("slots")][0],e=t[15]):o=t[15][Symbol.for("children")][0]);const B=s.components&&s.components.Card||e[Symbol.for("components")].Card;o=t[0],t[16]||(t[16]=this.element({parent:o||"root"},e));const E={};if(E.x=400,E.y=700,E.size="small",typeof B<"u")for(let X in B.config.props)delete E[B.config.props[X]];t[16].nodeId||t[16].populate(E),o=t[16];const L={};L.x=400,L.y=700,L.size="small",t[17]||(t[17]=(s.components&&s.components.Card||e[Symbol.for("components")].Card||(()=>{console.error("component Card not found")})).call(null,{props:L},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]),t[18]||(t[18]=this.element({parent:o||"root"},e));const F={};t[18].nodeId||t[18].populate(F),o=t[18],t[19]||(t[19]=this.element({parent:o||"root"},e));const U={};U.w=100,U.h=100,t[19].nodeId||t[19].populate(U);const S=s.components&&s.components.NamedSlotCard||e[Symbol.for("components")].NamedSlotCard;o=t[0],t[20]||(t[20]=this.element({parent:o||"root"},e));const v={};if(v.x=800,v.y=700,typeof S<"u")for(let X in S.config.props)delete v[S.config.props[X]];t[20].nodeId||t[20].populate(v),o=t[20];const M={};M.x=800,M.y=700,t[21]||(t[21]=(s.components&&s.components.NamedSlotCard||e[Symbol.for("components")].NamedSlotCard||(()=>{console.error("component NamedSlotCard not found")})).call(null,{props:M},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]),t[22]||(t[22]=this.element({parent:o||"root"},e));const D={};t[22].nodeId||t[22].populate(D),o=t[22],t[23]||(t[23]=this.element({parent:o||"root"},e));const P={};P.color="#0891b2",P.x=10,P.y=140,P.w=80,P.h=60,P.parent=e[Symbol.for("slots")].filter(X=>X.ref==="second").shift()||e[Symbol.for("slots")][0]||o,P.slot="second",t[23].nodeId||t[23].populate(P),o=t[22],t[24]||(t[24]=this.element({parent:o||"root"},e));const z={};z.w=100,z.h=100,z.parent=e[Symbol.for("slots")].filter(X=>X.ref==="third").shift()||e[Symbol.for("slots")][0]||o,z.slot="third",t[24].nodeId||t[24].populate(z);const N=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[22],t[25]||(t[25]=this.element({parent:o||"root"},e));const $={};if($.size=100,$.parent=e[Symbol.for("slots")].filter(X=>X.ref==="first").shift()||e[Symbol.for("slots")][0]||o,$.slot="first",typeof N<"u")for(let X in N.config.props)delete $[N.config.props[X]];t[25].nodeId||t[25].populate($),o=t[25];const Y={};Y.size=100,Y.slot="first",t[26]||(t[26]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:Y},t[25],e),t[26][Symbol.for("slots")][0]?(o=t[26][Symbol.for("slots")][0],e=t[26]):o=t[26][Symbol.for("children")][0]),o=t[22],t[27]||(t[27]=this.element({parent:o||"root"},e));const H={};return H.color="#4d7c0f",H.x=40,H.y=40,H.w=40,H.h=60,H.parent=e[Symbol.for("slots")].filter(X=>X.ref==="second").shift()||e[Symbol.for("slots")][0]||o,H.slot="second",t[27].nodeId||t[27].populate(H),t},effects:[function(o,e,s){e[4].set("color",o.color)},function(o,e,s){e[13].set("color",o.color)},function(o,e,s){e[19].set("color",o.color)},function(o,e,s){e[24].set("color",o.color)}],context:{}},state(){return{color:Ze[0]}},hooks:{ready(){this.$setInterval(()=>{const i=Ze.indexOf(this.color)+1;this.color=i<=Ze.length?Ze[i]:Ze[0]},600)}}}),xr=W.Component("MemoryCard",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=320,l.h=200,l.x=e.col*360,l.y=e.row*250,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=320,r.y=125,r.mount="{y: 0.5}",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};return n.w=320,n.y=125,n.mount="{y: 0.5}",t[2].nodeId||t[2].populate(n),t},effects:[function(o,e,s){e[0].set("scale",{transition:o.scale})},function(o,e,s){e[0].set("rotation",{transition:o.disabled?-2:0})},function(o,e,s){e[1].set("h",{transition:o.h})},function(o,e,s){e[1].set("color",{transition:o.disabled?"#ccc":"#fff"})},function(o,e,s){e[1].set("src",o.image+"&w=320&h=200")},function(o,e,s){e[1].set("effects",[o.shader("radius",{radius:6})])},function(o,e,s){e[1].set("show",o.open)},function(o,e,s){e[2].set("h",{transition:o.h})},function(o,e,s){e[2].set("color",o.open?"transparent":{top:"#efefef",bottom:"#aaa"})},function(o,e,s){e[2].set("effects",[o.shader("radius",{radius:6})])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1}},hooks:{init(){this.$listen("closeMemoryCard",i=>{i===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",i=>{i===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(i){this.scale=1.08;const o="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.$announcer.speak(o)},unfocus(){this.scale=1}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),Mo=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],br=W.Component("Announcer",{components:{MemoryCard:xr},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.font="raleway",n.size=80,n.color="white",n.content="Let's play memory!",n.x=580,n.y=60,typeof r<"u")for(let p in r.config.props)delete n[r.config.props[p]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};f.font="raleway",f.size=80,f.color="white",f.content="Let's play memory!",f.x=580,f.y=60,t[2]||(t[2]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.font="kalam",a.size=40,a.color="#b91c1c",a.content="the Accessible edition :)",a.x=1200,a.y=170,a.rotation=-6,typeof c<"u")for(let p in c.config.props)delete a[c.config.props[p]];t[3].nodeId||t[3].populate(a),o=t[3];const u={};u.font="kalam",u.size=40,u.color="#b91c1c",u.content="the Accessible edition :)",u.x=1200,u.y=170,u.rotation=-6,t[4]||(t[4]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const g={};return g.x=260,g.y=260,t[5].nodeId||t[5].populate(g),t},effects:[function(o,e,s){parent=e[5];const t=o.cards,l=[];for(let r=0;r<t.length;r++){parent=e[5],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,card:t[r]});l.push(n.key.toString());const f=s.components&&s.components.MemoryCard||o[Symbol.for("components")].MemoryCard;e[6]=e[6]||{},e[6][n.key]||(e[6][n.key]=this.element({parent:parent||"root"},o));const c={};if(c.image=n.card.image,c.description=n.card.description,typeof f<"u")for(let u in f.config.props)delete c[f.config.props[u]];e[6][n.key].nodeId||e[6][n.key].populate(c),e[7]=e[7]||{},parent=e[6][n.key];const a={};a.col=n.index%4,a.row=Math.floor(n.index/4)%3,a.key=n.card.image,a.image=n.card.image,a.description=n.card.description,a.ref="card"+n.index,a.index=n.index,e[7][n.key]||(e[7][n.key]=(s.components&&s.components.MemoryCard||o[Symbol.for("components")].MemoryCard||(()=>{console.error("component MemoryCard not found")})).call(null,{props:a},e[6][n.key],o),e[7][n.key][Symbol.for("slots")][0]?(parent=e[7][n.key][Symbol.for("slots")][0],o=e[7][n.key]):parent=e[7][n.key][Symbol.for("children")][0]),e[6][n.key].set("col",n.index%4),e[6][n.key].set("row",Math.floor(n.index/4)%3),e[6][n.key].set("key",n.card.image),e[6][n.key].set("ref","card"+n.index),e[6][n.key].set("index",n.index),e[7][n.key][Symbol.for("props")].col=n.index%4,e[7][n.key][Symbol.for("props")].row=Math.floor(n.index/4)%3,e[7][n.key][Symbol.for("props")].key=n.card.image,e[7][n.key][Symbol.for("props")].ref="card"+n.index,e[7][n.key][Symbol.for("props")].index=n.index}e[7]&&Object.keys(e[7]).forEach(r=>{l.indexOf(r)===-1&&(e[7][r].delete&&e[7][r].delete(),e[7][r].destroy&&e[7][r].destroy(),delete e[7][r])})}],context:{}},state(){return{cards:Mo.concat(Mo),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",i=>{this.openCards.length<2&&this.openCards.push(i),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(i){if(this.focusedRow===-1){this.focusedRow=0;return}i=i+this.focusedRow*4,this.select("card"+i).focus()},focusedRow(i){if(this.focusedCol===-1){this.focusedCol=0;return}i=this.focusedCol+i*4,this.select("card"+i).focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){this.focusedCol===0&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){this.focusedRow===2&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),Qe=(i,o)=>Math.floor(Math.random()*(o-i+1)+i),Sr=W.Component("Item",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.src="assets/blits-b-small.png",l.w=96,l.h=168,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("x",{transition:{value:o.x,duration:2900}})},function(o,e,s){e[0].set("y",{transition:{value:o.y,duration:2900}})},function(o,e,s){e[0].set("rotation",{transition:{value:o.rotation,duration:2900}})},function(o,e,s){e[0].set("scale",{transition:{value:o.scale,duration:1e3}})}],context:{}},state(){return{x:Qe(20,1560),y:Qe(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=Qe(20,1740),this.y=Qe(20,900),this.rotation=Qe(10,360)},3e3)}}}),wr=W.Component("Exponential",{components:{Item:Sr},template:`<Element>
    <Item :for="item in $items" key="$item" />
  </Element>`,state(){return{items:[]}},hooks:{ready(){const i=this.$setInterval(()=>{for(let o=0;o<=Math.floor(this.items.length/10);o++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(i)},2e3)}}}),Cr=W.Application({code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.RouterView||e[Symbol.for("components")].RouterView;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(typeof r<"u")for(let g in r.config.props)delete n[r.config.props[g]];t[1].nodeId||t[1].populate(n),o=t[1];const f={};t[2]||(t[2]=(s.components&&s.components.RouterView||e[Symbol.for("components")].RouterView||(()=>{console.error("component RouterView not found")})).call(null,{props:f},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.FPScounter||e[Symbol.for("components")].FPScounter;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};if(a.x=1610,typeof c<"u")for(let g in c.config.props)delete a[c.config.props[g]];t[3].nodeId||t[3].populate(a),o=t[3];const u={};return u.x=1610,t[4]||(t[4]=(s.components&&s.components.FPScounter||e[Symbol.for("components")].FPScounter||(()=>{console.error("component FPScounter not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("color",o.backgroundColor)}],context:{}},state(){return{backgroundColor:"#1e293b"}},routes:[{path:"/",component:Bn,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>qo(()=>import("./Loading-07631beb.js"),["assets/Loading-07631beb.js","assets/settings-f05e2292.js"])},{path:"/demos/intro",component:()=>new Promise(i=>{i(Nn)})},{path:"/demos/theming",component:Dn},{path:"/demos/tmdb",component:jn},{path:"/demos/sprites",component:Zn},{path:"/demos/focushandling",component:Jn},{path:"/demos/memory-game",component:br,announce:"Let's play Memory"},{path:"/examples/positioning",component:er},{path:"/examples/colors",component:tr},{path:"/examples/gradients",component:or},{path:"/examples/transitions",component:sr},{path:"/examples/alpha",component:ir},{path:"/examples/scaling",component:nr},{path:"/examples/rotation",component:rr},{path:"/examples/keyinput",component:lr},{path:"/examples/texts",component:fr},{path:"/examples/images",component:ar},{path:"/examples/components",component:cr},{path:"/examples/forloop",component:dr},{path:"/examples/effects",component:ur},{path:"/examples/showif",component:hr},{path:"/examples/events",component:pr},{path:"/examples/slots",component:yr},{path:"/benchmarks/exponential",component:wr}],hooks:{ready(){this.$listen("changeBackground",i=>{this.backgroundColor=i?i+80:"#1e293b"})}},input:{escape(){this.quit()},back(){this.$router.to("/")}}});W.Launch(Cr,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,fontLoader:mn,reactivityMode:"Proxy",keymap:yn(),fonts:[{family:"lato",type:"msdf",png:"fonts/Lato-Regular.msdf.png",json:"fonts/Lato-Regular.msdf.json"},{family:"raleway",type:"msdf",png:"fonts/Raleway-ExtraBold.msdf.png",json:"fonts/Raleway-ExtraBold.msdf.json"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",png:"fonts/Kalam-Regular.msdf.png",json:"fonts/Kalam-Regular.msdf.json"}]});export{W as B,ct as S};
